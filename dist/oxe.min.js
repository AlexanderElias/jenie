/*
	Name: Oxe
	Version: 3.5.1
	License: MPL-2.0
	Author: Alexander Elias
	Email: alex.steven.elias@gmail.com
	This Source Code Form is subject to the terms of the Mozilla Public
	License, v. 2.0. If a copy of the MPL was not distributed with this
	file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
var _createClass=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Oxe",t):e.Oxe=t()})(this,function(){"use strict";var e=function(){function e(t){_classCallCheck(this,e),this.data={},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){if(e=e||{},e.components)for(var t,a=0,n=e.components.length;a<n;a++)t=e.components[a],this.define(t)}},{key:"renderSlot",value:function(e,t){for(var a=e.querySelectorAll("slot[name]"),n=0,r=a.length;n<r;n++){var o=a[n].getAttribute("name"),i=t.querySelector("[slot=\""+o+"\"]");i?a[n].parentNode.replaceChild(i,a[n]):a[n].parentNode.removeChild(a[n])}var l=e.querySelector("slot:not([name])");if(l&&t.children.length)for(;t.firstChild;)l.parentNode.insertBefore(t.firstChild,l);l&&l.parentNode.removeChild(l)}},{key:"renderTemplate",value:function(e){var t=document.createDocumentFragment();if(e)if("string"==typeof e){var a=document.createElement("div");for(a.innerHTML=e;a.firstChild;)t.appendChild(a.firstChild)}else t.appendChild(e);return t}},{key:"renderStyle",value:function(e,t){if(e){if(window.CSS&&window.CSS.supports){if(!window.CSS.supports("(--t: black)")){var a=e.match(/--\w+(?:-+\w+)*:\s*.*?;/g);a.forEach(function(t){var a=t.match(/(--\w+(?:-+\w+)*):\s*(.*?);/),n=new RegExp("var\\("+a[1]+"\\)","g");e=e.replace(a[0],""),e=e.replace(n,a[2])})}window.CSS.supports(":scope")||(e=e.replace(/\:scope/g,"[o-scope=\""+t+"\"]")),window.CSS.supports(":host")||(e=e.replace(/\:host/g,"[o-scope=\""+t+"\"]"))}var n=document.createElement("style"),r=document.createTextNode(e);return n.appendChild(r),n}}},{key:"created",value:function(e,t){var a=this,n=t.name+"-"+t.count++;if(Object.defineProperties(e,{scope:{enumerable:!0,value:n},status:{enumerable:!0,value:"created"}}),e.setAttribute("o-scope",n),g.model.set(n,t.model||{}),g.methods.data[n]=t.methods,a.compiled&&e.parentNode&&"O-ROUTER"===e.parentNode.nodeName)g.view.add(e),t.created&&t.created.call(e);else{var r=a.renderTemplate(t.template),o=a.renderStyle(t.style,n);o&&r.insertBefore(o,r.firstChild),t.shadow&&"attachShadow"in document.body?e.attachShadow({mode:"open"}).appendChild(r):t.shadow&&"createShadowRoot"in document.body?e.createShadowRoot().appendChild(r):(a.renderSlot(r,e),e.appendChild(r)),g.view.add(e),t.created&&window.requestAnimationFrame(t.created.bind(e))}}},{key:"define",value:function(e){var t=this;if(!e.name)throw new Error("Oxe.component.define - requires name");if(e.name in t.data)throw new Error("Oxe.component.define - component defined");return t.data[e.name]=e,e.count=0,e.compiled=!1,e.model=e.model||{},e.shadow=e.shadow||!1,e.template=e.template||"",e.properties=e.properties||{},e.properties.scope={enumerable:!0,configurable:!0},e.properties.status={enumerable:!0,configurable:!0,value:"define"},e.properties.model={enumerable:!0,configurable:!0,get:function(){return g.model.get(this.scope)},set:function(e){return e=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},g.model.set(this.scope,e)}},e.properties.methods={enumerable:!0,get:function(){return g.methods.data[this.scope]}},e.proto=Object.create(HTMLElement.prototype,e.properties),e.proto.attachedCallback=e.attached,e.proto.detachedCallback=e.detached,e.proto.attributeChangedCallback=e.attributed,e.proto.createdCallback=function(){t.created(this,e)},document.registerElement(e.name,{prototype:e.proto})}}]),e}(),t={extension:function(e){var t=e.lastIndexOf(".");return 0<t?e.slice(t+1):""},join:function(){return Array.prototype.join.call(arguments,"/").replace(/\/{2,}/g,"/").replace(/^(https?:\/)/,"$1/")},base:function(e){var t=window.document.querySelector("base");return e&&(t?t.href=e:(t=window.document.createElement("base"),t.href=e,window.document.head.insertBefore(t,window.document.head.firstElementChild))),t?t.href:window.location.href.replace(/(\?|#).*?$/,"")},resolve:function(e,t){var a=[];if(e=e.replace(window.location.origin,""),0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//"))return e;"/"!==e.charAt(0)&&(t=t||this.base(),e=t+"/"+e,e=e.replace(window.location.origin,"")),e=e.replace(/\/{2,}/,"/"),e=e.replace(/^\//,""),e=e.replace(/\/$/,"");for(var n=e.split("/"),r=0,o=n.length;r<o;r++)if("."===n[r]||""===n[r])continue;else".."===n[r]?0<r&&a.splice(r-1,1):a.push(n[r]);return"/"+a.join("/")}},a=function(){function e(t){_classCallCheck(this,e),this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},e.base&&t.base(e.base)}}]),e}(),n={PATH:/\s*\|.*/,PREFIX:/(data-)?o-/,ROOT:/^(https?:)?\/?\//,TYPE:/(data-)?o-|-.*$/g,SPLIT_MODIFIERS:/\s|\s?,\s?/,binderNormalize:function(e){return e?e.replace(/\s+$/,"").replace(/^\s+/,"").replace(/\.{2,}/g,".").replace(/\|{2,}/g,"|").replace(/\,{2,}/g,",").replace(/\s{2,}/g," ").replace(/\s?\|\s?/,"|"):""},binderName:function(e){return e.replace(this.PREFIX,"")},binderType:function(e){return e.replace(this.TYPE,"")},binderNames:function(e){return e.replace(this.PREFIX,"").split("-")},binderValues:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?e.split("."):e.slice(0,t).split(".")},binderModifiers:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?[]:e.slice(t+1).split(this.SPLIT_MODIFIERS)},binderPath:function(e){return this.binderNormalize(e).replace(this.PATH,"")},formData:function(e,t){for(var a=e.querySelectorAll("[o-value]"),n={},r=0,o=a.length;r<o;r++){var i=a[r],l=i.getAttribute("o-value");if(l){l=l.replace(/\s*\|.*/,"");var d=l.split(".").slice(-1);n[d]=this.getByPath(t,l)}}return n},walker:function(e,t){for(t(e),e=e.firstChild;e;)this.walker(e,t),e=e.nextSibling},replaceEachVariable:function(e,t,a,n){var r=this;this.walker(e,function(e){if(3===e.nodeType)(e.nodeValue==="$"+t||e.nodeValue==="$index")&&(e.nodeValue=n);else if(1===e.nodeType)for(var r=0,o=e.attributes.length;r<o;r++){var i=e.attributes[r],l=i.name,d=i.value.split(" ")[0].split("|")[0];(0===l.indexOf("o-")||0===l.indexOf("data-o-"))&&(d===t||0===d.indexOf(t))&&(i.value=a+"."+n+i.value.slice(t.length))}})},traverse:function(e,t,a){for(var n,r="string"==typeof t?t.split("."):t,o=r.length-1,l=0;l<o;l++){if(n=r[l],!(n in e))if("function"==typeof a)a(e,n,l,r);else return;e=e[n]}return{data:e,key:r[o]}},setByPath:function(e,t,a){for(var n,r="string"==typeof t?t.split("."):t,o=r.length-1,l=0;l<o;l++)n=r[l],n in e||(isNaN(r[l+1])?e[n]={}:e[n]=[]),e=e[n];return e[r[o]]=a},getByPath:function(e,t){for(var a,n="string"==typeof t?t.split("."):t,r=n.length-1,o=0;o<r;o++){if(a=n[o],!(a in e))return;e=e[a]}return e[n[r]]},joinDot:function(){return Array.prototype.join.call(arguments,".").replace(/\.{2,}/g,".")},getScope:function(e){return e?e.hasAttribute("o-scope")||e.hasAttribute("data-o-scope")?e:e.parentNode?this.getScope(e.parentNode):void 0:void 0},ready:function(e){e&&("interactive"!==window.document.readyState&&"complete"!==window.document.readyState?window.document.addEventListener("DOMContentLoaded",function t(){e(),window.document.removeEventListener("DOMContentLoaded",t)},!0):e())}},r=function(){function e(){_classCallCheck(this,e),this.events={}}return _createClass(e,[{key:"on",value:function(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){if(e in this.events){var a=this.events[e].indexOf(t);-1!==a&&this.events[e].splice(a,1)}}},{key:"emit",value:function(e){if(e in this.events)for(var t=this.events[e],a=Array.prototype.slice.call(arguments,1),n=0,r=t.length;n<r;n++)t[n].apply(this,a)}}]),e}(),o=function(e){function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.reads=[],a.writes=[],a.fps=1e3/60,a.pending=!1,a.setup(e),a}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){e=e||{},e.fps=void 0===e.fps||null===e.fps?this.fps:e.fps}},{key:"read",value:function(e,t){var a=t?e.bind(t):e;return this.reads.push(a),this.tick(),a}},{key:"write",value:function(e,t){var a=t?e.bind(t):e;return this.writes.push(a),this.tick(),a}},{key:"tick",value:function(){this.pending||(this.pending=!0,window.requestAnimationFrame(this.flush.bind(this)))}},{key:"flush",value:function(e){var t;try{t=this.runReads(this.reads,e),this.runWrites(this.writes,t)}catch(t){if(this.events.error&&this.events.error.length)this.emit("error",t);else throw t}this.pending=!1,(this.reads.length||this.writes.length)&&this.tick()}},{key:"runWrites",value:function(e,t){for(var a;a=e.shift();)if(a(),t&&e.length===t)return}},{key:"runReads",value:function(e,t){for(var a;a=e.shift();)if(a(),this.fps&&performance.now()-t>this.fps)return e.length}},{key:"remove",value:function(e,t){var a=e.indexOf(t);return!!~a&&!!e.splice(a,1)}},{key:"clear",value:function(e){return this.remove(this.reads,e)||this.remove(this.writes,e)}}]),t}(r),i=function(){function e(t){_classCallCheck(this,e),this.mime={xml:"text/xml; charset=utf-8",html:"text/html; charset=utf-8",text:"text/plain; charset=utf-8",json:"application/json; charset=utf-8",js:"application/javascript; charset=utf-8"},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this.auth=e.auth||!1,this.method=e.method||"get",this.request=e.request,this.response=e.response,this.acceptType=e.acceptType,this.contentType=e.contentType,this.responseType=e.responseType}},{key:"serialize",value:function(e){var t="";for(var a in e)t=0<t.length?t+"&":t,t=t+encodeURIComponent(a)+"="+encodeURIComponent(e[a]);return t}},{key:"change",value:function(e,t,a){if(4===a.readyState){if(t.opt=e,t.xhr=a,t.statusCode=a.status,t.statusText=a.statusText,t.data=void 0===a.response?void 0===a.responseText?void 0:a.responseText:a.response,"json"===e.responseType&&"string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(e){console.warn(e)}if((401===a.status||403===a.status)&&t.opt.auth&&g.keeper.response)return g.keeper.response(t);if(this.response&&!1===this.response(t))return;200<=a.status&&300>a.status||304==a.status?e.success?e.success(t):e.handler&&(e.error=!1,e.handler(t)):e.error?e.error(t):e.handler&&(e.error=!0,e.handler(t))}}},{key:"fetch",value:function(e){var t,a={},n=new XMLHttpRequest;if(e=e||{},e.headers={},e.url=e.url?e.url:window.location.href,e.auth=void 0===e.auth||null===e.auth?this.auth:e.auth,e.method=void 0===e.method||null===e.method?this.method:e.method,e.acceptType=void 0===e.acceptType||null===e.acceptType?this.acceptType:e.acceptType,e.contentType=void 0===e.contentType||null===e.contentType?this.contentType:e.contentType,e.responseType=void 0===e.responseType||null===e.responseType?this.responseType:e.responseType,e.method=e.method.toUpperCase(),n.open(e.method,e.url,!0,e.username,e.password),e.contentType)switch(e.contentType){case"js":e.headers["Content-Type"]=this.mime.js;break;case"xml":e.headers["Content-Type"]=this.mime.xml;break;case"html":e.headers["Content-Type"]=this.mime.html;break;case"json":e.headers["Content-Type"]=this.mime.json;break;default:e.headers["Content-Type"]=e.contentType;}if(e.acceptType)switch(e.acceptType){case"js":e.headers.Accept=this.mime.js;break;case"xml":e.headers.Accept=this.mime.xml;break;case"html":e.headers.Accept=this.mime.html;break;case"json":e.headers.Accept=this.mime.json;break;default:e.headers.Accept=e.acceptType;}if(e.responseType)switch(e.responseType){case"text":n.responseType="text";break;case"json":n.responseType="json";break;case"blob":n.responseType="blob";break;case"xml":n.responseType="document";break;case"html":n.responseType="document";break;case"document":n.responseType="document";break;case"arraybuffer":n.responseType="arraybuffer";break;default:n.responseType=e.responseType;}if(e.mimeType&&n.overrideMimeType(e.mimeType),e.withCredentials&&(n.withCredentials=e.withCredentials),e.headers)for(var r in e.headers)n.setRequestHeader(r,e.headers[r]);e.data&&("GET"===e.method?e.url=e.url+"?"+this.serialize(e.data):"json"===e.contentType?t=JSON.stringify(e.data):t=e.data),a.xhr=n,a.opt=e,a.data=e.data,a.opt.auth&&!1===g.keeper.request(a)||this.request&&!1===this.request(a)||(n.onreadystatechange=this.change.bind(this,e,a,n),n.send(t))}},{key:"post",value:function(e){return e.method="post",this.fetch(e)}},{key:"get",value:function(e){return e.method="get",this.fetch(e)}},{key:"put",value:function(e){return e.method="put",this.fetch(e)}},{key:"head",value:function(e){return e.method="head",this.fetch(e)}},{key:"patch",value:function(e){return e.method="patch",this.fetch(e)}},{key:"delete",value:function(e){return e.method="delete",this.fetch(e)}},{key:"options",value:function(e){return e.method="options",this.fetch(e)}},{key:"connect",value:function(e){return e.method="connect",this.fetch(e)}}]),e}(),l=function(e){function a(){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.data=[],e.location={},e.ran=!1,e.auth=!1,e.hash=!1,e.trailing=!1,e.element=null,e.contain=!1,e.compiled=!1,document.addEventListener("click",e.clickListener.bind(e),!0),window.addEventListener("popstate",e.stateListener.bind(e),!0),e}return _inherits(a,e),_createClass(a,[{key:"setup",value:function(e){e=e||{},this.auth=void 0===e.auth?this.auth:e.auth,this.hash=void 0===e.hash?this.hash:e.hash,this.element=void 0===e.element?this.element:e.element,this.contain=void 0===e.contain?this.contain:e.contain,this.external=void 0===e.external?this.external:e.external,this.trailing=void 0===e.trailing?this.trailing:e.trailing,e.routes&&this.add(e.routes),this.route(window.location.href,{replace:!0})}},{key:"scroll",value:function(e,t){window.scroll(e,t)}},{key:"back",value:function(){window.history.back()}},{key:"redirect",value:function(e){window.location.href=e}},{key:"add",value:function(e){if(!e)throw new Error("Oxe.router.add - requires data parameter");else"Object"===e.constructor.name?Array.prototype.push.call(this.data,e):"Array"===e.constructor.name&&Array.prototype.push.apply(this.data,e)}},{key:"remove",value:function(e){for(var t=0,a=this.data.length;t<a;t++)e===this.data[t].path&&this.data.splice(t,1)}},{key:"get",value:function(e){for(var t,a=0,n=this.data.length;a<n;a++)if(t=this.data[a],e===t.path)return t}},{key:"find",value:function(e){for(var t,a=0,n=this.data.length;a<n;a++)if(t=this.data[a],this.isPath(t.path,e))return t}},{key:"filter",value:function(e){for(var t,a=[],n=0,r=this.data.length;n<r;n++)t=this.data[n],this.isPath(t.path,e)&&a.push(t);return a}},{key:"isPath",value:function(e,t){return!!t&&("String"===t.constructor.name?new RegExp("^"+e.replace(/{\*}/g,"(?:.*)").replace(/{(\w+)}/g,"([^/]+)")+"(/)?$").test(t||"/"):"RegExp"===t.constructor.name?t.test(e):void 0)}},{key:"toParameterObject",value:function(e,t){var a={};if(!e||!t||"/"===e||"/"===t)return a;for(var n=/{|}/g,r=/{(\w+)}/,o=t.split("/"),d=e.split("/"),s=0,i=d.length;s<i;s++)if(r.test(d[s])){var l=d[s].replace(n,"");a[l]=o[s]}return a}},{key:"toQueryString",value:function(e){var t="?";for(var a in e){var n=e[a];t+=a+"="+n+"&"}return"&"===t.slice(-1)&&(t=t.slice(0,-1)),t}},{key:"toQueryObject",value:function(e){var t={};0===e.indexOf("?")&&(e=e.slice(1));for(var a,n=e.split("&"),r=0,o=n.length;r<o;r++)a=n[r].split("="),a[0]&&a[1]&&(t[a[0]]=a[1]);return t}},{key:"toLocationObject",value:function(e){var a={};a.port=window.location.port,a.host=window.location.host,a.hash=window.location.hash,a.origin=window.location.origin,a.hostname=window.location.hostname,a.protocol=window.location.protocol,a.username=window.location.username,a.password=window.location.password,a.pathname=e,a.base=t.base(),a.basename=a.base,0===a.basename.indexOf(a.origin)&&(a.basename=a.basename.slice(a.origin.length)),0===a.pathname.indexOf(a.origin)&&(a.pathname=a.pathname.slice(a.origin.length)),0===a.pathname.indexOf(a.basename)&&(a.pathname=a.pathname.slice(a.basename.length)),0===a.pathname.indexOf(a.basename.slice(0,-1))&&(a.pathname=a.pathname.slice(a.basename.slice(0,-1).length)),(this.hash&&0===a.pathname.indexOf("#")||0===a.pathname.indexOf("/#")||0===a.pathname.indexOf("#/")||0===a.pathname.indexOf("/#/"))&&(a.pathname=a.pathname.slice(2));var n=a.pathname.indexOf("#");-1===n?a.hash="":(a.hash=a.pathname.slice(n),a.pathname=a.pathname.slice(0,n));var r=a.pathname.indexOf("?");return-1===r?a.search="":(a.search=a.pathname.slice(r),a.pathname=a.pathname.slice(0,r)),a.routePath=t.join("/",a.pathname),a.pathname=t.join(a.basename,a.pathname),a.href=t.join(a.origin,this.hash?"#":"/",a.pathname),this.trailing?(a.href=t.join(a.href,"/"),a.pathname=t.join(a.pathname,"/")):(a.href=a.href.replace(/\/{1,}$/,""),a.pathname=a.pathname.replace(/\/{1,}$/,"")),this.hash&&/\/#$/.test(a.href)&&(a.href+="/"),a.routePath=a.routePath||"/",a.pathname=a.pathname||"/",a.href+=a.search,a.href+=a.hash,a}},{key:"render",value:function(e){g.utility.ready(function(){if(this.emit("routing"),e.title&&(document.title=e.title),!this.element&&(this.element=this.element||"o-router","string"==typeof this.element&&(this.element=document.body.querySelector(this.element)),!this.element))throw new Error("Oxe.router - missing o-router element");if(!e.element)if(e.load&&g.loader.load(e.load),!e.component)throw new Error("Oxe.router - missing route component");else"String"===e.component.constructor.name?e.element=document.createElement(e.component):"Object"===e.component.constructor.name&&(g.component.define(e.component),e.element=this.compiled?this.element.firstChild:document.createElement(e.component.name));if(e.element.inRouterCache=!1,e.element.isRouterComponent=!0,!this.compiled){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e.element)}this.scroll(0,0),this.emit("routed")}.bind(this))}},{key:"route",value:function(e,t){var a,n;return t=t||{},"string"==typeof e?(t.query&&(e+=this.toQueryString(t.query)),a=this.toLocationObject(e),n=this.find(a.routePath)||{},a.title=n.title||"",a.query=this.toQueryObject(a.search),a.parameters=this.toParameterObject(n.path,a.routePath)):(a=e,n=this.find(a.routePath)||{}),this.auth&&(!0===n.auth||void 0===n.auth)&&!1===g.keeper.route(n)?void 0:n.handler?n.handler(n):n.redirect?redirect(n.redirect):void(this.location=a,!this.compiled&&window.history[t.replace?"replaceState":"pushState"](a,a.title,a.href),this.render(n))}},{key:"stateListener",value:function(t){this.route(t.state||window.location.href,{replace:!0})}},{key:"clickListener",value:function(t){var e=t.path?t.path[0]:t.target,a=e.parentNode;if(this.contain){for(;a&&"O-ROUTER"!==a.nodeName;)a=a.parentNode;if("O-ROUTER"!==a.nodeName)return}if(!(t.metaKey||t.ctrlKey||t.shiftKey)){for(;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e.hasAttribute("download")||e.hasAttribute("external")||e.hasAttribute("o-external")||0===e.href.indexOf("tel:")||0===e.href.indexOf("ftp:")||0===e.href.indexOf("file:")||0===e.href.indexOf("mailto:")||0!==e.href.indexOf(window.location.origin)||this.external&&("RegExp"===this.external.constructor.name&&this.external.test(e.href)||"Function"===this.external.constructor.name&&this.external(e.href)||"String"===this.external.constructor.name&&this.external===e.href)||(this.location.href!==e.href&&this.route(e.href),!this.compiled&&t.preventDefault())}}}]),a}(r),d={_innerHandler:function(e,t,a){return"\\"===a[t-1]?void 0:"'"===e?"\\'":"\""===e?"\\\"":"\t"===e?"\\t":"\n"===e?"\\n":void 0},_updateString:function(e,t,a){return a.slice(0,t)+e+a.slice(t+1)},_updateIndex:function(e,t){return t+e.length-1},template:function(e){var t=e.indexOf("`"),a=e.indexOf("`",t+1);if(-1===t||-1===a)return e;for(var n,r,o=0,i=0,l=e,d=!1,s=0;s<l.length;s++)r=l[s],"`"===r&&"\\"!==l[s-1]?d?(o++,n="'",d=!1,l=this._updateString(n,s,l),s=this._updateIndex(n,s)):(i++,n="'",d=!0,l=this._updateString(n,s,l),s=this._updateIndex(n,s)):d&&(n=this._innerHandler(r,s,l))&&(l=this._updateString(n,s,l),s=this._updateIndex(n,s));if(l=l.replace(/\${(.*?)}/g,"'+$1+'"),i==o)return l;throw new Error("Oxe - Transformer missing backtick")},patterns:{exps:/export\s+(?:default|var|let|const)?\s+/g,imps:/import(?:\s+(?:\*\s+as\s+)?\w+\s+from)?\s+(?:'|").*?(?:'|")/g,imp:/import(?:\s+(?:\*\s+as\s+)?(\w+)\s+from)?\s+(?:'|")(.*?)(?:'|")/},getImports:function(e,a){for(var n,r=[],o=e.match(this.patterns.imps)||[],d=0,i=o.length;d<i;d++)n=o[d].match(this.patterns.imp),r[d]={raw:n[0],name:n[1],url:t.resolve(n[2],a),extension:t.extension(n[2])},r[d].extension||(r[d].url+=".js");return r},getExports:function(e){for(var t,a=[],n=e.match(this.patterns.exps)||[],r=0,o=n.length;r<o;r++)t=n[r],a[r]={raw:t,default:-1!==t.indexOf("default")};return a},replaceImports:function(e,t){if(!t.length)return e;for(var a=0,n=t.length;a<n;a++){var r=t[a],o=(r.name?"var "+r.name+" = ":"")+"$LOADER.data['"+r.url+"'].result";e=e.replace(r.raw,o)}return e},replaceExports:function(e,t){if(!t.length)return e;if(1===t.length)return e.replace(t[0].raw,"return ");var a,n;for(e="var $EXPORT = {};\n"+e,e+="\nreturn $EXPORT;\n",(a=0,n=t.length);a<n;a++)e=e.replace(t[a].raw,"$EXPORT.");return e},ast:function(e){var t={};return t.url=e.url,t.raw=e.text,t.cooked=e.text,t.base=t.url.slice(0,t.url.lastIndexOf("/")+1),t.imports=this.getImports(t.raw,t.base),t.exports=this.getExports(t.raw),t.cooked=this.replaceImports(t.cooked,t.imports),t.cooked=this.replaceExports(t.cooked,t.exports),t}},s=function(e){function a(){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.data={},e.ran=!1,e.methods={},e.transformers={},document.addEventListener("load",e.listener.bind(e),!0),e}return _inherits(a,e),_createClass(a,[{key:"setup",value:function(e){if(e=e||{},this.methods=e.methods||this.methods,this.transformers=e.transformers||this.transformers,e.loads)for(var t;t=e.loads.shift();)this.load(t)}},{key:"execute",value:function(e){var t="'use strict';\n\n"+(e.ast?e.ast.cooked:e.text),a=new Function("$LOADER","window",t);e.result=a(this,window)}},{key:"ready",value:function(e){if(e&&e.listener&&e.listener.length)for(var t;t=e.listener.shift();)t(e)}},{key:"fetch",value:function(e){var t=this,a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState)if(200<=a.status&&300>a.status||304==a.status)e.text=a.responseText,"js"===e.extension?e.transformer?t.transform(e,function(){t.execute(e),t.ready(e)}):(t.execute(e),t.ready(e)):t.ready(e);else throw new Error(a.responseText)},a.open("GET",e.url),a.send()}},{key:"transform",value:function(e,t){if(("es"===e.transformer||"est"===e.transformer)&&(e.text=d.template(e.text)),("es"===e.transformer||"esm"===e.transformer)&&(e.ast=d.ast(e)),e.ast&&e.ast.imports.length)for(var a=0,n=e.ast.imports.length,r=function(){a++,a===n&&t()},o=0;o<n;o++)this.load({listener:r,method:e.method,url:e.ast.imports[o].url,transformer:e.transformer});else t()}},{key:"attach",value:function(e){var t=document.createElement(e.tag);for(var a in e.attributes["o-load"]="true",e.attributes)t.setAttribute(a,e.attributes[a]);document.head.appendChild(t)}},{key:"js",value:function(e){"fetch"===e.method||"es"===e.transformer||"est"===e.transformer||"esm"===e.transformer?this.fetch(e):"script"===e.method?this.attach({tag:"script",attributes:{type:"text/javascript",src:e.url,async:"true"}}):this.attach({tag:"script",attributes:{type:"module",src:e.url,async:"true"}})}},{key:"css",value:function(e){"fetch"===e.method?this.fetch(e):this.attach({tag:"link",attributes:{href:e.url,type:"text/css",rel:"stylesheet"}})}},{key:"load",value:function(e,a){if("string"==typeof e?e={url:e}:a=e.listener,e.url=t.resolve(e.url),e.url in this.data){var n=this.data[e.url];return void(n.listener.length?a&&n.listener.push(a):(a&&n.listener.push(a),this.ready(n)))}this.data[e.url]=e,e.extension=e.extension||t.extension(e.url),e.listener=a?[a]:[],e.method=e.method||this.methods[e.extension],e.transformer=e.transformer||this.transformers[e.extension],"js"===e.extension?this.js(e):"css"===e.extension?this.css(e):this.fetch(e)}},{key:"listener",value:function(a){var e=a.target;if(1===e.nodeType&&e.hasAttribute("o-load")){var n=t.resolve(e.src||e.href),r=this.data[n];this.ready(r)}}}]),a}(r),u={alt:function(e){e.element.alt=""},each:function(e){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)},href:function(e){e.element.href=""},class:function(e){var t=e.names.slice(1).join("-");e.element.classList.remove(t)},html:function(e){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)},on:function(e){e.element.removeEventListener(e.names[1],e.cache,!1)},css:function(e){e.element.style.cssText=""},required:function(e){e.element.required=!1},src:function(e){e.element.src=""},text:function(e){e.element.innerText=""},value:function(e){var t,a,n,r,o;if("checkbox"===e.element.type)e.element.checked=!1,e.element.value=!1;else if("SELECT"===e.element.nodeName)for(o=e.element.options,t=0,a=o.length;t<a;t++)r=o[t],r.selected=!1;else if("radio"===e.element.type)for(n="input[type=\"radio\"][o-value=\""+e.path+"\"]",o=e.element.parentNode.querySelectorAll(n),(t=0,a=o.length);t<a;t++)r=o[t],r.checked=0===t;else e.element.value=""},default:function(e){console.log(e)}},p={required:function(e){g.batcher.read(function(){return e.element.required===e.data?void(e.pending=!1):void g.batcher.write(function(){e.element.required=g.binder.modifyData(e,e.data),e.pending=!1})})},disable:function(e){g.batcher.read(function(){return e.element.disabled===e.data?void(e.pending=!1):void g.batcher.write(function(){e.element.disabled=g.binder.modifyData(e,e.data),e.pending=!1})})},enable:function(e){g.batcher.read(function(){return e.element.disabled===!e.data?void(e.pending=!1):void g.batcher.write(function(){e.element.disabled=!g.binder.modifyData(e,e.data),e.pending=!1})})},hide:function(e){g.batcher.read(function(){return e.element.hidden===e.data?void(e.pending=!1):void g.batcher.write(function(){e.element.hidden=g.binder.modifyData(e,e.data),e.pending=!1})})},show:function(e){g.batcher.read(function(){return e.element.hidden===!e.data?void(e.pending=!1):void g.batcher.write(function(){e.element.hidden=!g.binder.modifyData(e,e.data),e.pending=!1})})},read:function(e){g.batcher.read(function(){return e.element.readOnly===e.data?void(e.pending=!1):void g.batcher.write(function(){e.element.readOnly=g.binder.modifyData(e,e.data),e.pending=!1})})},write:function(e){g.batcher.read(function(){return e.element.readOnly===!e.data?void(e.pending=!1):void g.batcher.write(function(){e.element.readOnly=!g.binder.modifyData(e,e.data),e.pending=!1})})},html:function(e){g.batcher.read(function(){return e.element.innerHTML===e.data?void(e.pending=!1):void g.batcher.write(function(){e.element.innerHTML=g.binder.modifyData(e,e.data),e.pending=!1})})},class:function(e){g.batcher.write(function(){var t=e.names.slice(1).join("-");e.element.classList.toggle(t,g.binder.modifyData(e,e.data)),e.pending=!1})},on:function(e){var t=g.utility.getByPath(g.methods.data,e.scope+"."+e.path);t&&(e.cache?e.element.removeEventListener(e.names[1],e.cache):e.cache=t.bind(e.container),e.element.addEventListener(e.names[1],e.cache),e.pending=!1)},css:function(e){g.batcher.read(function(){if(e.element.style.cssText===e.data)return void(e.pending=!1);var t;1<e.names.length&&(t=e.names.slice(1).join("-")+": "+t+";"),g.batcher.write(function(){e.element.style.cssText=g.binder.modifyData(e,t),e.pending=!1})})},text:function(e){var t=e.data===void 0||null===e.data?"":e.data;t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?t=JSON.stringify(t):t&&"string"!=typeof t&&(t=t+""),g.batcher.write(function(){e.element.innerText=g.binder.modifyData(e,t),e.pending=!1})},each:function(e){return e.cache||(e.cache=e.element.removeChild(e.element.firstElementChild)),e.data&&"object"===_typeof(e.data)&&e.element.children.length!==e.data.length?void g.batcher.read(function(){var t,a=e.element,n=g.binder.modifyData(e,e.data),r=n.length,o=a.children.length;g.batcher.write(function(){for(;o!==r;)o>r?(o--,a.removeChild(a.children[o])):o<r&&(t=e.cache.cloneNode(!0),g.utility.replaceEachVariable(t,e.names[1],e.path,o),a.appendChild(t),o++);e.pending=!1})}):void(e.pending=!1)},value:function(e,t){g.batcher.read(function(){var a,n,r,o,i,l,d,s=e.element.type,u=e.element.nodeName;if("view"===t){if("SELECT"===u){for(a=e.element.multiple?[]:"",d=e.element.options,(o=0,i=d.length);o<i;o++)if(l=d[o],l.selected)if(e.element.multiple)a.push(l.value||l.innerText);else{a=l.value||l.innerText;break}}else if("radio"===s){for(r="input[type=\"radio\"][o-value=\""+e.value+"\"]",d=e.container.querySelectorAll(r),(o=0,i=d.length);o<i;o++)if(l=d[o],e.element===l){a=o;break}}else if("file"===s)for(a=a||[],o=0,i=e.element.files.length;o<i;o++)a[o]=e.element.files[o];else a="checkbox"===s?e.element.checked:e.element.value;g.model.set(e.keys,a),e.pending=!1}else g.batcher.write(function(){if("SELECT"===u){for(a=void 0===e.data?e.element.multiple?[]:"":e.data,o=0,i=e.element.options.length;o<i;o++)if(!e.element.options[o].disabled)if(!e.element.options[o].selected)o!==i-1||e.element.multiple||(a=e.element.options[0].value||e.element.options[0].innerText||"");else if(e.element.multiple)a.push(e.element.options[o].value||e.element.options[o].innerText||"");else{a=e.element.options[o].value||e.element.options[o].innerText||"";break}g.model.set(e.keys,a)}else if("radio"===s){for(a=void 0===e.data?g.model.set(e.keys,0):e.data,r="input[type=\"radio\"][o-value=\""+e.value+"\"]",d=e.container.querySelectorAll(r),(o=0,i=d.length);o<i;o++)l=d[o],l.checked=o===a;d[a].checked=!0}else if("file"===s)for(a=void 0===e.data?g.model.set(e.keys,[]):e.data,o=0,i=a.length;o<i;o++)e.element.files[o]=a[o];else"checkbox"===s?(n="checked",a=void 0===e.data?g.model.set(e.keys,!1):e.data):(n="value",a=void 0===e.data?g.model.set(e.keys,""):e.data);n&&(e.element[n]=a,e.element[n]=g.binder.modifyData(e,a)),e.pending=!1})})},default:function(e){g.batcher.read(function(){e.element[e.type]===e.data||g.batcher.write(function(){e.element[e.type]=g.binder.modifyData(e,e.data)})})}},c=function(){function e(){_classCallCheck(this,e),this.data={}}return _createClass(e,[{key:"modifyData",value:function(e,t){if(!e.modifiers.length)return t;if(!g.methods.data[e.scope])return t;for(var a=0,n=e.modifiers.length;a<n;a++){var r=e.modifiers[a],o=g.methods.data[e.scope];o&&(t=o[r].call(e.container,t))}return t}},{key:"add",value:function(e){e.scope in this.data||(this.data[e.scope]={}),e.path in this.data[e.scope]||(this.data[e.scope][e.path]=[]),this.data[e.scope][e.path].push(e)}},{key:"remove",value:function(e){if(e.scope in this.data&&e.path in this.data[e.scope])for(var t,a=this.data[e.scope][e.path],n=0,r=a.length;n<r;n++)if(t=a[n],t.element===e.element)return a.splice(n,1)}},{key:"get",value:function(e){if(!(e.scope in this.data))return null;if(!(e.path in this.data[e.scope]))return null;for(var t,a=this.data[e.scope][e.path],n=0;n<a.length;n++)if(t=a[n],t.element===e.element&&t.name===e.name)return t;return null}},{key:"each",value:function(e,t,a){var n,r,o,i,l=this.data[e];if(!t)for(r in l)for(i=l[r],n=0;n<i.length;n++)o=i[n],a(o,n,i,l,r);else for(r in l)if(0===r.indexOf(t)&&(r===t||"."===r.slice(t.length).charAt(0)))for(i=l[r],n=0;n<i.length;n++)o=i[n],a(o,n,i,l,r)}},{key:"create",value:function(e){if(e=e||{},!e.name)throw new Error("render a name");if(!e.element)throw new Error("render a element");return e.container=e.container||g.utility.getScope(e.element),e.scope=e.scope||e.container.getAttribute("o-scope"),e.value=e.value||e.element.getAttribute(e.name),e.path=e.path||g.utility.binderPath(e.value),e.type=e.type||g.utility.binderType(e.name),e.names=e.names||g.utility.binderNames(e.name),e.values=e.values||g.utility.binderValues(e.value),e.modifiers=e.modifiers||g.utility.binderModifiers(e.value),e.keys=e.keys||[e.scope].concat(e.values),e.model=e.model||g.model.data[e.scope],e}},{key:"unrender",value:function(e,t){e=this.get(e),e&&(e.type in u?u[e.type](e,t):u.default(e),this.remove(e))}},{key:"render",value:function(e,t){e=this.create(e),e=this.get(e)||e,e.data=g.model.get(e.keys),e.exists||(e.exists=!0,this.add(e)),e.pending||(e.pending=!0,e.type in p?p[e.type](e,t):p.default(e))}}]),e}(),m=function(){function e(t){_classCallCheck(this,e),this._={},this._.token,this.scheme="Bearer",this.type="sessionStorage",Object.defineProperties(this,{token:{enumerable:!0,get:function(){return this._.token=this._.token||window[this.type].getItem("token")}},user:{enumerable:!0,get:function(){return this._.user=this._.user||JSON.parse(window[this.type].getItem("user"))}}}),this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this._.forbidden=e.forbidden||this._.forbidden,this._.unauthorized=e.unauthorized||this._.unauthorized,this._.authenticated=e.authenticated||this._.authenticated,this._.unauthenticated=e.unauthenticated||this._.unauthenticated,e.type&&(this.type=e.type+"Storage"),e.scheme&&(this.scheme=e.scheme.slice(0,1).toUpperCase()+e.scheme.slice(1))}},{key:"setToken",value:function(e){e&&("Basic"===this.scheme&&(e=this.encode(e)),this._.token=window[this.type].setItem("token",e))}},{key:"setUser",value:function(e){e&&(e=JSON.stringify(e),this._.user=window[this.type].setItem("user",e))}},{key:"removeToken",value:function(){this._.token=null,window[this.type].removeItem("token")}},{key:"removeUser",value:function(){this._.user=null,window[this.type].removeItem("user")}},{key:"authenticate",value:function(e,t){this.setToken(e),this.setUser(t),"string"==typeof this._.authenticated?g.router.route(this._.authenticated):"function"==typeof this._.authenticated&&this._.authenticated()}},{key:"unauthenticate",value:function(){this.removeToken(),this.removeUser(),"string"==typeof this._.unauthenticated?g.router.route(this._.unauthenticated):"function"==typeof this._.unauthenticated&&this._.unauthenticated()}},{key:"forbidden",value:function(e){return"string"==typeof this._.forbidden?g.router.route(this._.forbidden):"function"==typeof this._.forbidden&&this._.forbidden(e),!1}},{key:"unauthorized",value:function(e){return"string"==typeof this._.unauthorized?g.router.route(this._.unauthorized):"function"==typeof this._.unauthorized&&this._.unauthorized(e),!1}},{key:"route",value:function(e){return!1===e.auth||!!this.token||this.unauthorized(e)}},{key:"request",value:function(e){return!1===e.opt.auth||(this.token?(e.xhr.setRequestHeader("Authorization",this.scheme+" "+this.token),!0):this.unauthorized(e))}},{key:"response",value:function(e){return 401===e.statusCode?this.unauthorized(e):403!==e.statusCode||this.forbidden(e)}},{key:"encode",value:function(e){return window.btoa(e)}},{key:"decode",value:function(e){return window.atob(e)}}]),e}(),h={splice:function(){var e=arguments[0],t=arguments[1],a=2<arguments.length?arguments.length-2:0;if(!this.length||"number"!=typeof e||"number"!=typeof t)return[];0>e?(e=this.length+e,e=0<e?e:0):e=e<this.length?e:this.length,0>t?t=0:t>this.length-e&&(t=this.length-e);var n,r,o,i,l=this.$meta.length,d=2,s=arguments.length-d,u=this.slice(e,t);if(i=l-1-e,0<i)for(r=e;i--;)n=r++,o=s&&d<s?arguments[d++]:this.$meta[r],this.$meta[n]=h.create(o,this.$meta.listener,this.$meta.path+n),this.$meta.listener(this.$meta[n],this.$meta.path+n,n);if(0<a)for(;a--;)n=this.length,this.$meta[n]=h.create(arguments[d++],this.$meta.listener,this.$meta.path+n),h.defineProperty(this,n),this.$meta.listener(this.length,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(this.$meta[n],this.$meta.path+n,n);if(0<t)for(;t--;)this.$meta.length--,this.length--,n=this.length,this.$meta.listener(n,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(void 0,this.$meta.path+n,n);return u},arrayProperties:function(){var e=this;return{push:{value:function(){if(!arguments.length)return this.length;for(var t=0,a=arguments.length;t<a;t++)e.splice.call(this,this.length,0,arguments[t]);return this.length}},unshift:{value:function(){if(!arguments.length)return this.length;for(var t=0,a=arguments.length;t<a;t++)e.splice.call(this,0,0,arguments[t]);return this.length}},pop:{value:function(){return this.length?e.splice.call(this,this.length-1,1):void 0}},shift:{value:function(){return this.length?e.splice.call(this,0,1):void 0}},splice:{value:e.splice}}},objectProperties:function(){var e=this;return{$get:{value:function(e){return this[e]}},$set:{value:function(t,a){if(a!==this[t]){var n=e.create(a,this.$meta.listener,this.$meta.path+t);return this.$meta[t]=n,e.defineProperty(this,t),this.$meta.listener(n,this.$meta.path+t,t),n}}},$remove:{value:function(t){if(t in this){if(this.constructor===Array)return e.splice.call(this,t,1);var a=this[t];return delete this.$meta[t],delete this[t],this.$meta.listener(void 0,this.$meta.path+t,t),a}}}}},property:function(e){var t=this;return{enumerable:!0,configurable:!0,get:function(){return this.$meta[e]},set:function(a){a!==this.$meta[e]&&(this.$meta[e]=t.create(a,this.$meta.listener,this.$meta.path+e),this.$meta.listener(this[e],this.$meta.path+e,e,this))}}},defineProperty:function(e,t){return Object.defineProperty(e,t,this.property(t))},create:function(e,t,a){var n=this;if(!e||e.constructor!==Object&&e.constructor!==Array)return e;a=a?a+".":"";var r,o=e.constructor,i=e.constructor(),l=e.constructor();if(l.$meta={value:e.constructor()},l.$meta.value.path=a,l.$meta.value.listener=t,o===Array){for(r=0,length=e.length;r<length;r++)l.$meta.value[r]=n.create(e[r],t,a+r),l[r]=n.property(r);var d=n.arrayProperties();for(r in d)l[r]=d[r]}else for(r in e)l.$meta.value[r]=n.create(e[r],t,a+r),l[r]=n.property(r);var s=n.objectProperties();for(r in s)l[r]=s[r];return Object.defineProperties(i,l)}},y=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.GET=2,e.SET=3,e.REMOVE=4,e.ran=!1,e.data=h.create({},e.listener),e}return _inherits(t,e),_createClass(t,[{key:"traverse",value:function(e,t,a){"string"==typeof t&&(t=[t]);for(var n,r=this.data,o=t[t.length-1],d=0,i=t.length-1;d<i;d++){if(!(t[d]in r)){if(e===this.GET||e===this.REMOVE)return;e===this.SET&&r.$set(t[d],isNaN(t[d+1])?{}:[])}r=r[t[d]]}return e===this.SET?n=r.$set(o,a):e===this.GET?n=r[o]:e===this.REMOVE&&(n=r[o],r.$remove(o)),n}},{key:"get",value:function(e){return this.traverse(this.GET,e)}},{key:"remove",value:function(e){return this.traverse(this.REMOVE,e)}},{key:"set",value:function(e,t){return this.traverse(this.SET,e,t)}},{key:"listener",value:function(e,t){var a=t.split("."),n=a[0],r=void 0===e?"unrender":"render";t=a.slice(1).join("."),g.binder.each(n,t,function(e){g.binder[r](e)})}}]),t}(r),f=function(){function e(){_classCallCheck(this,e),this.data={},document.addEventListener("input",this.inputListener.bind(this),!0),document.addEventListener("change",this.changeListener.bind(this),!0),g.utility.ready(function(){this.add(document.body),this.mutationObserver=new MutationObserver(this.mutationListener.bind(this)),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0})}.bind(this))}return _createClass(e,[{key:"hasAcceptAttribute",value:function(e){for(var t,a=e.attributes,n=0,r=a.length;n<r;n++)if(t=a[n],0===t.name.indexOf("o-")||0===t.name.indexOf("data-o-"))return!0;return!1}},{key:"eachAttribute",value:function(e,t){for(var a,n=e.attributes,r=0,o=n.length;r<o;r++)(a=n[r],0===a.name.indexOf("o-")||0===a.name.indexOf("data-o-"))&&"o-auth"!==a.name&&"o-scope"!==a.name&&"o-reset"!==a.name&&"o-method"!==a.name&&"o-action"!==a.name&&"o-external"!==a.name&&"o-compiled"!==a.name&&"data-o-auth"!==a.name&&"data-o-compiled"!==a.name&&"data-o-scope"!==a.name&&"data-o-reset"!==a.name&&"data-o-method"!==a.name&&"data-o-action"!==a.name&&"data-o-external"!==a.name&&t.call(this,a)}},{key:"each",value:function(e,t,a){if("O-ROUTER"!==e.nodeName&&!e.hasAttribute("o-scope")&&!e.hasAttribute("o-setup")&&!e.hasAttribute("o-router")&&!e.hasAttribute("o-compiled")&&!e.hasAttribute("o-external")&&!e.hasAttribute("data-o-scope")&&!e.hasAttribute("data-o-setup")&&!e.hasAttribute("data-o-router")&&!e.hasAttribute("data-o-compiled")&&!e.hasAttribute("data-o-external")&&this.hasAcceptAttribute(e)){var n=g.utility.getScope(e);if(n||(n=g.utility.getScope(a)),"created"!==n.status)return;t.call(this,e,n)}if("STYLE"!==e.nodeName&"SCRIPT"!==e.nodeName&"OBJECT"!==e.nodeName&"IFRAME"!==e.nodeName)for(var r=0;r<e.children.length;r++)this.each(e.children[r],t,a)}},{key:"add",value:function(e,t){this.each(e,function(e,t){this.eachAttribute(e,function(a){g.binder.render({element:e,container:t,name:a.name,value:a.value})})},t)}},{key:"remove",value:function(e,t){this.each(e,function(e,t){this.eachAttribute(e,function(a){g.binder.unrender({element:e,container:t,name:a.name,value:a.value})})},t)}},{key:"inputListener",value:function(t){"checkbox"!==t.target.type&&"radio"!==t.target.type&&"option"!==t.target.type&&"SELECT"!==t.target.nodeName&&g.binder.render({name:"o-value",element:t.target},"view")}},{key:"changeListener",value:function(t){g.binder.render({name:"o-value",element:t.target},"view")}},{key:"mutationListener",value:function(e){for(var t,a=e.length;a--;){var n=e[a].target,r=e[a].addedNodes,o=e[a].removedNodes;for(t=r.length;t--;){var i=r[t];1!==i.nodeType||i.inRouterCache||(i.isRouterComponent&&(i.inRouterCache=!0),this.add(i,n))}for(t=o.length;t--;){var l=o[t];1!==l.nodeType||l.inRouterCache||(l.isRouterComponent&&(l.inRouterCache=!0),this.remove(l,n))}}}}]),e}(),g={compiled:!1};Object.defineProperties(g,{window:{enumerable:!0,get:function(){return window}},document:{enumerable:!0,get:function(){return window.document}},body:{enumerable:!0,get:function(){return window.document.body}},head:{enumerable:!0,get:function(){return window.document.head}},location:{enumerable:!0,get:function(){return this.router.location}},currentScript:{enumerable:!0,get:function(){return window.document._currentScript||window.document.currentScript}},ownerDocument:{enumerable:!0,get:function(){return(window.document._currentScript||window.document.currentScript).ownerDocument}},global:{enumerable:!0,value:{}},methods:{enumerable:!0,value:{data:{}}},utility:{enumerable:!0,value:n},setup:{enumerable:!0,value:function(e){this._setup||(this._setup=!0,e=e||{},e.listener&&e.listener.before&&e.listener.before(),e.general&&this.general.setup(e.general),e.keeper&&this.keeper.setup(e.keeper),e.fetcher&&this.fetcher.setup(e.fetcher),e.loader&&this.loader.setup(e.loader),e.component&&this.component.setup(e.component),e.router&&this.router.setup(e.router),e.listener&&e.listener.after&&e.listener.after())}}}),Object.defineProperty(g,"general",{enumerable:!0,value:new a}),Object.defineProperty(g,"batcher",{enumerable:!0,value:new o}),Object.defineProperty(g,"loader",{enumerable:!0,value:new s}),Object.defineProperty(g,"binder",{enumerable:!0,value:new c}),Object.defineProperty(g,"fetcher",{enumerable:!0,value:new i}),Object.defineProperty(g,"keeper",{enumerable:!0,value:new m}),Object.defineProperty(g,"component",{enumerable:!0,value:new e}),Object.defineProperty(g,"router",{enumerable:!0,value:new l}),Object.defineProperty(g,"model",{enumerable:!0,value:new y}),Object.defineProperty(g,"view",{enumerable:!0,value:new f}),document.addEventListener("reset",function(t){var e=t.target,a=e.getAttribute("o-submit")||e.getAttribute("data-o-submit");if(a)for(var n=e.querySelectorAll("[o-value]"),r=n.length;r--;)g.binder.unrender({name:"o-value",element:n[r]},"view")},!0),document.addEventListener("submit",function(t){var e=t.target,a=e.getAttribute("o-submit")||e.getAttribute("data-o-submit");if(a){t.preventDefault();var n=g.utility.getScope(e),r=n.getAttribute("o-scope")||n.getAttribute("data-o-scope"),o=g.model.data[r],i=g.utility.formData(e,o),l=g.utility.getByPath(n.methods,a),d=l.call(n,i,t);if(d&&"object"===("undefined"==typeof d?"undefined":_typeof(d))){var s=e.getAttribute("o-auth")||e.getAttribute("data-o-auth"),u=e.getAttribute("o-action")||e.getAttribute("data-o-action"),l=e.getAttribute("o-method")||e.getAttribute("data-o-method"),p=e.getAttribute("o-enctype")||e.getAttribute("data-o-enctype");d.url=d.url||u,d.method=d.method||l,d.auth=void 0===d.auth||null===d.auth?s:d.auth,d.contentType=void 0===d.contentType||null===d.contentType?p:d.contentType,g.fetcher.fetch(d)}(d&&"object"===("undefined"==typeof d?"undefined":_typeof(d))&&d.reset||e.hasAttribute("o-reset"))&&e.reset()}},!0);var b=document.createElement("style"),v=document.createTextNode("o-router, o-router > :first-child { display: block; }");b.setAttribute("type","text/css"),b.appendChild(v),document.head.appendChild(b);var k=function(){var e=document.querySelector("script[o-setup]");if(e){var t=e.getAttribute("o-setup").split(/\s*,\s*/),a=document.querySelector("meta[name=\"oxe\"]");a&&a.hasAttribute("compiled")&&(t[1]="null",t[2]="script",g.compiled=!0,g.router.compiled=!0,g.component.compiled=!0),g.loader.load({url:t[0],method:t[2],transformer:t[1]})}document.registerElement("o-router",{prototype:Object.create(HTMLElement.prototype)})};if("registerElement"in document&&"content"in document.createElement("template"))k();else{var x=document.createElement("script");x.setAttribute("type","text/javascript"),x.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/document-register-element/1.7.2/document-register-element.js"),x.addEventListener("load",function(){k(),this.removeEventListener("load",k)},!0),document.head.appendChild(x)}return g});