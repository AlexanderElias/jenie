/*
			name: jenie
		version: 1.4.8
		license: mpl-2.0
		author: alexander elias

		This Source Code Form is subject to the terms of the Mozilla Public
		License, v. 2.0. If a copy of the MPL was not distributed with this
		file, You can obtain one at http://mozilla.org/MPL/2.0/.
	*/
(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?module.exports=b():'function'==typeof define&&define.amd?define('Jenie',b):a.Jenie=b()})(this,function(){'use strict';function a(D,E,F){return b(D,E,F,!0),D}function b(D,E,F,G){for(var H in F=F?F+'.':'',D)c(D,H,D[H],E,F,G);D.constructor===Object?d(D,E,F):D.constructor===Array&&g(D,E,F)}function c(D,E,F,G,H,I){var J=Object.getOwnPropertyDescriptor(D,E);if(!(J&&!1===J.configurable)){var K=J&&J.get,L=J&&J.set;return F&&'object'==typeof F&&b(F,G,H+E,I),K&&L&&!1===I?L.call(D,F):void Object.defineProperty(D,E,{enumerable:!0,configurable:!0,get:function(){return K?K.call(D):F},set:function(M){var N=K?K.call(D):F;M===N||(L?L.call(D,M):F=M,M&&'object'==typeof M&&b(M,G,H+E,I),G&&G(M,H+E,E,D))}})}}function d(D,E,F){Object.defineProperties(D,{$set:{configurable:!0,value:function(G,H){if('string'==typeof G&&void 0!==H){c(D,G,H,E,F),!(G in D)&&E&&E(D[G],F+G,G,D)}}},$remove:{configurable:!0,value:function(G){'string'!=typeof G||(delete D[G],E&&E(void 0,F+G,G,D))}}})}function g(D,E,F){Object.defineProperties(D,{push:{configurable:!0,value:function(){if(!arguments.length||!D.length)return D.length;var G=0,H=arguments.length;for(G;G<H;G++)c(D,D.length,arguments[G],E,F),E&&(E(D.length,F+'length','length',D),E(D[D.length-1],F+(D.length-1),D.length-1,D));return D.length}},unshift:{configurable:!0,value:function(){if(!arguments.length||!D.length)return D.length;var G,H,I=[];for(G=0,H=arguments.length;G<H;G++)I.push(arguments[G]);for(G=0,H=D.length;G<H;G++)I.push(D[G]);for(G=0,H=D.length;G<H;G++)D[G]=I[G];for(G,H=I.length;G<H;G++)c(D,D.length,I[G],E,F),E&&(E(D.length,F+'length','length',D),E(D[D.length-1],F+(D.length-1),D.length-1,D));return D.length}},pop:{configurable:!0,value:function(){if(D.length){var G=D[D.length-1];return D.length--,E&&(E(D.length,F+'length','length',D),E(void 0,F+D.length,D.length,D)),G}}},shift:{configurable:!0,value:function(){if(D.length){var G=0,H=D.length-1,I=D[0];for(G;G<H;G++)D[G]=D[G+1];return D.length--,E&&(E(D.length,F+'length','length',D),E(void 0,F+D.length,D.length,D)),I}}},splice:{configurable:!0,value:function(G,H){if(!D.length||'number'!=typeof G&&'number'!=typeof H)return[];'number'!=typeof G&&(G=0),'number'!=typeof H&&(H=D.length);var K,L,M,I=[],J=[];for(0>G?(G=D.length+G,G=0<G?G:0):G=G<D.length?G:D.length,0>H?H=0:H>D.length-G&&(H=D.length-G),L=0;L<G;L++)J[L]=D[L];for(L=2,M=arguments.length;L<M;L++)J.push(arguments[L]);for(L=G,M=G+H;L<M;L++)I.push(D[L]);for(L=G+H,M=D.length;L<M;L++)J.push(D[L]);for(K=0,L=J.length-D.length,L=J.length-(0>L?0:L);L--;)D[K]=J[K],K++;if(L=J.length-D.length,0<L)for(;L--;)c(D,D.length,J[K++],E,F),E&&(E(D.length,F+'length','length',D),E(D[D.length-1],F+(D.length-1),D.length-1,D));else if(0>L)for(;L++;)D.length--,E&&(E(D.length,F+'length','length',D),E(void 0,F+D.length,D.length,D));return I}}})}function h(){}function j(D){Object.defineProperty(this,'data',{value:D||[]})}function k(D){this.controller=D.controller,this.view=D.controller.view,this.model=D.controller.model,this.events=D.controller.events,this.element=D.element,this.attribute=D.attribute,this.renderMethod=this.renderMethods[this.attribute.cmds[0]]||this.renderMethods['default'],this.unrenderMethod=this.unrenderMethods[this.attribute.cmds[0]]||this.unrenderMethods['default'],this.modifiers=this.attribute.modifiers.map(function(E){return this.controller.modifiers[E]},this),this.paths=this.attribute.path.split('.'),this.key=this.paths.slice(-1)[0],this.path=this.paths.slice(0,-1).join('.'),this.data=this.path?u.getByPath(this.controller.model.data,this.path):this.controller.model.data,this.render()}function m(D){this.controller=D.controller,this.data=new j}function n(D,E){var F=this;F.view=new m({controller:F}),F.model=new h({controller:F}),F.events=D.events||{},F.element=D.view.shadowRoot||D.view,F.name=D.name,F.modifiers=D.modifiers||{},F.model.setListener(function(G,H){G===void 0?F.view.unrenderAll('^'+H+'.*'):F.view.renderAll('^'+H)}),F.inputHandler=function(G){if(G.hasAttribute('j-value')){var H=u.attribute('j-value',G.getAttribute('j-value'));F.view.data.get(H.path).find(function(I){return I.element===G}).updateModel()}},F.element.addEventListener('change',function(G){('checkbox'===G.target.type||'radio'===G.target.type)&&'SELECT'!==G.target.nodeName&&F.inputHandler(G.target)},!0),F.element.addEventListener('input',function(G){F.inputHandler(G.target)},!0),'function'==typeof D.model?D.model.call(F,function(G){F.model.setData(G||{}),F.view.setElement(F.element),F.model.run(),F.view.run(),E&&E.call(F)}):(F.model.setData(D.model||{}),F.view.setElement(F.element),F.model.run(),F.view.run(),E&&E.call(F))}function o(D){var E=this;if(D=D||{},!D.name)throw new Error('Component missing options.name');if(!D.template)throw new Error('Component missing options.template');E.name=D.name,E.model=D.model,E.style=D.style,E.events=D.events,E.modifiers=D.modifiers,E.currentScript=document._currentScript||document.currentScript,E.template=E.toTemplate(D.template),E.proto=Object.create(HTMLElement.prototype),E.proto.attachedCallback=D.attached,E.proto.detachedCallback=D.detached,E.proto.attributeChangedCallback=D.attributed,E.proto.createdCallback=function(){E.element=this,E.element.uuid=w(),E.slotify(),E.element.appendChild(document.importNode(E.template.content,!0)),E.model?E.element.controller=new n({model:E.model,view:E.element,events:E.events,name:E.element.uuid,modifiers:E.modifiers},function(){E.element.view=this.view.data,E.element.model=this.model.data,D.created&&D.created.call(E.element)}):D.created&&D.created.call(E.element)},E.define()}function p(){this.events={}}function q(D){p.call(this),D=D||{},this.state={},this.cache={},this.location={},this.external=D.external,this.container=D.container,this.routes=D.routes||[],this.view=D.view||'j-view',this.started=!1,this.hash=D.hash!==void 0&&D.hash,this.trailing=D.trailing!==void 0&&D.trailing,this.eBase=document.head.querySelector('base')}function s(D){D=D||{},this.modules={},D.modules&&D.modules.forEach(function(E){this.export.call(this,E.name,E.dependencies||E.method,E.dependencies?E.method:null)},this)}function t(D){D=D||{},this.request=D.request,this.response=D.response}var u={PATH:/\s?\|(.*?)$/,PREFIX:/(data-)?j-/,MODIFIERS:/^(.*?)\|\s?/,setByPath:function(D,E,F){for(var J,G=E.split('.'),H=G.length-1,I=0;I<H;I++)J=G[I],void 0===D[J]&&(D[J]={}),D=D[J];return D[G[H]]=F},getByPath:function(D,E){for(var F=E.split('.'),G=F.length-1,H=0;H<G;H++){if(!D[F[H]])return;D=D[F[H]]}return D[F[G]]},toCamelCase:function(D){return'Array'===D.constructor.name&&(D=D.join('-')),D.replace(/-[a-z]/g,function(E){return E[1].toUpperCase()})},attribute:function(D,E){var F={};return F.name=D,F.value=E,F.path=F.value.replace(this.PATH,''),F.opts=F.path.split('.'),F.command=F.name.replace(this.PREFIX,''),F.cmds=F.command.split('-'),F.key=F.opts.slice(-1),F.vpath='each'===F.cmds[0]?F.path+'.length':F.path,F.modifiers=-1===F.value.indexOf('|')?[]:F.value.replace(this.MODIFIERS,'').split(' '),F},each:function(D,E,F){E=E.bind(F);for(var G=0,H=D.length;G<H;G++)E(D[G],G,D);return D}};h.prototype.setListener=function(D){this.listener=D},h.prototype.setData=function(D){this.data=D},h.prototype.run=function(){a(this.data,this.listener)},j.prototype.find=function(D){for(var E=0;E<this.data.length;E++)if(!0===D(this.data[E][1],this.data[E][0],E))return this.data[E][1]},j.prototype.get=function(D){for(var E=0;E<this.data.length;E++)if(D===this.data[E][0])return this.data[E][1]},j.prototype.remove=function(D){for(var E=0;E<this.data.length;E++)if(D===this.data[E][0])return this.data.splice(E,1)[0][1]},j.prototype.removeById=function(D){return this.data.splice(D,1)},j.prototype.has=function(D){for(var E=0;E<this.data.length;E++)if(D===this.data[E][0])return!0;return!1},j.prototype.set=function(D,E){for(var F=0;F<this.data.length;F++)if(D===this.data[F][0])return this.data[F][1]=E;return this.data[this.data.length]=[D,E]},j.prototype.push=function(D){return arguments.length?(this.data[this.data.length]=[this.data.length,D],this.data.length):this.length},j.prototype.size=function(){return this.data.length},j.prototype.forEach=function(D,E){D=D.bind(E);for(var F=0;F<this.data.length;F++)D(this.data[F][1],this.data[F][0],F,this.data)},k.prototype.setModel=function(D){if(this.data){if(void 0!==D)for(var E=0,F=this.modifiers.length;E<F;E++)D=this.modifiers[E].call(D);return this.data[this.key]=D}},k.prototype.getModel=function(){if(this.data){var D=this.data[this.key];if(void 0!==D)for(var E=0,F=this.modifiers.length;E<F;E++)D=this.modifiers[E].call(D);return D}},k.prototype.updateModel=function(){'checkbox'===this.element.type&&this.setModel(this.element.value=this.element.checked),'SELECT'===this.element.nodeName&&this.element.multiple?this.setModel(Array.prototype.filter.call(this.element.options,function(D){return D.selected}).map(function(D){return D.value})):'radio'===this.element.type?Array.prototype.forEach.call(this.element.parentNode.querySelectorAll('input[type="radio"][type="radio"][j-value="'+this.attribute.value+'"]'),function(D,E){D===this.element?this.setModel(E):D.checked=!1},this):this.setModel(this.element.value)},k.prototype.renderMethods={on:function(){this.eventName||(this.eventName=this.attribute.cmds[1],this.eventMethod=u.getByPath(this.events,this.attribute.path).bind(this.getModel())),this.element.removeEventListener(this.eventName,this.eventMethod),this.element.addEventListener(this.eventName,this.eventMethod)},each:function(){var D=this,E=D.getModel();D.clone||(D.variable=D.attribute.cmds.slice(1).join('.'),D.clone=D.element.removeChild(D.element.children[0]).outerHTML,D.pattern=new RegExp('(((data-)?j(-(\\w)+)+="))'+D.variable+'(((\\.(\\w)+)+)?((\\s+)?\\|((\\s+)?(\\w)+)+)?(\\s+)?")','g')),D.element.children.length>E.length?D.element.removeChild(D.element.children[D.element.children.length-1]):D.element.children.length<E.length&&D.element.insertAdjacentHTML('beforeend',D.clone.replace(D.pattern,'$1'+D.attribute.path+'.'+D.element.children.length+'$6'))},value:function(){if(!this.isSetup){var D=this.getModel();'checkbox'===this.element.type&&this.element.checked!==D&&(this.element.value=this.element.checked=D),'SELECT'===this.element.nodeName&&this.element.multiple?this.element.options.length!==D.length&&Array.prototype.forEach.call(this.element.options,function(E,F){E.value===D[F]&&E.selected},this):'radio'===this.element.type?Array.prototype.forEach.call(this.element.parentNode.querySelectorAll('input[type="radio"][type="radio"][j-value="'+this.attribute.value+'"]'),function(E,F){E.checked=F===D},this):this.element.value=D,this.isSetup=!0}},html:function(){this.element.innerHTML=this.getModel(),this.view.addAll(this.element.querySelectorAll('*'))},css:function(){var D=this.getModel();1<this.attribute.cmds.length&&(D=this.attribute.cmds.slice(1).join('-')+': '+D+';'),this.element.style.cssText+=D},class:function(){var D=this.attribute.cmds.slice(1).join('-');this.element.classList.toggle(D,this.getModel())},text:function(){this.element.innerText=this.getModel()},enable:function(){this.element.disabled=!this.getModel()},disable:function(){this.element.disabled=this.getModel()},show:function(){this.element.hidden=!this.getModel()},hide:function(){this.element.hidden=this.getModel()},write:function(){this.element.readOnly=!this.getModel()},read:function(){this.element.readOnly=this.getModel()},selected:function(){this.element.selectedIndex=this.getModel()},default:function(){var D=u.toCamelCase(this.attribute.cmds);u.setByPath(this.element,D,this.getModel())}},k.prototype.unrenderMethods={on:function(){var D=this.attribute.cmds[1];this.element.removeEventListener(D,this.getModel(),!1)},each:function(){for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild)},html:function(){this.element.innerText=''},text:function(){this.element.innerText=''},default:function(){}},k.prototype.unrender=function(){return this.unrenderMethod(),this},k.prototype.render=function(){return this.renderMethod(),this},m.prototype.ELEMENT_ACCEPTS=/(data-)?j-/,m.prototype.ATTRIBUTE_ACCEPTS=/(data-)?j-/,m.prototype.ELEMENT_REJECTS=/^iframe/,m.prototype.ELEMENT_REJECTS_CHILDREN=/^\w+(-\w+)+|^object|^script|^style|^svg/,m.prototype.preview=function(D){var E=D.outerHTML;return E=E.slice(1,E.indexOf('>')),E=E.replace(/\/$/,''),E},m.prototype.eachElement=function(D,E){var F,G,H;for(H=0;H<D.length;H++)F=D[H],G=this.preview(F),this.ELEMENT_REJECTS.test(G)?H+=F.getElementsByTagName('*').length:this.ELEMENT_REJECTS_CHILDREN.test(G)?(H+=F.getElementsByTagName('*').length,E.call(this,F)):this.ELEMENT_ACCEPTS.test(G)&&E.call(this,F)},m.prototype.eachAttribute=function(D,E){var F,G=0,H=D.attributes.length;for(G;G<H;G++)F=D.attributes[G],this.ATTRIBUTE_ACCEPTS.test(F.name)&&E.call(this,u.attribute(F.name,F.value))},m.prototype.unrenderAll=function(D){D='string'==typeof D?new RegExp(D):D,this.data.forEach(function(E,F){D.test(F)&&E.forEach(function(G){G.unrender()},this)},this)},m.prototype.renderAll=function(D){D='string'==typeof D?new RegExp(D):D,this.data.forEach(function(E,F){D.test(F)&&E.forEach(function(G){G.render()},this)},this)},m.prototype.removeOne=function(D){this.data.forEach(function(E,F,G){E.forEach(function(H,I,J){D===H.element&&(E.removeById(J),0===E.size()&&this.data.removeById(G))},this)},this)},m.prototype.removeAll=function(D){var E=0,F=D.length;for(E;E<F;E++)this.removeOne(D[E])},m.prototype.addOne=function(D){var E=this;E.eachAttribute(D,function(F){E.data.has(F.vpath)||E.data.set(F.vpath,new j),E.data.get(F.vpath).push(new k({element:D,attribute:F,controller:E.controller}))})},m.prototype.addAll=function(D){var E=this;E.eachElement(D,function(F){E.addOne(F)})},m.prototype.setListener=function(D){this.listener=D},m.prototype.setElement=function(D){this.element=D,this.elements=D.getElementsByTagName('*')},m.prototype.run=function(){var D=this;D.addAll(D.elements),D.observer=new MutationObserver(function(E){E.forEach(function(F){0<F.addedNodes.length&&F.addedNodes.forEach(function(G){1===G.nodeType&&(D.addAll(G.getElementsByTagName('*')),D.addOne(G))})})}),D.observer.observe(D.element,{childList:!0,subtree:!0})};var v='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split(''),w=function(D){var F,E=[];if(D)for(F=0;F<D;F++)E[F]=v[0|Math.random()*D];else{var G;for(E[8]='-',E[13]='-',E[14]='4',E[18]='-',E[23]='-',F=0;36>F;F++)E[F]||(G=0|16*Math.random(),E[F]=v[19==F?8|3&G:G])}return E.join('')};o.prototype.slotify=function(){for(var D=this,E=D.element.querySelectorAll('[slot]'),F=0,G=E.length;F<G;F++){var H=E[F],I=H.getAttribute('slot'),J=D.template.content.querySelector('slot[name='+I+']');J.parentNode.replaceChild(H,J)}},o.prototype.toDom=function(D){var E=document.createElement('template');return E.innerHTML=D,E},o.prototype.toTemplate=function(D){return'String'===D.constructor.name&&(/<|>/.test(D)?D=this.toDom(D):D=this.currentScript.ownerDocument.querySelector(D)),D},o.prototype.define=function(){document.registerElement(this.name,{prototype:this.proto})},p.prototype.on=function(D,E){'object'!=typeof this.events[D]&&(this.events[D]=[]),this.events[D].push(E)},p.prototype.off=function(D,E){if('object'==typeof this.events[D]){var F=this.events[D].indexOf(E);-1<F&&this.events[D].splice(F,1)}},p.prototype.once=function(D,E){this.on(D,function F(){this.off(D,F),E.apply(this,arguments)})},p.prototype.emit=function(D){if('object'==typeof this.events[D])for(var E=this.events[D].slice(),F=[].slice.call(arguments,1),G=0,H=E.length;G<H;G++)E[G].apply(this,F)},q.prototype=Object.create(p.prototype),q.prototype.constructor=q,q.prototype.popstate=function(D){this.navigate(D.state||window.location.href,!0)},q.prototype.click=function(D){var E=this;if(!(D.metaKey||D.ctrlKey||D.shiftKey)){for(var F=D.path?D.path[0]:D.target;F&&'A'!==F.nodeName;)F=F.parentNode;!F||'A'!==F.nodeName||E.external&&('Function'===E.external.constructor.name&&E.external(F.href)||'RegExp'===E.external.constructor.name&&E.external.test(F.href)||'String'===E.external.constructor.name&&E.external===F.href)||F.hasAttribute('download')||F.hasAttribute('external')||F.hasAttribute('target')||-1!==F.href.indexOf('mailto:')||-1!==F.href.indexOf('file:')||-1!==F.href.indexOf('tel:')||-1!==F.href.indexOf('ftp:')||(D.preventDefault(),E.navigate(F.href))}},q.prototype.start=function(){this.started||(this.view=document.querySelector(this.view),(this.container||window).addEventListener('click',this.click.bind(this)),window.addEventListener('popstate',this.popstate.bind(this)),this.navigate(window.location.href,!0))},q.prototype.scroll=function(D,E){window.scroll(D,E)},q.prototype.appendComponentElement=function(D,E){var F;if(/\.html$/.test(D))F=document.createElement('link'),F.setAttribute('href',D),F.setAttribute('rel','import');else if(/\.js$/.test(D))F=document.createElement('script'),F.setAttribute('src',D),F.setAttribute('type','text/javascript');else throw new Error('Invalid extension type');F.onload=E,F.setAttribute('async',''),document.head.appendChild(F)},q.prototype.render=function(D,E){var F=this;D.title&&(document.title=D.title);var G=function(){if(F.view.firstChild&&F.view.removeChild(F.view.firstChild),F.cache[D.component]||(F.cache[D.component]=document.createElement(D.component)),F.view.appendChild(F.cache[D.component]),E)return E.call(F)};D.componentUrl&&!F.cache[D.component]?F.appendComponentElement(D.componentUrl,G):G()},q.prototype.joinPath=function(){return Array.prototype.join.call(arguments,'/').replace(/\/{2,}/g,'/').replace(/^(http(s)?:\/)/,'$1/')},q.prototype.testPath=function(D,E){return new RegExp('^'+D.replace(/{\*}/g,'(?:.*)').replace(/{(\w+)}/g,'([^/]+)')+'(/)?$').test(E)},q.prototype.redirect=function(D){window.location.href=D},q.prototype.add=function(D){'Object'===D.constructor.name?this.routes.push(D):'Array'===D.constructor.name&&(this.routes=this.routes.concat(D))},q.prototype.remove=function(D){for(var E=0,F=this.routes.length;E<F;E++)D===this.routes[E].path&&this.routes.splice(E,1)},q.prototype.get=function(D){for(var G,E=0,F=this.routes.length;E<F;E++)if(G=this.routes[E],D===G.path)return G},q.prototype.getRoute=function(D){for(var G,E=0,F=this.routes.length;E<F;E++)if(G=this.routes[E],this.testPath(G.path,D))return G},q.prototype.toParameterObject=function(D,E){var F,G={},H=/{|}/g,I=/{(\w+)}/,J=E.split('/'),K=D.split('/');return K.forEach(function(L,M){I.test(L)&&(F=L.replace(H,''),G[F]=J[M])}),G},q.prototype.toQueryString=function(D){var E='?';return Object.keys(D).forEach(function(F){E+=F+'='+D[F]+'&'}),E.slice(-1)},q.prototype.toQueryObject=function(D){var E={};return D&&D.slice(1).split('&').forEach(function(F){F=F.split('='),E[F[0]]=F[1]}),E},q.prototype.getLocation=function(D){var E={};E.pathname=decodeURI(D),E.origin=window.location.origin,E.base=this.eBase?this.eBase.href:window.location.origin+'/',0===E.pathname.indexOf(E.base)&&(E.pathname=E.pathname.slice(E.base.length)),0===E.pathname.indexOf(E.origin)&&(E.pathname=E.pathname.slice(E.origin.length)),0===E.pathname.indexOf('/#/')&&(E.pathname=E.pathname.slice(2)),0===E.pathname.indexOf('#/')&&(E.pathname=E.pathname.slice(1));var F=this.hash?E.pathname.indexOf('#',E.pathname.indexOf('#')):E.pathname.indexOf('#');-1===F?E.hash='':(E.hash=E.pathname.slice(F),E.pathname=E.pathname.slice(0,F));var G=E.pathname.indexOf('?');return-1===G?E.search='':(E.search=E.pathname.slice(G),E.pathname=E.pathname.slice(0,G)),E.pathname=this.trailing?this.join(E.pathname,'/'):E.pathname.replace(/\/$/,''),'/'!==E.pathname.charAt(0)&&(E.pathname='/'+E.pathname),E.href=this.hash?this.joinPath(E.base,'/#/',E.pathname):this.joinPath(E.base,'/',E.pathname),E.href+=E.search,E.href+=E.hash,E},q.prototype.navigate=function(D,E){'string'==typeof D?(this.state.location=this.getLocation(D),this.state.route=this.getRoute(this.state.location.pathname)||{},this.state.query=this.toQueryObject(this.state.location.search)||{},this.state.parameters=this.toParameterObject(this.state.route.path,this.state.location.pathname)||{},this.state.title=this.state.route.title||'',this.location=this.state.location):this.state=D,window.history[E?'replaceState':'pushState'](this.state,this.state.title,this.state.location.href),this.state.route.redirect?this.redirect(this.state.route.redirect):this.render(this.state.route,function(){E||this.scroll(0,0),this.emit('navigated')})},s.prototype.load=function(D){D.forEach(function(E){var F=document.createElement('script');F.src=E,F.async=!1,F.type='text/javascript',document.head.appendChild(F)})},s.prototype.import=function(D){if(D in this.modules)return'function'==typeof this.modules[D]?this.modules[D]():this.modules[D];throw new Error('module '+D+' is not defined')},s.prototype.export=function(D,E,F){if(D in this.modules)throw new Error('module '+D+' is defined');else return'function'==typeof E&&(F=E,E=[]),'function'==typeof F&&E.forEach(function(G){F=F.bind(null,this.import(G))},this),this.modules[D]=F},t.prototype.mime={html:'text/html',text:'text/plain',xml:'application/xml, text/xml',json:'application/json, text/javascript',urlencoded:'application/x-www-form-urlencoded',script:'text/javascript, application/javascript, application/x-javascript'},t.prototype.serialize=function(D){var E='';return Object.keys(D).forEach(function(F){E=0<E.length?E+'&':E,E=E+encodeURIComponent(F)+'='+encodeURIComponent(D[F])}),E},t.prototype.fetch=function(D){var F,G,H,E=this;if(D=D?D:{},D.action=D.action?D.action:window.location.href,D.method=D.method?D.method.toUpperCase():'GET',D.headers=D.headers?D.headers:{},D.data)if('GET'===D.method)D.action=D.action+'?'+E.serialize(D.data),D.data=null;else{switch(D.requestType=D.requestType?D.requestType.toLowerCase():'',D.responseType=D.responseType?D.responseType.toLowerCase():'',D.requestType){case'script':D.contentType=E.mime.script;break;case'json':D.contentType=E.self.mime.json;break;case'xml':D.contentType=E.mime.xm;break;case'html':D.contentType=E.mime.html;break;case'text':D.contentType=E.mime.text;break;default:D.contentType=E.mime.urlencoded;}switch(D.responseType){case'script':D.accept=E.mime.script;break;case'json':D.accept=E.mime.json;break;case'xml':D.accept=E.mime.xml;break;case'html':D.accept=E.mime.html;break;case'text':D.accept=E.mime.text;}D.contentType===E.mime.json&&(D.data=JSON.stringify(D.data)),D.contentType===E.mime.urlencoded&&(D.data=E.serialize(D.data))}F=new XMLHttpRequest,'function'==typeof E.request&&(G=E.request(D,F)),(void 0===G||!0===G)&&(F.open(D.method,D.action,!0,D.username,D.password),D.mimeType&&F.overrideMimeType(D.mimeType),D.withCredentials&&(F.withCredentials=D.withCredentials),D.accept&&(D.headers.Accept=D.accept),D.contentType&&(D.headers['Content-Type']=D.contentType),D.headers&&Object.keys(D.headers).forEach(function(I){F.setRequestHeader(I,D.headers[I])}),F.onreadystatechange=function(){if(4===F.readyState&&('function'==typeof E.response&&(H=E.response(D,F)),void 0===H||!0===H))return 200<=F.status&&400>F.status?D.success(F):D.error(F)},F.send(D.data))};var A=document.createElement('style'),B=document.createTextNode('j-view, j-view > :first-child { display: block; }');A.appendChild(B),document.head.appendChild(A),document.registerElement('j-view',{prototype:Object.create(HTMLElement.prototype)});var C={http:new t,module:new s,router:new q,setup:function(D){D=('function'==typeof D?D.call(this):D)||{},D.http&&(this.http=new t(D.http)),D.module&&(this.module=new s(D.module)),D.router&&(this.router=new q(D.router)),this.router.start()},component:function(D){return new o(D)},controller:function(D,E){return new n(D,E)},script:function(){return document._currentScript||document.currentScript},document:function(){return(document._currentScript||document.currentScript).ownerDocument},element:function(D){return(document._currentScript||document.currentScript).ownerDocument.createElement(D)},query:function(D){return(document._currentScript||document.currentScript).ownerDocument.querySelector(D)},comments:function(D){for(var F,E=[],G=new RegExp('^'+D),H=document.createNodeIterator((document._currentScript||document.currentScript).ownerDocument,NodeFilter.SHOW_COMMENT,NodeFilter.FILTER_ACCEPT);F=H.nextNode();)if(!D)E.push(F.nodeValue);else if(G.test(F.nodeValue))return F.nodeValue.replace(D,'');return E},escape:function(D){return D.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;')}};return C});