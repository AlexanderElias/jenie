/*
			name: jenie
		version: 1.1.4
		author: alexander elias
	*/
(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?module.exports=b():'function'==typeof define&&define.amd?define('Jenie',b):a.Jenie=b()})(this,function(){'use strict';function a(){}function b(M){Object.defineProperty(this,'data',{value:M||[]})}function c(){this.data=new n}function d(){}function g(M){if(!M)throw new Error('Component missing options');if(!M.name)throw new Error('Component missing options.name');if(!M.template)throw new Error('Component missing options.template');var N=this;N.name=M.name,N.model=M.model,N.modifiers=M.modifiers,N.currentScript=document._currentScript||document.currentScript,N.template=N._template(M.template),N.created=M.created?M.created.bind(N):void 0,N.attached=M.attached?M.attached.bind(N):void 0,N.detached=M.detached?M.detached.bind(N):void 0,N.attributed=M.attributed?M.attributed.bind(N):void 0,N.proto=N._define(N.name,{attachedCallback:{value:N.attached},detachedCallback:{value:N.detached},attributeChangedCallback:{value:N.attributed},createdCallback:{value:function(){N.element=this,N.uuid=A(),N.element.appendChild(document.importNode(N.template.content,!0)),N.model?N.binder=new z({name:N.uuid,model:N.model,view:N.element,modifiers:N.modifiers},function(){N.model=this.model.data,N.view=this.view.data,N.created&&N.created(N)}):N.created&&N.created(N)}}})}function h(M){var N=this;N.external=M.external,N.routes=M.routes||[],N.hash=null===M.hash||M.hash===void 0?!1:M.hash,N.cache={},N.state={},N.base=M.base,N.origin=window.location.origin,N.root=M.root||''+(N.hash?'/#/':'/'),window.addEventListener('DOMContentLoaded',N.loaded.bind(N),!0),window.addEventListener('popstate',N.popstate.bind(N),!0),window.addEventListener('click',N.click.bind(N),!0)}function j(){}a.prototype.join=function(){return Array.prototype.join.call(arguments,'.').replace(/\.{2,}/g,'.').replace(/^\.|\.$/g,'')},a.prototype.isCollection=function(M){return M&&('Object'===M.constructor.name||'Array'===M.constructor.name)},a.prototype.defineSplice=function(M,N,O,P){var Q=this;P[2]?(Array.prototype.splice.call(N,P[0],P[1]),Q.emit(Q.join(M),O)):Array.prototype.slice.call(P,2).forEach(function(R){R=Q.defineCollection(M,R),Array.prototype.splice.call(N,P[0],P[1],R),O=Q.defineProperty(M,N,O,N.length-1),Q.emit(Q.join(M),O)})},a.prototype.arrayPushUnshift=function(M,N,O,P,Q){var R=this;Array.prototype.forEach.call(Q,function(S){S=R.defineCollection(M,S),Array.prototype[P].call(N,S),O=R.defineProperty(M,N,O,N.length-1),R.emit(R.join(M),O)})},a.prototype.arrayPopShift=function(M,N,O,P){var Q=this;Array.prototype[P].call(N),Array.prototype.pop.call(O),Q.emit(Q.join(M),O)},a.prototype.defineArray=function(M,N,O){var P=this;return Object.defineProperties(O,{splice:{value:function(){return P.defineSplice(M,N,O,arguments)}},push:{value:function(){return P.arrayPushUnshift(M,N,O,'push',arguments)}},unshift:{value:function(){return P.arrayPushUnshift(M,N,O,'unshift',arguments)}},pop:{value:function(){return P.arrayPopShift(M,N,O,'pop')}},shift:{value:function(){return P.arrayPopShift(M,N,O,'shift')}}})},a.prototype.defineObject=function(M,N,O){var P=this;return Object.defineProperties(O,{set:{value:function(Q,R){P.isCollection(R)&&(R=P.defineCollection(P.join(M,Q),R)),N[Q]=R,O=P.defineProperty(M,N,O,Q),P.emit(P.join(M,Q),O[Q])}},remove:{value:function(Q){delete O[Q],delete N[Q],P.emit(P.join(M,Q),void 0)}}})},a.prototype.defineProperty=function(M,N,O,P){var Q=this;return Object.defineProperty(O,P,{enumerable:!0,configurable:!0,get:function(){return N[P]},set:function(R){N[P]!==R&&(R===void 0?(delete N[P],delete O[P],Q.emit(Q.join(M,P),void 0)):(N[P]=Q.defineCollection(Q.join(M,P),R),Q.emit(Q.join(M,P),O[P])))}})},a.prototype.defineCollection=function(M,N){var O=this;if(!O.isCollection(N))return N;var P=N?N.constructor.name:'',Q=N.constructor(),R=N.constructor();return'Object'===P?Q=O.defineObject(M,R,Q):'Array'===P&&(Q=O.defineArray(M,R,Q)),Object.keys(N).forEach(function(S){void 0!==N[S]&&(R[S]=O.defineCollection(O.join(M,S),N[S]),Q=O.defineProperty(M,R,Q,S))}),Q},a.prototype.set=function(M,N){for(var S,O=M.split('.'),P=O.length-1,Q=this.data,R=0;R<P;R++)S=O[R],void 0===Q[S]&&(Q[S]={}),Q=Q[S];return Q[O[P]]=N},a.prototype.get=function(M){for(var N=M.split('.'),O=N.length-1,P=this.data,Q=0;Q<O;Q++){if(!P[N[Q]])return;P=P[N[Q]]}return P[N[O]]},a.prototype.listener=function(M){this.emit=M},a.prototype.run=function(M){this.data=this.defineCollection('',M)};b.prototype.get=function(M){for(var N=0,O=this.data.length;N<O;N++)if(M===this.data[N][0])return this.data[N][1]},b.prototype.remove=function(M){for(var N=0,O=this.data.length;N<O;N++)if(M===this.data[N][0])return this.data.splice(N,1)[0][1]},b.prototype.removeById=function(M){return this.data.splice(M,1)},b.prototype.has=function(M){for(var N=0,O=this.data.length;N<O;N++)if(M===this.data[N][0])return!0;return!1},b.prototype.set=function(M,N){for(var O=0,P=this.data.length;O<P;O++)if(M===this.data[O][0])return this.data[O][1]=N;return this.data[P]=[M,N]},b.prototype.push=function(M){return this.data[this.data.length]=[this.data.length,M],M},b.prototype.size=function(){return this.data.length},b.prototype.forEach=function(M,N){N=N||null;for(var O=0,P=this.data.length;O<P;O++)M.call(N,this.data[O][1],this.data[O][0],O,this.data)};var n=b;c.prototype.regexp={PATH:/\s?\|(.*?)$/,PREFIX:/(data-)?j-/,MODIFIERS:/^(.*?)\|\s?/,ATTRIBUTE_ACCEPTS:/(data-)?j-/,ELEMENT_ACCEPTS:/(data-)?j-/,ELEMENT_REJECTS_CHILDREN:/(data-)?j-each/,ELEMENT_REJECTS:/^\w+(-\w+)+|^iframe|^object|^script/},c.prototype.preview=function(M){return M.outerHTML.replace(/\/?>([\s\S])*/,'').replace(/^</,'')},c.prototype.eachElement=function(M,N){for(var O=0;O<M.length;O++){var P=M[O],Q=this.preview(P);this.regexp.ELEMENT_REJECTS.test(Q)?O+=P.querySelectorAll('*').length:this.regexp.ELEMENT_REJECTS_CHILDREN.test(Q)?(O+=P.querySelectorAll('*').length,N.call(this,P)):this.regexp.ELEMENT_ACCEPTS.test(Q)&&N.call(this,P)}},c.prototype.eachAttribute=function(M,N){Array.prototype.forEach.call(M.attributes,function(O){if(this.regexp.ATTRIBUTE_ACCEPTS.test(O.name)){var P={};P.name=O.name,P.value=O.value,P.path=P.value.replace(this.regexp.PATH,''),P.opts=P.path.split('.'),P.command=P.name.replace(this.regexp.PREFIX,''),P.cmds=P.command.split('-'),P.key=P.opts.slice(-1),P.modifiers=-1===P.value.indexOf('|')?[]:P.value.replace(this.regexp.MODIFIERS,'').split(' '),N.call(this,P)}},this)},c.prototype.unrenderAll=function(M){M='string'==typeof M?new RegExp(M):M,this.data.forEach(function(N,O){N.forEach(function(P){M.test(O)&&P.unrender()},this)},this)},c.prototype.renderAll=function(M){M='string'==typeof M?new RegExp(M):M,this.data.forEach(function(N,O){N.forEach(function(P){M.test(O)&&P.render()},this)},this)},c.prototype.removeOne=function(M){this.data.forEach(function(N,O,P){N.forEach(function(Q,R,S){M===Q.element&&(N.removeById(S),0===N.size()&&this.data.removeById(P))},this)},this)},c.prototype.removeAll=function(M){Array.prototype.forEach.call(M,function(N){this.removeOne(N)},this)},c.prototype.addOne=function(M){var N=this;N.eachAttribute(M,function(O){N.data.has(O.path)||N.data.set(O.path,new n),N.emit(M,O)})},c.prototype.addAll=function(M){this.eachElement(M,function(N){this.addOne(N)})},c.prototype.listener=function(M){this.emit=M},c.prototype.run=function(M){this.elements=M,this.addAll(this.elements)};d.prototype.setByPath=function(M,N,O){for(var S,P=N.split('.'),Q=P.length-1,R=0;R<Q;R++)S=P[R],void 0===M[S]&&(M[S]={}),M=M[S];return M[P[Q]]=O},d.prototype.toCamelCase=function(M){return'Array'===M.constructor.name&&(M=M.join('-')),M.replace(/-[a-z]/g,function(N){return N[1].toUpperCase()})},d.prototype.renderMethods={on:function(){var M=this.attribute.cmds[1];this.element.removeEventListener(M,this.data,!1),this.element.addEventListener(M,this.data,!1)},each:function(){var N,M=this;M.clone?M.element.children.length>M.data.length?(N=function(){M.view.removeAll(M.element.lastChild.getElementsByTagName('*')),M.view.removeOne(M.element.lastChild),M.element.removeChild(M.element.lastChild),M.element.children.length>M.data.length&&window.requestAnimationFrame(N)},window.requestAnimationFrame(N)):M.element.children.length<M.data.length&&(N=function(){M.element.insertAdjacentHTML('beforeend',M.clone.replace(M.pattern,'$1'+M.attribute.path+'.'+M.element.children.length+'$6')),M.view.addOne(M.element.lastChild),M.view.addAll(M.element.lastChild.getElementsByTagName('*')),M.element.children.length<M.data.length&&window.requestAnimationFrame(N)},window.requestAnimationFrame(N)):(M.variable=M.attribute.cmds.slice(1).join('.'),M.clone=M.element.removeChild(M.element.children[0]).outerHTML,M.pattern=new RegExp('(((data-)?j(-(\\w)+)+="))'+M.variable+'(((\\.(\\w)+)+)?((\\s+)?\\|((\\s+)?(\\w)+)+)?(\\s+)?")','g'),N=function(){M.element.insertAdjacentHTML('beforeend',M.clone.replace(M.pattern,'$1'+M.attribute.path+'.'+M.element.children.length+'$6')),M.view.addOne(M.element.lastChild),M.view.addAll(M.element.lastChild.getElementsByTagName('*')),M.element.children.length<M.data.length&&window.requestAnimationFrame(N)},window.requestAnimationFrame(N))},value:function(){var M=this;return M.change?void 0:'button'===M.element.type||'reset'===M.element.type?M.change=!0:void(M.change=function(){M.data='radio'!==M.element.type&&'checked'!==M.element.type?M.element.value:M.element.checked},window.requestAnimationFrame(function(){M.element.addEventListener('change',M.change.bind(M),!0),M.element.addEventListener('keyup',M.change.bind(M),!0)}))},html:function(){var M=this;window.requestAnimationFrame(function(){M.element.innerHTML=M.data,M.view.addAll(M.element.getElementsByTagName('*'))})},css:function(){var M=this,N=this.data;window.requestAnimationFrame(function(){1<M.attribute.cmds.length&&(N=M.attribute.cmds.slice(1).join('-')+': '+N+';'),M.element.style.cssText+=N})},class:function(){var M=this,N=M.attribute.cmds.slice(1).join('-');window.requestAnimationFrame(function(){M.element.classList.toggle(N,M.data)})},text:function(){var M=this;window.requestAnimationFrame(function(){M.element.innerText=M.data})},enable:function(){var M=this;window.requestAnimationFrame(function(){M.element.disabled=!M.data})},disable:function(){var M=this;window.requestAnimationFrame(function(){M.element.disabled=M.data})},show:function(){var M=this;window.requestAnimationFrame(function(){M.element.hidden=!M.data})},hide:function(){var M=this;window.requestAnimationFrame(function(){M.element.hidden=M.data})},write:function(){var M=this;window.requestAnimationFrame(function(){M.element.readOnly=!M.data})},read:function(){var M=this;window.requestAnimationFrame(function(){M.element.readOnly=M.data})},selected:function(){var M=this;window.requestAnimationFrame(function(){M.element.selectedIndex=M.data})},default:function(){var M=this,N=this.toCamelCase(this.attribute.cmds);window.requestAnimationFrame(function(){M.setByPath(M.element,N,M.data)})}},d.prototype.unrenderMethods={on:function(){var M=this.attribute.cmds[1];this.element.removeEventListener(M,this.data,!1)},each:function(){for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild)},value:function(){this.element.removeEventListener('change',this.change.bind(this)),this.element.removeEventListener('keyup',this.change.bind(this))},html:function(){this.element.innerHTML='undefined'},text:function(){this.element.innerText='undefined'},default:function(){}},d.prototype.unrender=function(){return this.unrenderMethod(),this},d.prototype.render=function(){return this.renderMethod(),this},d.prototype.create=function(M){return this.view=M.view,this.model=M.model,this.data=M.data,this.element=M.element,this.attribute=M.attribute,this.modifiers=M.modifiers,this.renderMethod=(this.renderMethods[this.attribute.cmds[0]]||this.renderMethods['default']).bind(this),this.unrenderMethod=(this.unrenderMethods[this.attribute.cmds[0]]||this.unrenderMethods['default']).bind(this),Object.defineProperty(this,'data',{enumerable:!0,configurable:!0,get:function(){var N=this.model.get(this.attribute.path);return this.modifiers.forEach(function(O){N=O.call(N)}),N},set:function(N){return this.model.set(this.attribute.path,N)}}),this.renderMethod(),this};var t=function(M){return new d().create(M)},u=function(M,N){var O=this;if(O.view=new c,O.model=new a,O._model=M.model||{},O._view=(M.view.shadowRoot||M.view).querySelectorAll('*'),O.name=M.name,O.modifiers=M.modifiers||{},O.model.listener(function(P,Q){void 0===Q?O.view.unrenderAll('^'+P+'.*'):O.view.renderAll('^'+P)}),O.view.listener(function(P,Q){O.view.data.get(Q.path).push(t({view:O.view,model:O.model,element:P,attribute:Q,modifiers:Q.modifiers.map(function(R){return O.modifiers[R]})}))}),'function'==typeof M.model)O._model.call(O,function(P){if(O._model=P,O.model.run(O._model),O.view.run(O._view),N)return N.call(O)});else if(O.model.run(O._model),O.view.run(O._view),N)return N.call(O)},v='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split(''),z=u,A=function(){var N=[],O;N[8]=N[13]=N[18]=N[23]='-',N[14]='4';for(var P=0;36>P;P++)N[P]||(O=0|16*Math.random(),N[P]=v[19==P?8|3&O:O]);return N.join('')};g.prototype._comment=function(M){if('function'!=typeof M)throw new Error('Comment must be a function');var N=/\/\*!?(?:\@preserve)?[ \t]*(?:\r\n|\n)([\s\S]*?)(?:\r\n|\n)\s*\*\//,O=N.exec(M.toString());if(!O)throw new Error('Comment missing');return O[1]},g.prototype._dom=function(M){var N=document.createElement('div');return N.innerHTML=M,N.children[0]},g.prototype._template=function(M){return'Function'===M.constructor.name?(M=this._comment(M),M=this._dom(M)):'String'===M.constructor.name&&(/<|>/.test(M)?M=this._dom(M):M=this.currentScript.ownerDocument.querySelector(M)),M},g.prototype._define=function(M,N){return document.registerElement(M,{prototype:Object.create(HTMLElement.prototype,N)})};h.prototype.loaded=function(){var M=this,N=document.querySelector('base');N?M.base=N.href.replace(window.location.origin,''):(N=document.createElement('base'),N.href='/',document.head.appendChild(N),M.base='/'),M.view=document.querySelector('j-view')||document.querySelector('[j-view]'),M.navigate(window.location.href,!0),window.removeEventListener('DOMContentLoaded',M.loaded)},h.prototype.popstate=function(M){var N=this;N.navigate(M.state||window.location.href,!0)},h.prototype.click=function(M){var N=this;if(!(M.metaKey||M.ctrlKey||M.shiftKey)){for(var O=M.path?M.path[0]:M.target;O&&'A'!==O.nodeName;)O=O.parentNode;if(O&&'A'===O.nodeName){var P=O.getAttribute('href');if(N.external){if('Function'===N.external.constructor.name&&N.external(P))return;if('RegExp'===N.external.constructor.name&&N.external.test(P))return;if('String'===N.external.constructor.name&&new RegExp(N.external).test(P))return}O.hasAttribute('download')||O.hasAttribute('external')||-1!==P.indexOf('mailto:')||-1!==P.indexOf('tel:')||-1!==P.indexOf('file:')||-1!==P.indexOf('ftp:')||(M.preventDefault(),N.navigate(P))}}},h.prototype.normalize=function(M){return M=decodeURI(M).replace(/\/{2,}/g,'/').replace(/(http(s)?:\/)/,'$1/').replace(/\?.*/,''),M=''===M?'/':M},h.prototype.join=function(){return this.normalize(Array.prototype.join.call(arguments,'/'))},h.prototype.scroll=function(M,N){window.scroll(M,N)},h.prototype.url=function(M){var N=this,O={};return O.root=N.root,O.origin=N.origin,O.base=N.normalize(N.base),O.path=M,O.path=0===O.path.indexOf(O.origin)?O.path.replace(O.origin,''):O.path,O.path='/'===O.base?O.path:O.path.replace(O.base,''),O.path=0===O.path.indexOf(O.root)?O.path.replace(O.root,'/'):O.path,O.path=N.normalize(O.path),O.path='/'===O.path[0]?O.path:'/'+O.path,O.href=N.join(O.origin,O.base,O.root,O.path),O},h.prototype.render=function(M){var N=this,O=N.cache[M.component];M.title&&(document.title=M.title),!0===M.cache||M.cache===void 0?(O=N.cache[M.component],!O&&(O=N.cache[M.component]=document.createElement(M.component))):O=document.createElement(M.component),window.requestAnimationFrame(function(){N.view.firstChild&&N.view.removeChild(N.view.firstChild),N.view.appendChild(O)})},h.prototype.add=function(M){var N=this;'Object'===M.constructor.name?N.routes.push(M):'Array'===M.constructor.name&&(N.routes=N.routes.concat(M))},h.prototype.remove=function(M){for(var N=this,O=0,P=N.routes.length;O<P;O++)if(M===N.routes[O].path)return N.routes.splice(O,1)},h.prototype.redirect=function(M){window.location.href=M},h.prototype.get=function(M){for(var Q,N=this,O=0,P=N.routes.length;O<P;O++)if(Q=N.routes[O],!Q.path)continue;else if('String'===Q.path.constructor.name){if(Q.path===M)return Q;}else if('RegExp'===Q.path.constructor.name){if(Q.path.test(M))return Q;}else if('Function'===Q.path.constructor.name&&Q.path(M))return Q},h.prototype.navigate=function(M,N){var O=this;'string'==typeof M?(O.state.url=O.url(M),O.state.route=O.get(O.state.url.path),O.state.title=O.state.route.title):O.state=M,window.history[N?'replaceState':'pushState'](O.state,O.state.route.title,O.state.url.href),O.state.route.redirect?O.redirect(O.state.route):O.render(O.state.route),N||O.scroll(0,0)};j.prototype.mime={html:'text/html',text:'text/plain',xml:'application/xml, text/xml',json:'application/json, text/javascript',urlencoded:'application/x-www-form-urlencoded',script:'text/javascript, application/javascript, application/x-javascript'},j.prototype.serialize=function(M){var N='';for(var O in M)N=0<N.length?N+'&':N,N=N+encodeURIComponent(O)+'='+encodeURIComponent(M[O]);return N},j.prototype.fetch=function(M){var N=this;if(!M)throw new Error('fetch: requires options');if(!M.action)throw new Error('fetch: requires options.action');if(M.method||(M.method='GET'),M.headers||(M.headers={}),M.data)if('GET'===M.method)M.action=M.action+'?'+N.serialize(M.data),M.data=null;else{switch(M.requestType=M.requestType?M.requestType.toLowerCase():'',M.responseType=M.responseType?M.responseType.toLowerCase():'',M.requestType){case'script':M.contentType=N.mime.script;break;case'json':M.contentType=N.self.mime.json;break;case'xml':M.contentType=N.mime.xm;break;case'html':M.contentType=N.mime.html;break;case'text':M.contentType=N.mime.text;break;default:M.contentType=N.mime.urlencoded;}switch(M.responseType){case'script':M.accept=N.mime.script;break;case'json':M.accept=N.mime.json;break;case'xml':M.accept=N.mime.xml;break;case'html':M.accept=N.mime.html;break;case'text':M.accept=N.mime.text;}M.contentType===N.mime.json&&(M.data=JSON.stringify(M.data)),M.contentType===N.mime.urlencoded&&(M.data=N.serialize(M.data))}var O=new XMLHttpRequest;if(O.open(M.method.toUpperCase(),M.action,!0,M.username,M.password),M.mimeType&&O.overrideMimeType(M.mimeType),M.withCredentials&&(O.withCredentials=M.withCredentials),M.accept&&(M.headers.Accept=M.accept),M.contentType&&(M.headers['Content-Type']=M.contentType),M.headers)for(var P in M.headers)O.setRequestHeader(P,M.headers[P]);O.onreadystatechange=function(){if(4===O.readyState)return 200<=O.status&&400>O.status?M.success(O):M.error(O)},O.send(M.data)};var J=document.createElement('style'),K=document.createTextNode('j-view, j-view > :first-child { display: block; }');J.appendChild(K),document.head.appendChild(J),document.registerElement('j-view',{prototype:Object.create(HTMLElement.prototype)});return{module:{},modules:{},services:{},http:function(){return this.http=new j},router:function(M){return this.router=new h(M)},component:function(M){return new g(M)},binder:function(M,N){return new u(M,N)},script:function(){return document._currentScript||document.currentScript},document:function(){return(document._currentScript||document.currentScript).ownerDocument},query:function(M){return(document._currentScript||document.currentScript).ownerDocument.querySelector(M)}}});