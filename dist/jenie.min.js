/*
			name: jenie
		version: 1.0.93
		author: alexander elias
	*/
(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?module.exports=b():'function'==typeof define&&define.amd?define('Jenie',b):a.Jenie=b()})(this,function(){'use strict';function a(){}function b(){}function c(){}function d(){}function f(){}function g(){}function h(){}function j(){}var k={GET:2,SET:3,path:function(){return Array.prototype.join.call(arguments,'.').replace(/\.{2,}/g,'.').replace(/^\.|\.$/g,'')},is:function(Y,Z){return Y&&Y.constructor.name===Z},isCollection:function(Y){return null!==Y&&'object'==typeof Y},has:function(Y,Z){return-1!==Y.indexOf(Z)},normalize:function(Y){return Y=decodeURI(Y).replace(/\/{2,}/g,'/').replace(/\?.*/,'').replace(/\/$/,''),''===Y?'/':Y},getHash:function(Y){return this.normalize(Y.split('?')[0].split('#')[1]||'')},getSearch:function(Y){return this.normalize(Y.split('?')[1]||'')},getPath:function(Y,Z,$){return this.normalize(Y.replace(window.location.origin,'/').replace(Z,'/').replace($,'/'))},toCamelCase:function(Y){return'Array'===Y.constructor.name&&(Y=Y.join('-')),Y.replace(/-[a-z]/g,function(Z){return Z[1].toUpperCase()})},toDashCase:function(Y){return'Array'===Y.constructor.name&&(Y=Y.join('')),Y.replace(/[A-Z]/g,function(Z){return'-'+Z.toLowerCase()})},interact:function(Y,Z,$,aa){for(var fa,ba=$.split('.'),ca=ba.length-1,da=Z,ea=0;ea<ca;ea++){if(fa=ba[ea],null===da[fa]||void 0===da[fa]){if(Y===this.GET)return;Y===this.SET&&(da[fa]={})}da=da[fa]}if(Y===this.GET)return da[ba[ca]];return Y===this.SET?(da[ba[ca]]=aa,Z):void 0},getByPath:function(Y,Z){return this.interact(this.GET,Y,Z)},setByPath:function(Y,Z,$){return this.interact(this.SET,Y,Z,$)}};a.prototype.on=function(Y,Z){this.events[Y]||(this.events[Y]=[]),this.events[Y].push(Z)},a.prototype.off=function(Y,Z){if(this.events[Y]){var $=this.events[Y].indexOf(Z);-1<this.events[Y].indexOf(Z)&&this.events[Y].splice($,1)}},a.prototype.emit=function(Y){if(this.events[Y])for(var Z=[].slice.call(arguments,1),$=this.events[Y].slice(),aa=0,ba=$.length;aa<ba;aa++)$[aa].apply(this,Z)};var n=k;b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b.prototype.each=function(Y,Z,$){Object.keys(Y).slice($).forEach(function(aa){Z.call(this,Y[aa],aa,Y)},this)},b.prototype.every=function(Y,Z,$,aa,ba){n.isCollection(Y)&&this.each(Y,function(ca,da){this.every(ca,Z,0,!0,n.path(ba,da))},$),aa&&Z.call(this,Y,ba||'')},b.prototype.ins=function(Y,Z,$){var aa=this;Y._meta[Z]=$,aa.define($,n.path(Y._path,Z),!0),aa.defineProperty(Y,Z),this.emit('*',n.path(Y._path,Z),$),this.emit('*',n.path(Y._path),Y)},b.prototype.del=function(Y,Z){if(n.is(Y,'Object')){var $=Y[Z];delete Y._meta[Z],delete Y[Z],this.every($,function(aa,ba){ba=n.path(Y._path,Z,ba),this.emit('*',ba,void 0)}),this.emit('*',n.path(Y._path,Z),void 0)}else n.is(Y,'Array')&&(Y._meta.splice(Z,1),Y.splice(Y.length-1,1),this.every(Y,function(aa,ba){ba=n.path(Y._path,ba),n.isCollection(aa)&&(aa._path=ba),this.emit('*',ba,aa)},parseInt(Z)),this.emit('*',n.path(Y._path,Y.length),void 0),this.emit('*',n.path(Y._path),Y))},b.prototype.defineProperty=function(Y,Z){Object.defineProperty(Y,Z,{enumerable:!0,configurable:!0,get:function(){return this._meta[Z]},set:function($){$===void 0?this.del(Z):this.ins(Z,$)}})},b.prototype.define=function(Y,Z,$){if(n.isCollection(Y)){var aa=this;Object.defineProperties(Y,{_meta:{writable:!0,configurable:!0,value:Y.constructor()},_path:{writable:!0,configurable:!0,value:Z||''},ins:{value:aa.ins.bind(aa,Y)},del:{value:aa.del.bind(aa,Y)}}),Object.keys(Y).forEach(function(ba){void 0===Y[ba]||(Y._meta[ba]=Y[ba],this.define(Y[ba],n.path(Z||'',ba),$),this.defineProperty(Y,ba),$&&this.emit('*',n.path(Z||'',ba),Y[ba]))},this)}},b.prototype.get=function(Y){return n.getByPath(this.data,Y)},b.prototype.set=function(Y,Z){return n.setByPath(this.data,Y,Z)},b.prototype.setup=function(Y){return this.data=Y,this.define(this.data,null,!0),this},b.prototype.create=function(){return this.events={},this};var q=k,t={sViewElement:'j-view',sPrefix:'(data-)?j-',sValue:'(data-)?j-value',sFor:'(data-)?j-for-(.*?)=',sAccepts:'(data-)?j-',sRejects:'^w+(-w+)+|^iframe|^object|^script',rPath:/\s?\|(.*?)$/,rPrefix:/(data-)?j-/,rValue:/(data-)?j-value/,rModifier:/^(.*?)\|\s?/,rFor:/(data-)?j-for-(.*?)=/,rAccepts:/(data-)?j-/,rRejects:/^\w+(-\w+)+|^iframe|^object|^script/,rAttributeAccepts:/(data-)?j-/,rElementAccepts:/(data-)?j-/,rElementRejectsChildren:/(data-)?j-each/,rElementRejects:/^\w+(-\w+)+|^iframe|^object|^script/};c.prototype.unrender=function(){return this},c.prototype.render=function(){return this.method(),this},c.prototype.create=function(Y){return this.view=Y.view,this.element=Y.element,this.attribute=Y.attribute,this.method=Y.method.bind(this),Object.defineProperty(this,'data',{enumerable:!0,configurable:!0,get:Y.getter,set:Y.setter}),this};var v={on:function(){var Y=this.attribute.cmds[1];this.element.removeEventListener(Y,this.data,!1),this.element.addEventListener(Y,this.data,!1)},each:function(){this.length===void 0?(this.length=this.data.length,this.variable=this.attribute.cmds.slice(1).join('.'),this.clone=this.element.removeChild(this.element.children[0]).outerHTML,this.pattern=new RegExp('(((data-)?j(-(\\w)+)+="))'+this.variable+'(((\\.(\\w)+)+)?((\\s+)?\\|((\\s+)?(\\w)+)+)?(\\s+)?")','g'),this.data.forEach(function(Y,Z){this.element.insertAdjacentHTML('beforeend',this.clone.replace(this.pattern,'$1'+this.attribute.path+'.'+Z+'$6'))},this),this.view.add(this.element.getElementsByTagName('*'),!0)):this.length>this.data.length?(this.length--,this.element.removeChild(this.element.lastChild)):this.length<this.data.length&&(this.length++,this.element.insertAdjacentHTML('beforeend',this.clone.replace(this.pattern,'$1'+this.attribute.path+'.'+(this.length-1)+'$6')),this.view.addOne(this.element.lastChild,!0),this.view.add(this.element.lastChild.getElementsByTagName('*'),!0))},value:function(){this.change||(this.change=function(){this.data=this.element.value||this.element.checked},this.element.addEventListener('change',this.change.bind(this)),this.element.addEventListener('keyup',this.change.bind(this)))},html:function(){this.element.innerHTML=this.data,this.view.add(this.element.getElementsByTagName('*'),!0)},css:function(){var Y=this.data;1<this.attribute.cmds.length&&(Y=this.attribute.cmds.slice(1).join('-')+': '+Y+';'),this.element.style.cssText+=Y},class:function(){var Y=this.attribute.cmds.slice(1).join('-');this.element.classList.toggle(Y,this.data)},text:function(){this.element.innerText=this.data},enable:function(){this.element.disabled=!this.data},disable:function(){this.element.disabled=this.data},show:function(){this.element.hidden=!this.data},hide:function(){this.element.hidden=this.data},write:function(){this.element.readOnly=!this.data},read:function(){this.element.readOnly=this.data},selected:function(){this.element.selectedIndex=this.data},default:function(){var Y=q.toCamelCase(this.attribute.cmds);q.setByPath(this.element,Y,this.data)}},w=t,x=function(Y){return new c().create(Y)},y=w.rPath,z=w.rPrefix,A=w.rModifier,B=w.rAttributeAccepts,C=w.rElementAccepts,D=w.rElementRejects,E=w.rElementRejectsChildren;d.prototype.glance=function(Y){return Y.outerHTML.replace(/\/?>([\s\S])*/,'').replace(/^</,'')},d.prototype.eachElement=function(Y,Z){for(var $,aa,ba=0;ba<Y.length;ba++)$=Y[ba],aa=this.glance($),D.test(aa)?ba+=$.querySelectorAll('*').length:E.test(aa)?(ba+=$.querySelectorAll('*').length,Z($)):C.test(aa)&&Z($)},d.prototype.eachAttribute=function(Y,Z){for(var aa,$=Y.attributes,ba=0;ba<$.length;ba++)aa={},aa.name=$[ba].name,aa.value=$[ba].value,B.test(aa.name)&&(aa.path=aa.value.replace(y,''),aa.opts=aa.path.split('.'),aa.command=aa.name.replace(z,''),aa.cmds=aa.command.split('-'),aa.modifiers=-1===aa.value.indexOf('|')?[]:aa.value.replace(A,'').split(' '),Z(aa))},d.prototype.removeAll=function(Y){Y='string'==typeof Y?new RegExp(Y):Y,Object.keys(this.data).forEach(function(Z){this.data[Z].forEach(function($,aa){Y.test(Z+'.'+aa)&&(this.data[Z][aa].unrender(),this.data[Z].splice(aa,1))},this)},this)},d.prototype.renderAll=function(Y){(this.data[Y]||[]).forEach(function(Z){Z.render()},this)},d.prototype.addOne=function(Y,Z){var aa,$=this;return $.eachAttribute(Y,function(ba){ba.path in $.data||($.data[ba.path]=[]),aa=x({view:$,element:Y,attribute:ba,method:v[ba.cmds[0]]||v['default'],getter:$.getter,setter:$.setter}),Z&&aa.render(),$.data[ba.path].push(aa)}),$},d.prototype.add=function(Y,Z){var aa,$=this;return $.eachElement(Y,function(ba){$.eachAttribute(ba,function(ca){ca.path in $.data||($.data[ca.path]=[]),aa=x({view:$,element:ba,attribute:ca,method:v[ca.cmds[0]]||v['default'],getter:$.getter,setter:$.setter}),Z&&aa.render(),$.data[ca.path].push(aa)})}),$},d.prototype.setup=function(Y){return this.setter=Y.setter,this.getter=Y.getter,this.data={},this.add(Y.elements),self},d.prototype.create=function(){return this};var G=function(Y){return new b().create(Y)},H=function(){return new d().create()};f.prototype.setup=function(Y){var Z=this;return Object.defineProperties(Z,{name:{value:Y.name},modifiers:{value:Y.modifiers||{}},_view:{value:H()},_model:{value:G()},view:{enumerable:!0,get:function(){return Z._view.data}},model:{enumerable:!0,get:function(){return Z._model.data}},elements:{get:function(){return(Y.view.shadowRoot||Y.view).querySelectorAll('*')}}}),Z._model.on('*',function($,aa){void 0===aa?Z._view.removeAll('^'+$+'.*'):Z._view.renderAll($)}),Z._view.setup({elements:(Y.view.shadowRoot||Y.view).querySelectorAll('*'),getter:function(){return this._data=Z._model.get(this.attribute.path),this.attribute.modifiers.forEach(function($){this._data=Z.modifiers[$].call(this._data)},this),this._data},setter:function($){this._data=Z._model.set(this.attribute.path,$)}}),Z._model.setup(Y.model||{}),Z},f.prototype.create=function(Y,Z){var $=this;if(Y.model&&'function'==typeof Y.model)Y.model.call($,function(aa){if(Y.model=aa,$.setup(Y),Z)return Z.call($)});else if($.setup(Y),Z)return Z.call($);return $};var I=function(Y,Z){return new f().create(Y,Z)},J='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split(''),M=function(){var Z=[],$;Z[8]=Z[13]=Z[18]=Z[23]='-',Z[14]='4';for(var aa=0;36>aa;aa++)Z[aa]||($=0|16*Math.random(),Z[aa]=J[19==aa?8|3&$:$]);return Z.join('')};g.prototype.comment=function(Y){if('function'!=typeof Y)throw new Error('Comment must be a function');var Z=/\/\*!?(?:\@preserve)?[ \t]*(?:\r\n|\n)([\s\S]*?)(?:\r\n|\n)\s*\*\//,$=Z.exec(Y.toString());if(!$)throw new Error('Comment missing');return $[1]},g.prototype.dom=function(Y){var Z=document.createElement('div');return Z.innerHTML=Y,Z.children[0]},g.prototype._template=function(Y){return'Function'===Y.constructor.name?(Y=this.comment(Y),Y=this.dom(Y)):'String'===Y.constructor.name&&(/<|>/.test(Y)?Y=this.dom(Y):Y=this.currentScript.ownerDocument.querySelector(Y)),Y},g.prototype.define=function(Y,Z){return document.registerElement(Y,{prototype:Object.create(HTMLElement.prototype,Z)})},g.prototype.create=function(Y){if(!Y)throw new Error('missing options');if(!Y.name)throw new Error('missing options.name');if(!Y.template)throw new Error('missing options.template');var Z=this;return Z.name=Y.name,Z.model=Y.model,Z.modifiers=Y.modifiers,Z.currentScript=document._currentScript||document.currentScript,Z.template=Z._template(Y.template),Y.created&&(Z.created=Y.created.bind(Z)),Y.attached&&(Z.attached=Y.attached.bind(Z)),Y.detached&&(Z.detached=Y.detached.bind(Z)),Y.attributed&&(Z.attributed=Y.attributed.bind(Z)),Z.proto=Z.define(Z.name,{attachedCallback:{value:Z.attached},detachedCallback:{value:Z.detached},attributeChangedCallback:{value:Z.attributed},createdCallback:{value:function(){Z.element=this,Z.uuid=M(),Z.element.appendChild(document.importNode(Z.template.content,!0)),Z.model?Z.binder=I({name:Z.uuid,model:Z.model,view:Z.element,modifiers:Z.modifiers},function(){Z.model=this.model,Z.created&&Z.created.call(Z)}):Z.created&&Z.created.call(Z)}}}),Z};var O=k;h.prototype.render=function(Y){var Z=this,$=null;return Y.title&&(document.title=Y.title),$='string'==typeof Y.component?Y.component in Z.cache?Z.cache[Y.component]:Z.cache[Y.component]=document.createElement(Y.component):Y.component,Z.view.firstChild&&Z.view.removeChild(Z.view.firstChild),Z.view.appendChild($),window.scroll(0,0),Z},h.prototype.redirect=function(Y){var Z=this;return window.location=Y.path,Z},h.prototype.add=function(Y){var Z=this;return'Object'===Y.constructor.name?Z.routes.push(Y):'Array'===Y.constructor.name&&(Z.routes=Z.routes.concat(Y)),Z},h.prototype.remove=function(Y){for(var $,Z=this,aa=0,ba=Z.routes.length;aa<ba;aa++)if($=Z.routes[aa],Y===$.path){Z.routes.splice(aa,1);break}return Z},h.prototype.get=function(Y){var Z=this,$=0,aa=null,ba=Z.routes.length;for($;$<ba;$++)if(aa=Z.routes[$],!aa.path)throw new Error('Router: missing path option');else if('string'==typeof aa.path){if(aa.path===Y||aa.path==='/'+Y)return aa;}else if('function'==typeof aa.path&&aa.path.test(Y))return aa;return aa},h.prototype.change=function(Y,Z){var $=this;return $.mode?window.history[Z?'replaceState':'pushState'](Y,Y.title,O.normalize(Y.origin+Y.path)):($.isChangeEvent=!1,window.location=O.normalize(Y.origin+Y.path)),$},h.prototype.navigate=function(Y,Z){var $=this;return $.state.path=O.getPath(Y.path,$.state.base,$.state.root),$.state.hash=O.getHash($.state.path),$.state.search=O.getSearch($.state.path),$.state.href=O.normalize(window.location.href),$.route=$.get($.state.path),$.state.title=$.route.title,$.change($.state,Z),$.route.redirect?$.redirect($.route):$.render($.route),$},h.prototype.create=function(Y){var Z=this;return Z.mode=Y.mode,Z.mode=null===Z.mode||void 0===Z.mode||Z.mode,Z.mode='history'in window&&'pushState'in window.history&&Z.mode,Z.base=Y.base||'',Z.routes=Y.routes||[],Z.external=Y.external||'',Z.cache={},Z.isChangeEvent=!0,Z.root=Z.mode?'/':'/#',Z.state={root:Z.root,base:Z.base,origin:O.normalize(Z.base+Z.root)},window.addEventListener('DOMContentLoaded',function(){Z.view=document.querySelector('j-view')||document.querySelector('[j-view]'),Z.navigate({path:window.location.href},!0)},!1),window.addEventListener(Z.mode?'popstate':'hashchange',function($){if(Z.isChangeEvent){var aa=Z.mode?$.state:{path:$.newURL};Z.navigate(aa,!0)}else Z.isChangeEvent=!0},!1),window.addEventListener('click',function($){if(!($.metaKey||$.ctrlKey||$.shiftKey)){for(var aa=$.path?$.path[0]:$.target;aa&&'A'!==aa.nodeName;)aa=aa.parentNode;if(aa&&'A'===aa.nodeName){if(Z.external){if('Function'===Z.external.constructor.name&&Z.external(aa.href))return;if('RegExp'===Z.external.constructor.name&&Z.external.test(aa.href))return;if('String'===Z.external.constructor.name&&new RegExp(Z.external).test(aa.href))return}aa.hasAttribute('download')||aa.hasAttribute('external')||O.has(aa.href,'mailto:')||O.has(aa.href,'tel:')||O.has(aa.href,'file:')||O.has(aa.href,'ftp:')||($.preventDefault(),Z.navigate({path:aa.href}))}}},!1),Z};j.prototype.mime={html:'text/html',text:'text/plain',xml:'application/xml, text/xml',json:'application/json, text/javascript',urlencoded:'application/x-www-form-urlencoded',script:'text/javascript, application/javascript, application/x-javascript'},j.prototype.serialize=function(Y){var Z='';for(var $ in Y)Z=0<Z.length?Z+'&':Z,Z=Z+encodeURIComponent($)+'='+encodeURIComponent(Y[$]);return Z},j.prototype.fetch=function(Y){var Z=this;if(!Y)throw new Error('fetch: requires options');if(!Y.action)throw new Error('fetch: requires options.action');if(Y.method||(Y.method='GET'),Y.headers||(Y.headers={}),Y.data)if('GET'===Y.method)Y.action=Y.action+'?'+Z.serialize(Y.data),Y.data=null;else{switch(Y.requestType=Y.requestType?Y.requestType.toLowerCase():'',Y.responseType=Y.responseType?Y.responseType.toLowerCase():'',Y.requestType){case'script':Y.contentType=Z.mime.script;break;case'json':Y.contentType=Z.self.mime.json;break;case'xml':Y.contentType=Z.mime.xm;break;case'html':Y.contentType=Z.mime.html;break;case'text':Y.contentType=Z.mime.text;break;default:Y.contentType=Z.mime.urlencoded;}switch(Y.responseType){case'script':Y.accept=Z.mime.script;break;case'json':Y.accept=Z.mime.json;break;case'xml':Y.accept=Z.mime.xml;break;case'html':Y.accept=Z.mime.html;break;case'text':Y.accept=Z.mime.text;}Y.contentType===Z.mime.json&&(Y.data=JSON.stringify(Y.data)),Y.contentType===Z.mime.urlencoded&&(Y.data=Z.serialize(Y.data))}var $=new XMLHttpRequest;if($.open(Y.method.toUpperCase(),Y.action,!0,Y.username,Y.password),Y.mimeType&&$.overrideMimeType(Y.mimeType),Y.withCredentials&&($.withCredentials=Y.withCredentials),Y.accept&&(Y.headers.Accept=Y.accept),Y.contentType&&(Y.headers['Content-Type']=Y.contentType),Y.headers)for(var aa in Y.headers)$.setRequestHeader(aa,Y.headers[aa]);$.onreadystatechange=function(){if(4===$.readyState)return 200<=$.status&&400>$.status?Y.success($):Y.error($)},$.send(Y.data)},j.prototype.create=function(){var Y=this;return Y};var R=function(Y){return new g().create(Y)},U=function(Y){return new h().create(Y)},W=t.sViewElement;document.registerElement(W,{prototype:Object.create(HTMLElement.prototype)});var X={services:{},http:function(){return new j().create()}(),component:function(Y){return R(Y)},binder:function(Y,Z){return I(Y,Z)},router:function(Y){return this.router=U(Y)},query:function(Y){return(document._currentScript||document.currentScript).ownerDocument.querySelector(Y)},script:function(){return document._currentScript||document.currentScript},document:function(){return(document._currentScript||document.currentScript).ownerDocument}};return X});