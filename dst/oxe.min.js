/*
	Name: oxe
	Version: 3.15.1
	License: MPL-2.0
	Author: Alexander Elias
	Email: alex.steven.elis@gmail.com
	This Source Code Form is subject to the terms of the Mozilla Public
	License, v. 2.0. If a copy of the MPL was not distributed with this
	file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
var _createClass=function(){function e(e,t){for(var n,a=0;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _awaitIgnored(e,t){if(!t)return Promise.resolve(e).then(_empty)}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _invoke(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function _invokeIgnored(e){var t=e();if(t&&t.then)return t.then(_empty)}function _empty(){}function _await(e,t,n){return n?t?t(e):e:(e=Promise.resolve(e),t?e.then(t):e)}var _async=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(t){return Promise.reject(t)}}}}catch(t){}return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(t){return Promise.reject(t)}}}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Oxe",t):e.Oxe=t()})(this,function(){"use strict";function e(t){t.target.hasAttribute("o-value")&&i(t.target,"value").catch(console.error)}function t(t){"checkbox"!==t.target.type&&"radio"!==t.target.type&&"option"!==t.target.type&&"SELECT"!==t.target.nodeName&&t.target.hasAttribute("o-value")&&i(t.target,"value").catch(console.error)}function n(t){var e=t.target,n=e.hasAttribute("o-reset")||e.hasAttribute("data-o-reset");if(n){t.preventDefault();var a=f.elements.get(e).get("submit"),r=e.querySelectorAll("[o-value]"),l=b.get(a.scope);u.formReset(e,l)}}function a(t){if(0===t.button&&!t.defaultPrevented&&"INPUT"!==t.target.nodeName&&"BUTTON"!==t.target.nodeName&&"SELECT"!==t.target.nodeName&&!(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)){var e=t.path?t.path[0]:t.target,n=e.parentNode;if($.contain){for(;n&&"O-ROUTER"!==n.nodeName;)n=n.parentNode;if("O-ROUTER"!==n.nodeName)return}for(;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e.hasAttribute("download")||e.hasAttribute("external")||e.hasAttribute("o-external")||0===e.href.indexOf("tel:")||0===e.href.indexOf("ftp:")||0===e.href.indexOf("file:")||0===e.href.indexOf("mailto:")||0!==e.href.indexOf(window.location.origin)||$.external&&("RegExp"===$.external.constructor.name&&$.external.test(e.href)||"Function"===$.external.constructor.name&&$.external(e.href)||"String"===$.external.constructor.name&&$.external===e.href)||($.location.href!==e.href&&$.route(e.href),!$.compiled&&t.preventDefault())}}function r(t){var e=t&&t.state?t.state.path:window.location.href;$.route(e,{replace:!0})}function l(t){var e=t.target;if(1===e.nodeType&&e.hasAttribute("o-load")){var n=E.resolve(e.src||e.href),a=this.data[n];A.ready(a)}}var o=_async(function(t){var e=t.target,n=e.getAttribute("o-submit")||e.getAttribute("data-o-submit");if(n){t.preventDefault();var a=f.elements.get(e).get("submit"),r=h.get(a.keys),l=b.get(a.scope),o=u.formData(e,l);return _await(r.call(a.container,o,t),function(t){return _invoke(function(){if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var n=e.getAttribute("o-action")||e.getAttribute("data-o-action"),a=e.getAttribute("o-method")||e.getAttribute("data-o-method"),r=e.getAttribute("o-enctype")||e.getAttribute("data-o-enctype");return t.url=t.url||n,t.method=t.method||a,t.contentType=t.contentType||r,_await(x.fetch(t),function(e){return _invokeIgnored(function(){if(t.handler)return _awaitIgnored(t.handler(e))})})}},function(){("object"===("undefined"==typeof t?"undefined":_typeof(t))&&t.reset||e.hasAttribute("o-reset")||e.hasAttribute("data-o-reset"))&&e.reset()})})}}),i=_async(function(e,t){if(!e)throw new Error("Oxe - requires element argument");if(!t)throw new Error("Oxe - requires attribute argument");var n=f.elements.get(e).get(t);c.batch({read:function(){var e=n.element.type,t=n.element.nodeName,a=void 0;if("SELECT"===t){var r=n.element.options,o=n.element.multiple,s=!1;a=o?[]:"";for(var d,c=0,i=r.length;c<i;c++)if(d=r[c],d.selected)if(s=!0,o)a.push(d.value);else{a=d.value;break}!r.length||o||s||(a=r[0].value)}else if("radio"===e)for(var l,p="input[type=\"radio\"][o-value=\""+n.value+"\"]",u=n.container.querySelectorAll(p),m=0,h=u.length;m<h;m++)l=u[m],n.element===l&&(a=m);else if("file"===e){var y=n.element.files;a=a||[];for(var g,f=0,v=y.length;f<v;f++)g=y[f],a.push(g)}else a="checkbox"===e?n.element.checked:n.element.value;if(void 0!==a){var k=b.get(n.keys);if(a&&"object"===("undefined"==typeof a?"undefined":_typeof(a))&&a.constructor===k.constructor){for(var x in a)if(a[x]!==k[x]){b.set(n.keys,a);break}}else k!==a&&b.set(n.keys,a)}}})}),s={splice:function(){var e=arguments[0],t=arguments[1],n=2<arguments.length?arguments.length-2:0;if("number"!=typeof e||"number"!=typeof t)return[];0>e?(e=this.length+e,e=0<e?e:0):e=e<this.length?e:this.length,0>t?t=0:t>this.length-e&&(t=this.length-e);var a=this.$meta.length,r=void 0,l=void 0,o=void 0,i=void 0,d=2,c=arguments.length-d,p=this.slice(e,t);if(i=a-1-e,0<i)for(l=e;i--;)r=l++,o=c&&d<c?arguments[d++]:this.$meta[l],this.$meta[r]=s.create(o,this.$meta.listener,this.$meta.path+r),this.$meta.listener(this.$meta[r],this.$meta.path+r,r);if(0<n)for(;n--;)r=this.length,this.$meta[r]=s.create(arguments[d++],this.$meta.listener,this.$meta.path+r),s.defineProperty(this,r),this.$meta.listener(this.length,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(this.$meta[r],this.$meta.path+r,r);if(0<t)for(;t--;)this.$meta.length--,this.length--,r=this.length,this.$meta.listener(r,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(void 0,this.$meta.path+r,r);return p},arrayProperties:function(){var e=this;return{push:{value:function(){if(!arguments.length)return this.length;for(var t=0,n=arguments.length;t<n;t++)e.splice.call(this,this.length,0,arguments[t]);return this.length}},unshift:{value:function(){if(!arguments.length)return this.length;for(var t=0,n=arguments.length;t<n;t++)e.splice.call(this,0,0,arguments[t]);return this.length}},pop:{value:function(){return this.length?e.splice.call(this,this.length-1,1):void 0}},shift:{value:function(){return this.length?e.splice.call(this,0,1):void 0}},splice:{value:e.splice}}},objectProperties:function(){var e=this;return{$get:{value:function(e){return this[e]}},$set:{value:function(t,n){if(n!==this[t]){var a=e.create(n,this.$meta.listener,this.$meta.path+t);return this.$meta[t]=a,e.defineProperty(this,t),this.$meta.listener(a,this.$meta.path+t,t),a}}},$remove:{value:function(t){if(t in this){if(this.constructor===Array)return e.splice.call(this,t,1);var n=this[t];return delete this.$meta[t],delete this[t],this.$meta.listener(void 0,this.$meta.path+t,t),n}}}}},property:function(e){var t=this;return{enumerable:!0,configurable:!0,get:function(){return this.$meta[e]},set:function(n){n!==this.$meta[e]&&(this.$meta[e]=t.create(n,this.$meta.listener,this.$meta.path+e),this.$meta.listener(this[e],this.$meta.path+e,e,this))}}},defineProperty:function(e,t){return Object.defineProperty(e,t,this.property(t))},create:function(e,t,n){var a=this;if(!e||e.constructor!==Object&&e.constructor!==Array)return e;n=n?n+".":"";var r=void 0,l=void 0,o=e.constructor,i=e.constructor(),s=e.constructor();if(s.$meta={value:e.constructor()},s.$meta.value.path=n,s.$meta.value.listener=t,o===Array){for(r=0,l=e.length;r<l;r++)s.$meta.value[r]=a.create(e[r],t,n+r),s[r]=a.property(r);var d=a.arrayProperties();for(r in d)s[r]=d[r]}if(o===Object)for(r in e)s.$meta.value[r]=a.create(e[r],t,n+r),s[r]=a.property(r);var c=a.objectProperties();for(r in c)s[r]=c[r];return Object.defineProperties(i,s)}},d=function(){function e(){_classCallCheck(this,e),this.reads=[],this.writes=[],this.time=1e3/30,this.pending=!1}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this.time=e.time||this.time}},{key:"tick",value:function(e){return window.requestAnimationFrame(e)}},{key:"schedule",value:function(){this.pending||(this.pending=!0,this.tick(this.flush.bind(this,null)))}},{key:"flush",value:function(e,t){if(!this.reads.length&&!this.writes.length)return void(this.pending=!1);var n;if(null===e){for(n=0;n<this.reads.length;n++)if(this.reads[n](),performance.now()-t>this.time)return this.reads.splice(0,n+1),this.tick(this.flush.bind(this,n+1));this.reads.splice(0,n+1)}for(n=0;n<this.writes.length;n++){if(this.writes[n](),n===e)return this.writes.splice(0,n+1),this.flush(null,t);if(performance.now()-t>this.time)return this.writes.splice(0,n+1),this.tick(this.flush.bind(this,n+1))}this.writes.splice(0,n+1),this.flush(null,t)}},{key:"remove",value:function(e,t){var n=e.indexOf(t);return!!~n&&!!e.splice(n,1)}},{key:"clear",value:function(e){return this.remove(this.reads,e)||this.remove(this.writes,e)}},{key:"batch",value:function(e){var t=this;if(e.read){var n=function(){var n;if(n=e.context?e.read.call(e.context):e.read(),e.write&&!1!==n){var a;a=e.context?e.write.bind(e.context):e.write,t.writes.push(a),t.schedule()}};t.reads.push(n),t.schedule()}else if(e.write){var a;a=e.context?e.write.bind(e.context,e.shared):e.write,t.writes.push(a),t.schedule()}return e}}]),e}(),c=new d,p={alt:function(e){c.write(function(){e.element.alt=""})},each:function(e){c.write(function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)})},href:function(e){c.write(function(){e.element.href=""})},class:function(e){c.write(function(){var t=e.names.slice(1).join("-");e.element.classList.remove(t)})},html:function(e){c.write(function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)})},on:function(e){e.element.removeEventListener(e.names[1],e.cache,!1)},css:function(e){c.write(function(){e.element.style.cssText=""})},required:function(e){c.write(function(){e.element.required=!1})},src:function(e){c.write(function(){e.element.src=""})},text:function(e){return{write:function(){e.element.innerText=""}}},value:function(e){c.write(function(){var t,n,a,r,l;if("SELECT"===e.element.nodeName)for(l=e.element.options,t=0,n=l.length;t<n;t++)r=l[t],r.selected=!1;else if("radio"===e.element.type)for(a="input[type=\"radio\"][o-value=\""+e.path+"\"]",l=e.element.parentNode.querySelectorAll(a),(t=0,n=l.length);t<n;t++)r=l[t],r.checked=0===t;else"checkbox"===e.element.type?(e.element.checked=!1,e.element.value=!1):e.element.value=""})},default:function(e){if(e.type in this){var t=this[e.type](e);t&&(t.context=t.context||{},c.batch(t))}else{var n;c.batch({read:function(){n=Model.get(e.keys);e.element[e.type]===n||(n=Binder.piper(e,n))},write:function(){e.element[e.type]=n}})}}},u={PREFIX:/data-o-|o-/,ROOT:/^(https?:)?\/?\//,DOT:/\.+/,PIPE:/\s?\|\s?/,PIPES:/\s?,\s?|\s+/,VARIABLE_START:"(\\|*\\,*\\s*)",VARIABLE_END:"([^a-zA-z]|$)",binderNames:function(e){return e=e.split(this.PREFIX)[1],e?e.split("-"):[]},binderValues:function(e){return e=e.split(this.PIPE)[0],e?e.split("."):[]},binderPipes:function(e){return e=e.split(this.PIPE)[1],e?e.split(this.PIPES):[]},ensureElement:function(e){e.query=e.query||"",e.scope=e.scope||document.body;var t=e.scope.querySelector(""+e.name+e.query);t||(t=document.createElement(e.name),"afterbegin"===e.position?e.scope.insertBefore(t,e.scope.firstChild):"beforeend"===e.position?e.scope.appendChild(t):e.scope.appendChild(t));var n=!0,a=!1,r=void 0;try{for(var l,o,i=e.attributes[Symbol.iterator]();!(n=(l=i.next()).done);n=!0)o=l.value,t.setAttribute(o.name,o.value)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t},formData:function(e,t){for(var n,a=e.querySelectorAll("[o-value]"),r={},o=0,i=a.length;o<i;o++)if(n=a[o],"OPTION"!==n.nodeName){var l=n.getAttribute("o-value");if(l){var s=this.binderValues(l);r[s[0]]=this.getByPath(t,s)}}return r},formReset:function(e,t){for(var n,a=e.querySelectorAll("[o-value]"),r=0,o=a.length;r<o;r++)if(n=a[r],"OPTION"!==n.nodeName){var l=n.getAttribute("o-value");if(l){var i=this.binderValues(l);this.setByPath(t,i,"")}}},walker:function(e,t){for(t(e),e=e.firstChild;e;)this.walker(e,t),e=e.nextSibling},replaceEachVariable:function(e,t,n,a){var r=this,o=new RegExp(this.VARIABLE_START+t+this.VARIABLE_END,"g");r.walker(e,function(e){if(3===e.nodeType)(e.nodeValue==="$"+t||"$index"===e.nodeValue)&&(e.nodeValue=a);else if(1===e.nodeType)for(var r,s=0,i=e.attributes.length;s<i;s++)r=e.attributes[s],(0===r.name.indexOf("o-")||0===r.name.indexOf("data-o-"))&&(r.value=r.value.replace(o,"$1"+n+"."+a+"$2"))})},traverse:function(e,t,n){for(var a,r="string"==typeof t?t.split("."):t,l=r.length-1,o=0;o<l;o++){if(a=r[o],!(a in e))if("function"==typeof n)n(e,a,o,r);else return;e=e[a]}return{data:e,key:r[l]}},setByPath:function(e,t,n){for(var a,r="string"==typeof t?t.split("."):t,l=r.length-1,o=0;o<l;o++)a=r[o],a in e||(isNaN(r[o+1])?e[a]={}:e[a]=[]),e=e[a];return e[r[l]]=n},getByPath:function(e,t){for(var n,a="string"==typeof t?t.split("."):t,r=a.length-1,l=0;l<r;l++){if(n=a[l],!(n in e))return;e=e[n]}return e[a[r]]},joinDot:function(){return Array.prototype.join.call(arguments,".").replace(/\.{2,}/g,".")},ready:function(e){e&&("interactive"!==window.document.readyState&&"complete"!==window.document.readyState?window.document.addEventListener("DOMContentLoaded",function t(){e(),window.document.removeEventListener("DOMContentLoaded",t)},!0):e())}},m=function(){function e(){_classCallCheck(this,e),this.data={}}return _createClass(e,[{key:"get",value:function(e){return u.getByPath(this.data,e)}},{key:"set",value:function(e,t){return u.setByPath(this.data,e,t)}}]),e}(),h=new m,y={class:function(e){var t,n;return{write:function(){t=b.get(e.keys),t=f.piper(e,t),n=e.names.slice(1).join("-"),e.element.classList.toggle(n,t)}}},css:function(e){var t;return{read:function(){return(t=b.get(e.keys),e.element.style.cssText!==t)&&(1<e.names.length&&(t=e.names.slice(1).join("-")+": "+t+";"),t=f.piper(e,t),e.element.style.cssText!==t)&&void 0},write:function(){e.element.style.cssText=t}}},default:function(e){var t=void 0,n=void 0;t=e.type in this?this[e.type](e):{read:function(){n=b.get(e.keys),e.element[e.type]===n||(n=f.piper(e,n))},write:function(){e.element[e.type]=n}},c.batch(t)},disable:function(e){var t;return{read:function(){return(t=b.get(e.keys),e.element.disabled!==t)&&(t=f.piper(e,t),e.element.disabled!==t)&&void 0},write:function(){e.element.disabled=t}}},each:function(e){var t=this;return e.cache||(e.cache=e.element.removeChild(e.element.firstElementChild)),{write:function(){var n,a,r,l;if((r=b.get(e.keys),r&&"object"===("undefined"==typeof r?"undefined":_typeof(r)))&&(r=f.piper(e,r),r&&"object"===("undefined"==typeof r?"undefined":_typeof(r))))if(r.constructor===Array&&(l=r.length),r.constructor===Object&&(a=Object.keys(r),l=a.length),e.element.children.length>l)e.element.removeChild(e.element.lastElementChild);else if(e.element.children.length<l){var o=e.cache.cloneNode(!0);if(r.constructor===Array&&(n=e.element.children.length),r.constructor===Object&&(n=a[e.element.children.length]),u.replaceEachVariable(o,e.names[1],e.path,n),f.bind(o,e.container),e.element.appendChild(o),"SELECT"===e.element.nodeName&&e.element.attributes["o-value"]||e.element.attributes["data-o-value"]){var i=e.element.attributes["o-value"]||e.element.attributes["data-o-value"],s=e.element.attributes["o-value"].value||e.element.attributes["data-o-value"].value,d=[e.scope].concat(s.split("|")[0].split("."));t.value({keys:d,name:i,value:s,scope:e.scope,element:e.element,container:e.container})}}}}},enable:function(e){var t;return{read:function(){return(t=b.get(e.keys),e.element.disabled!==!t)&&(t=f.piper(e,t),e.element.disabled!==!t)&&void 0},write:function(){e.element.disabled=!t}}},hide:function(e){var t;return{read:function(){return(t=b.get(e.keys),e.element.hidden!==t)&&(t=f.piper(e,t),e.element.hidden!==t)&&void 0},write:function(){e.element.hidden=t}}},html:function(e){var t;return{read:function(){return(t=b.get(e.keys),e.element.innerHTML!==t)&&(t=f.piper(e,t),e.element.innerHTML!==t)&&void 0},write:function(){e.element.innerHTML=t}}},on:function(t){var n;return{write:function(){return n=h.get(t.keys),"function"==typeof n?void(!t.cache&&(t.cache=function(a){for(var e,r=[a],o=0,i=t.pipes.length;o<i;o++){e=t.pipes[o].split("."),e.unshift(t.scope);var l=b.get(e);r.push(l)}Promise.resolve().then(n.bind(t.container).apply(null,r)).catch(console.error)}),t.element.removeEventListener(t.names[1],t.cache),t.element.addEventListener(t.names[1],t.cache)):(console.warn("Oxe - attribute o-on=\""+t.keys.join(".")+"\" invalid type function required"),!1)}}},read:function(e){var t;return{read:function(){return t=b.get(e.keys),e.element.readOnly!==t&&void(t=f.piper(e,t))},write:function(){e.element.readOnly=t}}},required:function(e){var t;return{read:function(){return t=b.get(e.keys),e.element.required!==t&&void(t=f.piper(e,t))},write:function(){e.element.required=t}}},show:function(e){var t;return{read:function(){return t=b.get(e.keys),!t!==e.element.hidden&&void(t=f.piper(e,t))},write:function(){e.element.hidden=!t}}},text:function(e){var t;return{read:function(){return(t=b.get(e.keys),void 0===t)?(b.set(e.keys,""),!1):null!==t&&void(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?t=JSON.stringify(t):t&&"string"!=typeof t&&(t+=""),t=f.piper(e,t))},write:function(){e.element.innerText=t}}},value:function(e){var t=void 0,n=void 0,a=e.element.type,r=e.element.nodeName;if("SELECT"===r){var l;return{read:function(){if(t=b.get(e.keys),l=e.element.options,n=e.element.multiple,n&&t.constructor!==Array)throw new Error("Oxe - invalid multiple select value type "+e.keys.join(".")+" array required")},write:function(){for(var e=!1,a=0;a<l.length;a++){var r=l[a],o=t&&t.constructor===Array?t[a]:t;o&&r.value===o?(e=!0,r.value=o,r.setAttribute("selected","")):(r.value=!1,r.removeAttribute("selected"))}if(l.length&&!n&&!e){var i=t&&t.constructor===Array?t[0]:t;if(l[0].setAttribute("selected",""),i!==(l[0].value||""));}}}}if("radio"===a){var o;return{read:function(){return t=b.get(e.keys),void 0===t?(b.set(e.keys,0),!1):void(o=e.container.querySelectorAll("input[type=\"radio\"][o-value=\""+e.value+"\"]"))},write:function(){for(var n,a=!1,r=0,i=o.length;r<i;r++)n=o[r],r===t?(a=!0,n.checked=!0):n.checked=!1;a||(o[0].checked=!0,b.set(e.keys,0))}}}return"file"===a?{read:function(){return t=b.get(e.keys),void 0===t?(b.set(e.keys,[]),!1):t&&t.constructor===Array?void 0:(console.warn("Oxe - file attribute invalid type"),!1)},write:function(){for(var n=0,a=t.length;n<a;n++)t[n]!==e.element.files[n]&&(t[n]?e.element.files[n]=t[n]:console.warn("Oxe - file remove not implemented"))}}:"checkbox"===a?{read:function(){return t=b.get(e.keys),"boolean"==typeof t?t!==e.element.checked&&void 0:(b.set(e.keys,!1),!1)},write:function(){e.element.checked=t}}:{read:function(){return t=b.get(e.keys),void 0===t?(b.set(e.keys,""),!1):t!==e.element.value&&void 0},write:function(){e.element.value=t}}},write:function(e){var t;return{read:function(){return t=b.get(e.keys),!t!==e.element.readOnly&&void(t=f.piper(e,t))},write:function(){e.element.readOnly=!t}}}},g=function(){function e(){_classCallCheck(this,e),this.data={},this.elements=new Map}return _createClass(e,[{key:"create",value:function(e){var t={};if(void 0===e.name)throw new Error("Oxe.binder.create - missing name");if(void 0===e.value)throw new Error("Oxe.binder.create - missing value");if(void 0===e.scope)throw new Error("Oxe.binder.create - missing scope");if(void 0===e.element)throw new Error("Oxe.binder.create - missing element");if(void 0===e.container)throw new Error("Oxe.binder.create - missing container");return t.name=e.name,t.value=e.value,t.scope=e.scope,t.element=e.element,t.container=e.container,t.names=e.names||u.binderNames(e.name),t.pipes=e.pipes||u.binderPipes(e.value),t.values=e.values||u.binderValues(e.value),t.context={},t.path=t.values.join("."),t.type=t.type||t.names[0],t.keys=[t.scope].concat(t.values),t}},{key:"get",value:function(e){var t;if("string"==typeof e?(t={},t.scope=e.split(".").slice(0,1).join("."),t.path=e.split(".").slice(1).join(".")):t=e,!(t.scope in this.data))return null;if(!(t.path in this.data[t.scope]))return null;for(var n,a=this.data[t.scope][t.path],r=0,o=a.length;r<o;r++)if(n=a[r],n.element===t.element&&n.name===t.name)return n;return null}},{key:"add",value:function(e){if(this.elements.has(e.element)||this.elements.set(e.element,new Map),!this.elements.get(e.element).has(e.names[0]))this.elements.get(e.element).set(e.names[0],e);else throw new Error("Oxe - duplicate attribute "+e.names[0]);e.scope in this.data||(this.data[e.scope]={}),e.path in this.data[e.scope]||(this.data[e.scope][e.path]=[]),this.data[e.scope][e.path].push(e)}},{key:"remove",value:function(e){if((this.elements.has(e.element)&&(this.elements.get(e.element).has(e.names[0])&&this.elements.get(e.element).remove(e.names[0]),0===this.elements.get(e.elements).length&&this.elements.remove(e.elements)),!!(e.scope in this.data))&&e.path in this.data[e.scope])for(var t=this.data[e.scope][e.path],n=0,a=t.length;n<a;n++)if(t[n].element===e.element)return t.splice(n,1)}},{key:"each",value:function(e,n){var a="string"==typeof e?e.split("."):e,r=a[0],l=this.data[r];if(l){var o=a.slice(1).join(".");for(var i in l)if(""===o||0===i.indexOf(o)&&(i===o||"."===i.charAt(o.length)))for(var s=l[i],d=0,c=s.length;d<c;d++)n(s[d])}}},{key:"piper",value:function(e,t){if(!e.pipes.length)return t;var n=h.get(e.scope);if(!n)return t;for(var a,r=0,o=e.pipes.length;r<o;r++)if(a=e.pipes[r],a in n)t=n[a].call(e.container,t);else throw new Error("Oxe - pipe method "+a+" not found in scope "+e.scope);return t}},{key:"checkChildren",value:function(e){if("#document-fragment"===e.nodeName)return!0;if("STYLE"===e.nodeName&&"SCRIPT"===e.nodeName&&"OBJECT"===e.nodeName&&"IFRAME"===e.nodeName)return!1;for(var t,n=0,a=e.attributes.length;n<a;n++)if(t=e.attributes[n],0===t.name.indexOf("o-each")||0===t.name.indexOf("data-o-each"))return!1;return!0}},{key:"eachElement",value:function(e,t,n,a){if("O-ROUTER"===e.nodeName||"TEMPLATE"===e.nodeName||"#document-fragment"===e.nodeName||e.hasAttribute("o-scope")||e.hasAttribute("o-setup")||e.hasAttribute("o-router")||e.hasAttribute("o-compiled")||e.hasAttribute("o-external")||e.hasAttribute("data-o-scope")||e.hasAttribute("data-o-setup")||e.hasAttribute("data-o-router")||e.hasAttribute("data-o-compiled")||e.hasAttribute("data-o-external")||a.call(this,e),this.checkChildren(e))for(var r,o=0,i=e.children.length;o<i;o++)r=e.children[o],this.eachElement(r,t,n,a)}},{key:"eachAttribute",value:function(e,t){for(var n,a=0,r=e.attributes.length;a<r;a++)n=e.attributes[a],(0===n.name.indexOf("o-")||0===n.name.indexOf("data-o-"))&&"o-reset"!==n.name&&"o-action"!==n.name&&"o-method"!==n.name&&"o-enctype"!==n.name&&"data-o-reset"!==n.name&&"data-o-action"!==n.name&&"data-o-method"!==n.name&&"data-o-enctype"!==n.name&&t.call(this,n)}},{key:"unbind",value:function(e,t){t=t||e;var n=t.getAttribute("o-scope")||t.getAttribute("data-o-scope");if(!n)throw new Error("Oxe - bind requires container element scope attribute");this.eachElement(e,t,n,function(e){this.eachAttribute(e,function(a){var r=this.get({scope:n,element:e,container:t,name:a.name,value:a.value});this.remove(r),Unrender.default(r)})})}},{key:"bind",value:function(e,t){t=t||e;var n=t.getAttribute("o-scope")||t.getAttribute("data-o-scope");if(!n)throw new Error("Oxe - bind requires container element scope attribute");this.eachElement(e,t,n,function(e){this.eachAttribute(e,function(a){var r=this.create({scope:n,element:e,container:t,name:a.name,value:a.value});this.add(r),y.default(r)})})}}]),e}(),f=new g,v=function(){function e(){_classCallCheck(this,e),this.GET=2,this.SET=3,this.REMOVE=4,this.ran=!1,this.data=s.create({},this.listener.bind(this))}return _createClass(e,[{key:"traverse",value:function(e,t,n){var a;"string"==typeof t&&(t=t.split("."));for(var r=this.data,o=t[t.length-1],s=0,i=t.length-1;s<i;s++){if(!(t[s]in r)){if(e===this.GET||e===this.REMOVE)return;e===this.SET&&r.$set(t[s],isNaN(t[s+1])?{}:[])}r=r[t[s]]}return e===this.SET?a=r.$set(o,n):e===this.GET?a=r[o]:e===this.REMOVE&&(a=r[o],r.$remove(o)),a}},{key:"get",value:function(e){return this.traverse(this.GET,e)}},{key:"remove",value:function(e){return this.traverse(this.REMOVE,e)}},{key:"set",value:function(e,t){return this.traverse(this.SET,e,t)}},{key:"listener",value:function(e,t,n){var a=void 0===e?p:y;if("length"===n){var r=t.split(".").slice(0,1).join("."),l=t.split(".").slice(1).join(".");if(!(r in f.data))return;if(!(l in f.data[r]))return;if(!(0 in f.data[r][l]))return;var o=f.data[r][l][0];a.default(o)}else f.each(t,function(e){a.default(e)})}}]),e}(),b=new v,k=function(){function e(){_classCallCheck(this,e),this.head=null,this.method="get",this.mime={xml:"text/xml; charset=utf-8",html:"text/html; charset=utf-8",text:"text/plain; charset=utf-8",json:"application/json; charset=utf-8",js:"application/javascript; charset=utf-8"}}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this.head=e.head||this.head,this.method=e.method||this.method,this.request=e.request,this.response=e.response,this.acceptType=e.acceptType,this.credentials=e.credentials,this.contentType=e.contentType,this.responseType=e.responseType}},{key:"serialize",value:_async(function(e){var t="";for(var n in e)t=0<t.length?t+"&":t,t=t+encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t})},{key:"fetch",value:_async(function(e){var t=this,n=Object.assign({},e);if(!n.url)throw new Error("Oxe.fetcher - requires url option");if(!n.method)throw new Error("Oxe.fetcher - requires method option");if(!n.head&&t.head&&(n.head=t.head),"string"==typeof n.method&&(n.method=n.method.toUpperCase()||t.method),!n.acceptType&&t.acceptType&&(n.acceptType=t.acceptType),!n.contentType&&t.contentType&&(n.contentType=t.contentType),!n.responseType&&t.responseType&&(n.responseType=t.responseType),!n.credentials&&t.credentials&&(n.credentials=t.credentials),!n.mode&&t.mode&&(n.mode=t.mode),!n.cache&&t.cache&&(n.cahce=t.cache),!n.redirect&&t.redirect&&(n.redirect=t.redirect),!n.referrer&&t.referrer&&(n.referrer=t.referrer),!n.referrerPolicy&&t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),!n.signal&&t.signal&&(n.signal=t.signal),!n.integrity&&t.integrity&&(n.integrity=t.integrity),!n.keepAlive&&t.keepAlive&&(n.keepAlive=t.keepAlive),n.contentType)switch(n.head=n.head||{},n.contentType){case"js":n.head["Content-Type"]=t.mime.js;break;case"xml":n.head["Content-Type"]=t.mime.xml;break;case"html":n.head["Content-Type"]=t.mime.html;break;case"json":n.head["Content-Type"]=t.mime.json;break;default:n.head["Content-Type"]=n.contentType;}if(n.acceptType)switch(n.head=n.head||{},n.acceptType){case"js":n.head.Accept=t.mime.js;break;case"xml":n.head.Accept=t.mime.xml;break;case"html":n.head.Accept=t.mime.html;break;case"json":n.head.Accept=t.mime.json;break;default:n.head.Accept=n.acceptType;}return _invoke(function(){if(n.body)return _invokeIgnored(function(){if("GET"===n.method){var e=n.url+"?";return _await(t.serialize(n.body),function(t){n.url=e+t})}"json"===n.contentType&&(n.body=JSON.stringify(n.body))})},function(){var e=!1;return _invoke(function(){if("function"==typeof t.request){var a=Object.assign({},n);return _await(t.request(a),function(t){return!1===t?(e=!0,n):void("object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.assign(n,t))})}},function(a){if(e)return a;var r=Object.assign({},n);return r.head&&(r.headers=r.head,delete r.head),_await(window.fetch(n.url,r),function(e){return n.code=e.status,n.message=e.statusText,_invoke(function(){return n.responseType?_await(e["buffer"===n.responseType?"arrayBuffer":n.responseType](),function(e){n.body=e}):void(n.body=e.body)},function(){var e=!1;return _invoke(function(){if(t.response){var a=Object.assign({},n);return _await(t.response(a),function(t){return!1===t?(e=!0,n):void("object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.assign(n,t))})}},function(t){return e?t:n})})})})})})},{key:"post",value:_async(function(e){var t=this;return e.method="post",t.fetch(e)})},{key:"get",value:_async(function(e){var t=this;return e.method="get",t.fetch(e)})},{key:"put",value:_async(function(e){var t=this;return e.method="put",t.fetch(e)})},{key:"head",value:_async(function(e){var t=this;return e.method="head",t.fetch(e)})},{key:"patch",value:_async(function(e){var t=this;return e.method="patch",t.fetch(e)})},{key:"delete",value:_async(function(e){var t=this;return e.method="delete",t.fetch(e)})},{key:"options",value:_async(function(e){var t=this;return e.method="options",t.fetch(e)})},{key:"connect",value:_async(function(e){var t=this;return e.method="connect",t.fetch(e)})}]),e}(),x=new k,E={extension:function(e){var t=e.lastIndexOf(".");return 0<t?e.slice(t+1):""},join:function(){return Array.prototype.join.call(arguments,"/").replace(/\/{2,}/g,"/").replace(/^(https?:\/)/,"$1/")},base:function(e){var t=window.document.querySelector("base");return e&&(t?t.href=e:(t=window.document.createElement("base"),t.href=e,window.document.head.insertBefore(t,window.document.head.firstElementChild))),t?t.href:window.location.origin+window.location.pathname},resolve:function(e,t){var n=[];if(e=e.replace(window.location.origin,""),0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//"))return e;"/"!==e.charAt(0)&&(t=t||this.base(),e=t+"/"+e,e=e.replace(window.location.origin,"")),e=e.replace(/\/{2,}/,"/"),e=e.replace(/^\//,""),e=e.replace(/\/$/,"");for(var a=e.split("/"),r=0,o=a.length;r<o;r++)if("."===a[r]||""===a[r])continue;else".."===a[r]?0<r&&n.splice(r-1,1):n.push(a[r]);return"/"+n.join("/")}},O={innerHandler:function(e,t,n){return"\\"===n[t-1]?void 0:"'"===e?"\\'":"\""===e?"\\\"":"\t"===e?"\\t":"\n"===e?"\\n":void 0},updateString:function(e,t,n){return n.slice(0,t)+e+n.slice(t+1)},updateIndex:function(e,t){return t+e.length-1},template:function(e){var t=e.indexOf("`"),n=e.indexOf("`",t+1);if(-1===t||-1===n)return e;for(var a,r=void 0,l=0,o=0,i=e,s=!1,d=0;d<i.length;d++)a=i[d],"`"===a&&"\\"!==i[d-1]?s?(l++,r="'",s=!1,i=this.updateString(r,d,i),d=this.updateIndex(r,d)):(o++,r="'",s=!0,i=this.updateString(r,d,i),d=this.updateIndex(r,d)):s&&(r=this.innerHandler(a,d,i))&&(i=this.updateString(r,d,i),d=this.updateIndex(r,d));if(i=i.replace(/\${(.*?)}/g,"'+$1+'"),o==l)return i;throw new Error("Oxe - Transformer missing backtick")},patterns:{exps:/export\s+(?:default|var|let|const)?\s+/g,imps:/import(?:\s+(?:\*\s+as\s+)?\w+\s+from)?\s+(?:'|").*?(?:'|")/g,imp:/import(?:\s+(?:\*\s+as\s+)?(\w+)\s+from)?\s+(?:'|")(.*?)(?:'|")/},getImports:function(e,t){for(var n,a=[],r=e.match(this.patterns.imps)||[],o=0,i=r.length;o<i;o++)n=r[o].match(this.patterns.imp),a[o]={raw:n[0],name:n[1],url:E.resolve(n[2],t),extension:E.extension(n[2])},a[o].extension||(a[o].url+=".js");return a},getExports:function(e){for(var t,n=[],a=e.match(this.patterns.exps)||[],r=0,o=a.length;r<o;r++)t=a[r],n[r]={raw:t,default:-1!==t.indexOf("default")};return n},replaceImports:function(e,t){if(!t.length)return e;for(var n=0,a=t.length;n<a;n++){var r=t[n],l=(r.name?"var "+r.name+" = ":"")+"$LOADER.data['"+r.url+"'].result";e=e.replace(r.raw,l)}return e},replaceExports:function(e,t){if(!t.length)return e;if(1===t.length)return e.replace(t[0].raw,"return ");e="var $EXPORT = {};\n"+e,e+="\nreturn $EXPORT;\n";for(var n=0,a=t.length;n<a;n++)e=e.replace(t[n].raw,"$EXPORT.");return e},ast:function(e){var t={};return t.url=e.url,t.raw=e.text,t.cooked=e.text,t.base=t.url.slice(0,t.url.lastIndexOf("/")+1),t.imports=this.getImports(t.raw,t.base),t.exports=this.getExports(t.raw),t.cooked=this.replaceImports(t.cooked,t.imports),t.cooked=this.replaceExports(t.cooked,t.exports),t}},T=function(){function e(){_classCallCheck(this,e),this.events={}}return _createClass(e,[{key:"on",value:function(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){if(e in this.events){var n=this.events[e].indexOf(t);-1!==n&&this.events[e].splice(n,1)}}},{key:"emit",value:function(e){if(e in this.events)for(var t=this.events[e],n=Array.prototype.slice.call(arguments,1),a=0,r=t.length;a<r;a++)t[a].apply(this,n)}}]),e}(),w=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data={},e.ran=!1,e.methods={},e.transformers={},e}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){if(e=e||{},this.methods=e.methods||this.methods,this.transformers=e.transformers||this.transformers,e.loads)for(var t;t=e.loads.shift();)this.load(t)}},{key:"execute",value:function(e){var t="'use strict';\n\n"+(e.ast?e.ast.cooked:e.text),n=new Function("$LOADER","window",t);e.result=n(this,window)}},{key:"ready",value:function(e){if(e&&e.listener&&e.listener.length)for(var t;t=e.listener.shift();)t(e)}},{key:"fetch",value:function(e){var t=this,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(200<=n.status&&300>n.status||304==n.status)e.text=n.responseText,"js"===e.extension?e.transformer?t.transform(e,function(){t.execute(e),t.ready(e)}):(t.execute(e),t.ready(e)):t.ready(e);else throw new Error(n.responseText)},n.open("GET",e.url),n.send()}},{key:"transform",value:function(e,t){if(("es"===e.transformer||"est"===e.transformer)&&(e.text=O.template(e.text)),("es"===e.transformer||"esm"===e.transformer)&&(e.ast=O.ast(e)),e.ast&&e.ast.imports.length)for(var n=0,a=e.ast.imports.length,r=function(){n++,n===a&&t()},l=0;l<a;l++)this.load({listener:r,method:e.method,url:e.ast.imports[l].url,transformer:e.transformer});else t()}},{key:"attach",value:function(e){var t=document.createElement(e.tag);for(var n in e.attributes["o-load"]="true",e.attributes)t.setAttribute(n,e.attributes[n]);document.head.appendChild(t)}},{key:"js",value:function(e){"fetch"===e.method||"es"===e.transformer||"est"===e.transformer||"esm"===e.transformer?this.fetch(e):"script"===e.method?this.attach({tag:"script",attributes:{type:"text/javascript",src:e.url,async:"true"}}):this.attach({tag:"script",attributes:{type:"module",src:e.url,async:"true"}})}},{key:"css",value:function(e){"fetch"===e.method?this.fetch(e):this.attach({tag:"link",attributes:{href:e.url,type:"text/css",rel:"stylesheet"}})}},{key:"load",value:function(e,t){if("string"==typeof e?e={url:e}:t=e.listener,e.url=E.resolve(e.url),e.url in this.data){var n=this.data[e.url];return void(n.listener.length?t&&n.listener.push(t):(t&&n.listener.push(t),this.ready(n)))}this.data[e.url]=e,e.extension=e.extension||E.extension(e.url),e.listener=t?[t]:[],e.method=e.method||this.methods[e.extension],e.transformer=e.transformer||this.transformers[e.extension],"js"===e.extension?this.js(e):"css"===e.extension?this.css(e):this.fetch(e)}}]),t}(T),A=new w,S=function(){function e(){_classCallCheck(this,e),this.data={},this.compiled=!1}return _createClass(e,[{key:"setup",value:function(e){if(e=e||{},e.components&&e.components.length)for(var t=0,n=e.components.length;t<n;t++)this.define(e.components[t])}},{key:"renderSlot",value:function(e,t){for(var n=e.querySelectorAll("slot[name]"),a=0,r=n.length;a<r;a++){var l=n[a],o=l.getAttribute("name"),i=t.querySelector("[slot=\""+o+"\"]");i?l.parentNode.replaceChild(i,l):l.parentNode.removeChild(l)}var s=e.querySelector("slot:not([name])");if(s&&t.children.length)for(;t.firstChild;)s.parentNode.insertBefore(t.firstChild,s);s&&s.parentNode.removeChild(s)}},{key:"renderStyle",value:function(e,t){if(!e)return"";if(window.CSS&&window.CSS.supports){if(!window.CSS.supports("(--t: black)"))for(var n=e.match(/--\w+(?:-+\w+)*:\s*.*?;/g),a=0,r=n.length;a<r;a++){var l=n[a],o=l.match(/(--\w+(?:-+\w+)*):\s*(.*?);/),i=new RegExp("var\\("+o[1]+"\\)","g");e=e.replace(o[0],""),e=e.replace(i,o[2])}window.CSS.supports(":scope")||(e=e.replace(/\:scope/g,"[o-scope=\""+t+"\"]")),window.CSS.supports(":host")||(e=e.replace(/\:host/g,"[o-scope=\""+t+"\"]"))}return"<style>"+e+"</style>"}},{key:"created",value:function(e,t){var n=this,a=t.name+"-"+t.count++;if(Object.defineProperties(e,{scope:{value:a,enumerable:!0},status:{value:"created",enumerable:!0}}),e.setAttribute("o-scope",a),b.set(a,t.model),h.set(a,t.methods),!n.compiled||n.compiled&&"O-ROUTER"!==e.parentNode.nodeName){var r=document.createElement("template"),l=n.renderStyle(t.style,a);"string"==typeof t.template?r.innerHTML=l+t.template:(r.innerHTML=l,r.appendChild(t.template));var o=document.importNode(r.content,!0);f.bind(o,e),t.shadow&&"attachShadow"in document.body?e.attachShadow({mode:"open"}).appendChild(o):t.shadow&&"createShadowRoot"in document.body?e.createShadowRoot().appendChild(o):(n.renderSlot(r.content,e),e.appendChild(o))}t.created&&t.created.call(e)}},{key:"attached",value:function(e,t){t.attached&&t.attached.call(e)}},{key:"detached",value:function(e,t){t.detached&&t.detached.call(e)}},{key:"define",value:function(e){var t=this;if(!e.name)throw new Error("Oxe.component.define - requires name");if(e.name in t.data)throw new Error("Oxe.component.define - component defined");return t.data[e.name]=e,e.count=0,e.compiled=!1,e.style=e.style||"",e.model=e.model||{},e.methods=e.methods||{},e.shadow=e.shadow||!1,e.template=e.template||"",e.properties=e.properties||{},e.properties.status={enumerable:!0,configurable:!0,value:"define"},e.properties.model={enumerable:!0,configurable:!0,get:function(){return b.get(this.scope)},set:function(e){return e=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},b.set(this.scope,e)}},e.properties.methods={enumerable:!0,get:function(){return h.get(this.scope)}},e.proto=Object.create(HTMLElement.prototype,e.properties),e.proto.attributeChangedCallback=e.attributed,e.proto.createdCallback=function(){t.created(this,e)},e.proto.attachedCallback=function(){t.attached(this,e)},e.proto.detachedCallback=function(){t.detached(this,e)},document.registerElement(e.name,{prototype:e.proto})}}]),e}(),j=new S,C=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data=[],e.location={},e.ran=!1,e.element=null,e.contain=!1,e.compiled=!1,e}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){e=e||{},this.after=void 0===e.after?this.after:e.after,this.before=void 0===e.before?this.before:e.before,this.element=void 0===e.element?this.element:e.element,this.contain=void 0===e.contain?this.contain:e.contain,this.external=void 0===e.external?this.external:e.external,e.routes&&this.add(e.routes),this.route(window.location.href,{replace:!0})}},{key:"scroll",value:function(e,t){window.scroll(e,t)}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"redirect",value:function(e){window.location.href=e}},{key:"add",value:function(e){if(!e)throw new Error("Oxe.router.add - requires data parameter");else if(e.constructor===Object){if(!e.path)throw new Error("Oxe.router.add - route path required");if(!e.component)throw new Error("Oxe.router.add - route component required");this.data.push(e)}else if(e.constructor===Array)for(var t=0,n=e.length;t<n;t++)this.add(e[t])}},{key:"remove",value:function(e){for(var t=0,n=this.data.length;t<n;t++)e===this.data[t].path&&this.data.splice(t,1)}},{key:"get",value:function(e){for(var t,n=0,a=this.data.length;n<a;n++)if(t=this.data[n],e===t.path)return t}},{key:"find",value:function(e){for(var t,n=0,a=this.data.length;n<a;n++)if(t=this.data[n],this.isPath(t.path,e))return t}},{key:"filter",value:function(e){for(var t,n=[],a=0,r=this.data.length;a<r;a++)t=this.data[a],this.isPath(t.path,e)&&n.push(t);return n}},{key:"isPath",value:function(e,t){return("/"!==e.slice(0,1)&&(e=E.resolve(e)),!!t)&&("String"===t.constructor.name?new RegExp("^"+e.replace(/{\*}/g,"(?:.*)").replace(/{(\w+)}/g,"([^/]+)")+"(/)?$").test(t||"/"):"RegExp"===t.constructor.name?t.test(e):void 0)}},{key:"toParameterObject",value:function(e,t){var n={};if(!e||!t||"/"===e||"/"===t)return n;for(var a=/{|}/g,r=/{(\w+)}/,o=t.split("/"),s=e.split("/"),d=0,i=s.length;d<i;d++)if(r.test(s[d])){var l=s[d].replace(a,"");n[l]=o[d]}return n}},{key:"toQueryString",value:function(e){var t="?";for(var n in e){var a=e[n];t+=n+"="+a+"&"}return"&"===t.slice(-1)&&(t=t.slice(0,-1)),t}},{key:"toQueryObject",value:function(e){var t={};0===e.indexOf("?")&&(e=e.slice(1));for(var n,a=e.split("&"),r=0,o=a.length;r<o;r++)n=a[r].split("="),n[0]&&n[1]&&(t[n[0]]=n[1]);return t}},{key:"toLocationObject",value:function(){return{port:window.location.port||"",host:window.location.host||"",hash:window.location.hash||"",href:window.location.href||"",origin:window.location.origin||"",search:window.location.search||"",pathname:window.location.pathname||"",hostname:window.location.hostname||"",protocol:window.location.protocol||"",username:window.location.username||"",password:window.location.password||""}}},{key:"render",value:function(e){u.ready(function(){if(e.title&&(document.title=e.title),e.description&&u.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"description\"]",attributes:[{name:"name",value:"description"},{name:"content",value:e.description}]}),e.keywords&&u.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"keywords\"]",attributes:[{name:"name",value:"keywords"},{name:"content",value:e.keywords}]}),!this.element&&(this.element=this.element||"o-router","string"==typeof this.element&&(this.element=document.body.querySelector(this.element)),!this.element))throw new Error("Oxe.router.render - missing o-router element");if(!e.element)if(e.load&&A.load(e.load),!e.component)throw new Error("Oxe.router.render - missing route component");else"String"===e.component.constructor.name?e.element=document.createElement(e.component):"Object"===e.component.constructor.name&&(j.define(e.component),e.element=this.compiled?this.element.firstChild:document.createElement(e.component.name));if(!this.compiled){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e.element)}this.scroll(0,0),this.emit("routed")}.bind(this))}},{key:"route",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){t=t||{},t.query&&(e+=this.toQueryString(t.query)),this.compiled||window.history[t.replace?"replaceState":"pushState"]({path:e},"",e);var n=this.toLocationObject();if(n.route=this.find(n.pathname),!n.route)throw new Error("Oxe.router.route - route not found");if(n.title=n.route.title||"",n.query=this.toQueryObject(n.search),n.parameters=this.toParameterObject(n.route.path,n.pathname),"function"==typeof this.before){var a=this.before(n);if(!1===a)return}return n.route.handler?route.handler(n.route):n.route.redirect?this.redirect(n.route.redirect):void(this.location=n,this.emit("routing"),this.render(n.route))})}]),t}(T),$=new C,P=function(){function e(){_classCallCheck(this,e),this.compiled=!1}return _createClass(e,[{key:"setup",value:function(e){e=e||{},e.base&&E.base(e.base)}}]),e}(),q=new P,N=document.createElement("style"),L=document.createTextNode("\n\to-router, o-router > :first-child {\n\t\tdisplay: block;\n\t\tanimation: o-transition 150ms ease-in-out;\n\t}\n\t@keyframes o-transition {\n\t\t0% { opacity: 0; }\n\t\t100% { opacity: 1; }\n\t}\n");N.setAttribute("type","text/css"),N.appendChild(L),document.head.appendChild(N);var R=document.querySelector("script[o-setup]");if(R){var I=0,_=0,V=function(){if(I==_){document.addEventListener("load",l,!0),document.addEventListener("input",t,!0),document.addEventListener("reset",n,!0),document.addEventListener("click",a,!0),document.addEventListener("submit",o,!0),document.addEventListener("change",e,!0),window.addEventListener("popstate",r,!0);var i=R.getAttribute("o-setup").split(/\s*,\s*/),s=document.querySelector("meta[name=\"oxe\"]");if(s&&s.hasAttribute("compiled")&&(i[1]="null",i[2]="script",$.compiled=!0,q.compiled=!0,j.compiled=!0),!i[0])throw new Error("Oxe - o-setup attribute requires a url");if(1<i.length)A.load({url:i[0],method:i[2],transformer:i[1]});else{var d=document.createElement("script");d.setAttribute("src",i[0]),d.setAttribute("async","true"),d.setAttribute("type","module"),document.head.appendChild(d)}document.registerElement("o-router",{prototype:Object.create(HTMLElement.prototype)})}},B=function(e,t){var n=document.createElement("script");n.setAttribute("async","true"),n.setAttribute("src",e),n.addEventListener("load",function(){I++,t()},!0),document.head.appendChild(n)},D=[],M=!("fetch"in window),U=!("assign"in Object),H=!("Promise"in window),G=!("registerElement"in document)||!("content"in document.createElement("template"));M&&D.push("fetch"),H&&D.push("Promise"),U&&D.push("Object.assign"),(H||M||U)&&(_++,B("https://cdn.polyfill.io/v2/polyfill.min.js?features="+D.join(","),V)),G&&(_++,B("https://cdnjs.cloudflare.com/ajax/libs/document-register-element/1.7.2/document-register-element.js",V)),V()}var F=function(){function e(){_classCallCheck(this,e),this.g={},this.compiled=!0}return _createClass(e,[{key:"setup",value:_async(function(e){var t=this;t._setup||(t._setup=!0,e=e||{},e.listener&&e.listener.before&&e.listener.before(),e.general&&t.general.setup(e.general),e.fetcher&&t.fetcher.setup(e.fetcher),e.loader&&t.loader.setup(e.loader),e.component&&t.component.setup(e.component),e.router&&t.router.setup(e.router),e.listener&&e.listener.after&&e.listener.after())})},{key:"global",get:function(){return this.g}},{key:"window",get:function(){return window}},{key:"document",get:function(){return window.document}},{key:"body",get:function(){return window.document.body}},{key:"head",get:function(){return window.document.head}},{key:"location",get:function(){return this.router.location}},{key:"currentScript",get:function(){return window.document._currentScript||window.document.currentScript}},{key:"ownerDocument",get:function(){return(window.document._currentScript||window.document.currentScript).ownerDocument}},{key:"render",get:function(){return y}},{key:"methods",get:function(){return h}},{key:"utility",get:function(){return u}},{key:"general",get:function(){return q}},{key:"batcher",get:function(){return c}},{key:"loader",get:function(){return A}},{key:"binder",get:function(){return f}},{key:"fetcher",get:function(){return x}},{key:"component",get:function(){return j}},{key:"router",get:function(){return $}},{key:"model",get:function(){return b}}]),e}(),X=new F;return X});