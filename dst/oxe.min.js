/*
	Name: oxe
	Version: 3.14.2
	License: MPL-2.0
	Author: Alexander Elias
	Email: alex.steven.elis@gmail.com
	This Source Code Form is subject to the terms of the Mozilla Public
	License, v. 2.0. If a copy of the MPL was not distributed with this
	file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
var _createClass=function(){function e(e,t){for(var r,a=0;a<t.length;a++)r=t[a],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _invoke(e,t){var r=e();return r&&r.then?r.then(t):t(r)}function _invokeIgnored(e){var t=e();if(t&&t.then)return t.then(_empty)}function _empty(){}function _await(e,t,r){return r?t?t(e):e:(e=Promise.resolve(e),t?e.then(t):e)}var _async=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(t){return Promise.reject(t)}}}}catch(t){}return function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(t){return Promise.reject(t)}}}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Oxe",t):e.Oxe=t()})(this,function(){"use strict";function t(e,t){if(e&&"AsyncFunction"===e.constructor.name)return Promise.resolve().then(function(){return e()}).then(function(e){if(t)return t(e)}).catch(console.error);var r=e();return r&&"Promise"===r.constructor.name?Promise.resolve().then(function(){return r}).then(function(e){if(t)return t(e)}).catch(console.error):t?t(r):void 0}var e=function(){function e(t){_classCallCheck(this,e),this.data={},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){if(e=e||{},e.components){var t=!0,r=!1,a=void 0;try{for(var n,l,o=e.components[Symbol.iterator]();!(t=(n=o.next()).done);t=!0)l=n.value,this.define(l)}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}}}},{key:"renderSlot",value:function(e,t){var r=e.querySelectorAll("slot[name]"),a=!0,n=!1,l=void 0;try{for(var o,i=r[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value,d=s.getAttribute("name"),c=t.querySelector("[slot=\""+d+"\"]");c?s.parentNode.replaceChild(c,s):s.parentNode.removeChild(s)}}catch(e){n=!0,l=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw l}}var u=e.querySelector("slot:not([name])");if(u&&t.children.length)for(;t.firstChild;)u.parentNode.insertBefore(t.firstChild,u);u&&u.parentNode.removeChild(u)}},{key:"renderTemplate",value:function(e){var t=document.createDocumentFragment();if(e)if("string"==typeof e){var r=document.createElement("div");for(r.innerHTML=e;r.firstChild;)t.appendChild(r.firstChild)}else t.appendChild(e);return t}},{key:"renderStyle",value:function(e,t){if(e){if(window.CSS&&window.CSS.supports){if(!window.CSS.supports("(--t: black)")){var r=e.match(/--\w+(?:-+\w+)*:\s*.*?;/g),a=!0,n=!1,l=void 0;try{for(var o,i=r[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value,d=s.match(/(--\w+(?:-+\w+)*):\s*(.*?);/),c=new RegExp("var\\("+d[1]+"\\)","g");e=e.replace(d[0],""),e=e.replace(c,d[2])}}catch(e){n=!0,l=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw l}}}window.CSS.supports(":scope")||(e=e.replace(/\:scope/g,"[o-scope=\""+t+"\"]")),window.CSS.supports(":host")||(e=e.replace(/\:host/g,"[o-scope=\""+t+"\"]"))}var u=document.createElement("style"),m=document.createTextNode(e);return u.appendChild(m),u}}},{key:"created",value:function(e,t){var r=this,a=t.name+"-"+t.count++;if(Object.defineProperties(e,{scope:{enumerable:!0,value:a},status:{enumerable:!0,value:"created"}}),e.setAttribute("o-scope",a),f.model.set(a,t.model||{}),f.methods.data[a]=t.methods,!r.compiled||r.compiled&&"O-ROUTER"!==e.parentNode.nodeName){var n=r.renderTemplate(t.template),l=r.renderStyle(t.style,a);l&&n.insertBefore(l,n.firstChild),t.shadow&&"attachShadow"in document.body?e.attachShadow({mode:"open"}).appendChild(n):t.shadow&&"createShadowRoot"in document.body?e.createShadowRoot().appendChild(n):(r.renderSlot(n,e),e.appendChild(n))}f.binder.bind(e),t.created&&t.created.call(e)}},{key:"attached",value:function(e,t){t.attached&&t.attached.call(e)}},{key:"detached",value:function(e,t){t.detached&&t.detached.call(e)}},{key:"define",value:function(e){var t=this;if(!e.name)throw new Error("Oxe.component.define - requires name");if(e.name in t.data)throw new Error("Oxe.component.define - component defined");return t.data[e.name]=e,e.count=0,e.compiled=!1,e.model=e.model||{},e.shadow=e.shadow||!1,e.template=e.template||"",e.properties=e.properties||{},e.properties.status={enumerable:!0,configurable:!0,value:"define"},e.properties.model={enumerable:!0,configurable:!0,get:function(){return f.model.get(this.scope)},set:function(e){return e=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},f.model.set(this.scope,e)}},e.properties.methods={enumerable:!0,get:function(){return f.methods.data[this.scope]}},e.proto=Object.create(HTMLElement.prototype,e.properties),e.proto.attributeChangedCallback=e.attributed,e.proto.createdCallback=function(){t.created(this,e)},e.proto.attachedCallback=function(){t.attached(this,e)},e.proto.detachedCallback=function(){t.detached(this,e)},document.registerElement(e.name,{prototype:e.proto})}}]),e}(),r={extension:function(e){var t=e.lastIndexOf(".");return 0<t?e.slice(t+1):""},join:function(){return Array.prototype.join.call(arguments,"/").replace(/\/{2,}/g,"/").replace(/^(https?:\/)/,"$1/")},base:function(e){var t=window.document.querySelector("base");return e&&(t?t.href=e:(t=window.document.createElement("base"),t.href=e,window.document.head.insertBefore(t,window.document.head.firstElementChild))),t?t.href:window.location.origin+window.location.pathname},resolve:function(e,t){var r=[];if(e=e.replace(window.location.origin,""),0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//"))return e;"/"!==e.charAt(0)&&(t=t||this.base(),e=t+"/"+e,e=e.replace(window.location.origin,"")),e=e.replace(/\/{2,}/,"/"),e=e.replace(/^\//,""),e=e.replace(/\/$/,"");for(var a=e.split("/"),n=0,o=a.length;n<o;n++)if("."===a[n]||""===a[n])continue;else".."===a[n]?0<n&&r.splice(n-1,1):r.push(a[n]);return"/"+r.join("/")}},a=function(){function e(t){_classCallCheck(this,e),this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},e.base&&r.base(e.base)}}]),e}(),n={PATH:/\s*\|.*/,PREFIX:/(data-)?o-/,ROOT:/^(https?:)?\/?\//,TYPE:/(data-)?o-|-.*$/g,SPLIT_MODIFIERS:/\s|\s?,\s?/,binderNormalize:function(e){return e?e.replace(/\s+$/,"").replace(/^\s+/,"").replace(/\.{2,}/g,".").replace(/\|{2,}/g,"|").replace(/\,{2,}/g,",").replace(/\s{2,}/g," ").replace(/\s?\|\s?/,"|"):""},binderName:function(e){return e.replace(this.PREFIX,"")},binderType:function(e){return e.replace(this.TYPE,"")},binderNames:function(e){return e.replace(this.PREFIX,"").split("-")},binderValues:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?e.split("."):e.slice(0,t).split(".")},binderModifiers:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?[]:e.slice(t+1).split(this.SPLIT_MODIFIERS)},binderPath:function(e){return this.binderNormalize(e).replace(this.PATH,"")},ensureElement:function(e){e.query=e.query||"",e.scope=e.scope||document.body;var t=e.scope.querySelector(""+e.name+e.query);t||(t=document.createElement(e.name),"afterbegin"===e.position?e.scope.insertBefore(t,e.scope.firstChild):"beforeend"===e.position?e.scope.appendChild(t):e.scope.appendChild(t));var r=!0,a=!1,n=void 0;try{for(var l,o,i=e.attributes[Symbol.iterator]();!(r=(l=i.next()).done);r=!0)o=l.value,t.setAttribute(o.name,o.value)}catch(e){a=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw n}}return t},formData:function(e,t){var r=e.querySelectorAll("[o-value]"),a={},n=!0,l=!1,o=void 0;try{for(var i,s,d=r[Symbol.iterator]();!(n=(i=d.next()).done);n=!0)if(s=i.value,"OPTION"!==s.nodeName){var c=s.getAttribute("o-value");if(c){c=c.replace(/\s*\|.*/,"");var u=c.split(".").slice(-1);a[u]=this.getByPath(t,c)}}}catch(e){l=!0,o=e}finally{try{!n&&d.return&&d.return()}finally{if(l)throw o}}return a},walker:function(e,t){for(t(e),e=e.firstChild;e;)this.walker(e,t),e=e.nextSibling},replaceEachVariable:function(e,t,r,a){var n=this,o="$index",s="$"+t;n.walker(e,function(e){if(3===e.nodeType)(e.nodeValue===s||e.nodeValue===o)&&(e.nodeValue=a);else if(1===e.nodeType)for(var n,d=0,i=e.attributes.length;d<i;d++)if(n=e.attributes[d],0===n.name.indexOf("o-")||0===n.name.indexOf("data-o-")){for(var l,c=n.value,u=c.length,m=[],p="",h=0;h<u;h++)if(l=c[h],"$"===l&&c.slice(h,o.length)===o?(p+=a,h=h+o.length-1):"$"===l&&c.slice(h,s.length)===s?(p+=a,h=h+s.length-1):p+=l," "===l||"|"===l||","===l||h===u-1){if(0===p.indexOf(t)){var y=p.slice(t.length);m.push(r+"."+a+y)}else m.push(p);p=""}n.value=m.join("")}})},traverse:function(e,t,r){for(var a,n="string"==typeof t?t.split("."):t,l=n.length-1,o=0;o<l;o++){if(a=n[o],!(a in e))if("function"==typeof r)r(e,a,o,n);else return;e=e[a]}return{data:e,key:n[l]}},setByPath:function(e,t,r){for(var a,n="string"==typeof t?t.split("."):t,l=n.length-1,o=0;o<l;o++)a=n[o],a in e||(isNaN(n[o+1])?e[a]={}:e[a]=[]),e=e[a];return e[n[l]]=r},getByPath:function(e,t){for(var r,a="string"==typeof t?t.split("."):t,n=a.length-1,l=0;l<n;l++){if(r=a[l],!(r in e))return;e=e[r]}return e[a[n]]},joinDot:function(){return Array.prototype.join.call(arguments,".").replace(/\.{2,}/g,".")},ready:function(e){e&&("interactive"!==window.document.readyState&&"complete"!==window.document.readyState?window.document.addEventListener("DOMContentLoaded",function t(){e(),window.document.removeEventListener("DOMContentLoaded",t)},!0):e())}},l=function(){function e(){_classCallCheck(this,e),this.events={}}return _createClass(e,[{key:"on",value:function(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){if(e in this.events){var r=this.events[e].indexOf(t);-1!==r&&this.events[e].splice(r,1)}}},{key:"emit",value:function(e){if(e in this.events)for(var t=this.events[e],r=Array.prototype.slice.call(arguments,1),a=0,n=t.length;a<n;a++)t[a].apply(this,r)}}]),e}(),o=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.reads=[],r.writes=[],r.fps=1e3/60,r.pending=!1,r.setup(e),r}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){e=e||{},e.fps=void 0===e.fps||null===e.fps?this.fps:e.fps}},{key:"read",value:function(e,t){var r=t?e.bind(t):e;return this.reads.push(r),this.schedule(),r}},{key:"write",value:function(e,t){var r=t?e.bind(t):e;return this.writes.push(r),this.schedule(),r}},{key:"tick",value:function(e){window.requestAnimationFrame(e)}},{key:"schedule",value:function(){this.pending||(this.pending=!0,this.tick(this.flush.bind(this)))}},{key:"flush",value:function(e){var t;try{t=this.runReads(this.reads,e),this.runWrites(this.writes,t)}catch(t){if(this.events.error&&this.events.error.length)this.emit("error",t);else throw t}this.pending=!1,(this.reads.length||this.writes.length)&&this.schedule()}},{key:"runWrites",value:function(e,t){for(var r;r=e.shift();)if(r(),t&&e.length===t)return}},{key:"runReads",value:function(e,t){for(var r;r=e.shift();)if(r(),this.fps&&performance.now()-t>this.fps)return e.length}},{key:"remove",value:function(e,t){var r=e.indexOf(t);return!!~r&&!!e.splice(r,1)}},{key:"clear",value:function(e){return this.remove(this.reads,e)||this.remove(this.writes,e)}}]),t}(l),i=function(){function e(t){_classCallCheck(this,e),this.mime={xml:"text/xml; charset=utf-8",html:"text/html; charset=utf-8",text:"text/plain; charset=utf-8",json:"application/json; charset=utf-8",js:"application/javascript; charset=utf-8"},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this.head=e.head||null,this.method=e.method||"get",this.request=e.request,this.response=e.response,this.acceptType=e.acceptType,this.contentType=e.contentType,this.responseType=e.responseType}},{key:"serialize",value:_async(function(e){var t="";for(var r in e)t=0<t.length?t+"&":t,t=t+encodeURIComponent(r)+"="+encodeURIComponent(e[r]);return t})},{key:"fetch",value:_async(function(e){var t=this,r=Object.assign({},e);if(!r.url)throw new Error("Oxe.fetcher - requires url option");if(!r.method)throw new Error("Oxe.fetcher - requires method option");if(!r.head&&t.head&&(r.head=t.head),"string"==typeof r.method&&(r.method=r.method.toUpperCase()||t.method),!r.acceptType&&t.acceptType&&(r.acceptType=t.acceptType),!r.contentType&&t.contentType&&(r.contentType=t.contentType),!r.responseType&&t.responseType&&(r.responseType=t.responseType),!r.credentials&&t.credentials&&(r.credentials=t.credentials),!r.mode&&t.mode&&(r.mode=t.mode),!r.cache&&t.cache&&(r.cahce=t.cache),!r.redirect&&t.redirect&&(r.redirect=t.redirect),!r.referrer&&t.referrer&&(r.referrer=t.referrer),!r.referrerPolicy&&t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),!r.signal&&t.signal&&(r.signal=t.signal),!r.integrity&&t.integrity&&(r.integrity=t.integrity),!r.keepAlive&&t.keepAlive&&(r.keepAlive=t.keepAlive),r.contentType)switch(r.head=r.head||{},r.contentType){case"js":r.head["Content-Type"]=t.mime.js;break;case"xml":r.head["Content-Type"]=t.mime.xml;break;case"html":r.head["Content-Type"]=t.mime.html;break;case"json":r.head["Content-Type"]=t.mime.json;break;default:r.head["Content-Type"]=r.contentType;}if(r.acceptType)switch(r.head=r.head||{},r.acceptType){case"js":r.head.Accept=t.mime.js;break;case"xml":r.head.Accept=t.mime.xml;break;case"html":r.head.Accept=t.mime.html;break;case"json":r.head.Accept=t.mime.json;break;default:r.head.Accept=r.acceptType;}return _invoke(function(){if(r.body)return _invokeIgnored(function(){if("GET"===r.method){var e=r.url+"?";return _await(t.serialize(r.body),function(t){r.url=e+t})}"json"===r.contentType&&(r.body=JSON.stringify(r.body))})},function(){var e=!1;return _invoke(function(){if("function"==typeof t.request){var a=Object.assign({},r);return _await(t.request(a),function(t){return!1===t?(e=!0,r):void("object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.assign(r,t))})}},function(a){if(e)return a;var n=Object.assign({},r);return n.head&&(n.headers=n.head,delete n.head),_await(window.fetch(r.url,n),function(e){return r.code=e.status,r.message=e.statusText,_invoke(function(){return r.responseType?_await(e["buffer"===r.responseType?"arrayBuffer":r.responseType](),function(e){r.body=e}):void(r.body=e.body)},function(){var e=!1;return _invoke(function(){if(t.response){var a=Object.assign({},r);return _await(t.response(a),function(t){return!1===t?(e=!0,r):void("object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.assign(r,t))})}},function(t){return e?t:r})})})})})})},{key:"post",value:_async(function(e){var t=this;return e.method="post",t.fetch(e)})},{key:"get",value:_async(function(e){var t=this;return e.method="get",t.fetch(e)})},{key:"put",value:_async(function(e){var t=this;return e.method="put",t.fetch(e)})},{key:"head",value:_async(function(e){var t=this;return e.method="head",t.fetch(e)})},{key:"patch",value:_async(function(e){var t=this;return e.method="patch",t.fetch(e)})},{key:"delete",value:_async(function(e){var t=this;return e.method="delete",t.fetch(e)})},{key:"options",value:_async(function(e){var t=this;return e.method="options",t.fetch(e)})},{key:"connect",value:_async(function(e){var t=this;return e.method="connect",t.fetch(e)})}]),e}(),s=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data=[],e.location={},e.ran=!1,e.element=null,e.contain=!1,e.compiled=!1,document.addEventListener("click",e.clickListener.bind(e),!0),window.addEventListener("popstate",e.stateListener.bind(e),!0),e}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){e=e||{},this.after=void 0===e.after?this.after:e.after,this.before=void 0===e.before?this.before:e.before,this.element=void 0===e.element?this.element:e.element,this.contain=void 0===e.contain?this.contain:e.contain,this.external=void 0===e.external?this.external:e.external,e.routes&&this.add(e.routes),this.route(window.location.href,{replace:!0})}},{key:"scroll",value:function(e,t){window.scroll(e,t)}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"redirect",value:function(e){window.location.href=e}},{key:"add",value:function(e){if(!e)throw new Error("Oxe.router.add - requires data parameter");else if(e.constructor===Object){if(!e.path)throw new Error("Oxe.router.add - route path required");if(!e.component)throw new Error("Oxe.router.add - route component required");this.data.push(e)}else if(e.constructor===Array)for(var t=0,r=e.length;t<r;t++)this.add(e[t])}},{key:"remove",value:function(e){for(var t=0,r=this.data.length;t<r;t++)e===this.data[t].path&&this.data.splice(t,1)}},{key:"get",value:function(e){for(var t,r=0,a=this.data.length;r<a;r++)if(t=this.data[r],e===t.path)return t}},{key:"find",value:function(e){for(var t,r=0,a=this.data.length;r<a;r++)if(t=this.data[r],this.isPath(t.path,e))return t}},{key:"filter",value:function(e){for(var t,r=[],a=0,n=this.data.length;a<n;a++)t=this.data[a],this.isPath(t.path,e)&&r.push(t);return r}},{key:"isPath",value:function(e,t){return("/"!==e.slice(0,1)&&(e=r.resolve(e)),!!t)&&("String"===t.constructor.name?new RegExp("^"+e.replace(/{\*}/g,"(?:.*)").replace(/{(\w+)}/g,"([^/]+)")+"(/)?$").test(t||"/"):"RegExp"===t.constructor.name?t.test(e):void 0)}},{key:"toParameterObject",value:function(e,t){var r={};if(!e||!t||"/"===e||"/"===t)return r;for(var a=/{|}/g,n=/{(\w+)}/,o=t.split("/"),s=e.split("/"),d=0,i=s.length;d<i;d++)if(n.test(s[d])){var l=s[d].replace(a,"");r[l]=o[d]}return r}},{key:"toQueryString",value:function(e){var t="?";for(var r in e){var a=e[r];t+=r+"="+a+"&"}return"&"===t.slice(-1)&&(t=t.slice(0,-1)),t}},{key:"toQueryObject",value:function(e){var t={};0===e.indexOf("?")&&(e=e.slice(1));for(var r,a=e.split("&"),n=0,o=a.length;n<o;n++)r=a[n].split("="),r[0]&&r[1]&&(t[r[0]]=r[1]);return t}},{key:"toLocationObject",value:function(){return{port:window.location.port||"",host:window.location.host||"",hash:window.location.hash||"",href:window.location.href||"",origin:window.location.origin||"",search:window.location.search||"",pathname:window.location.pathname||"",hostname:window.location.hostname||"",protocol:window.location.protocol||"",username:window.location.username||"",password:window.location.password||""}}},{key:"render",value:function(e){f.utility.ready(function(){if(e.title&&(document.title=e.title),e.description&&f.utility.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"description\"]",attributes:[{name:"name",value:"description"},{name:"content",value:e.description}]}),e.keywords&&f.utility.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"keywords\"]",attributes:[{name:"name",value:"keywords"},{name:"content",value:e.keywords}]}),!this.element&&(this.element=this.element||"o-router","string"==typeof this.element&&(this.element=document.body.querySelector(this.element)),!this.element))throw new Error("Oxe.router.render - missing o-router element");if(!e.element)if(e.load&&f.loader.load(e.load),!e.component)throw new Error("Oxe.router.render - missing route component");else"String"===e.component.constructor.name?e.element=document.createElement(e.component):"Object"===e.component.constructor.name&&(f.component.define(e.component),e.element=this.compiled?this.element.firstChild:document.createElement(e.component.name));if(!this.compiled){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e.element)}this.scroll(0,0),this.emit("routed")}.bind(this))}},{key:"route",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){t=t||{},t.query&&(e+=this.toQueryString(t.query)),this.compiled||window.history[t.replace?"replaceState":"pushState"]({path:e},"",e);var r=this.toLocationObject();if(r.route=this.find(r.pathname),!r.route)throw new Error("Oxe.router.route - route not found");if(r.title=r.route.title||"",r.query=this.toQueryObject(r.search),r.parameters=this.toParameterObject(r.route.path,r.pathname),"function"==typeof this.before){var a=this.before(r);if(!1===a)return}return r.route.handler?route.handler(r.route):r.route.redirect?this.redirect(r.route.redirect):void(this.location=r,this.emit("routing"),this.render(r.route))})},{key:"stateListener",value:function(t){var e=t&&t.state?t.state.path:window.location.href;this.route(e,{replace:!0})}},{key:"clickListener",value:function(t){var e=t.path?t.path[0]:t.target,r=e.parentNode;if(this.contain){for(;r&&"O-ROUTER"!==r.nodeName;)r=r.parentNode;if("O-ROUTER"!==r.nodeName)return}if(!(t.metaKey||t.ctrlKey||t.shiftKey)){for(;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e.hasAttribute("download")||e.hasAttribute("external")||e.hasAttribute("o-external")||0===e.href.indexOf("tel:")||0===e.href.indexOf("ftp:")||0===e.href.indexOf("file:")||0===e.href.indexOf("mailto:")||0!==e.href.indexOf(window.location.origin)||this.external&&("RegExp"===this.external.constructor.name&&this.external.test(e.href)||"Function"===this.external.constructor.name&&this.external(e.href)||"String"===this.external.constructor.name&&this.external===e.href)||(this.location.href!==e.href&&this.route(e.href),!this.compiled&&t.preventDefault())}}}]),t}(l),d={_innerHandler:function(e,t,r){return"\\"===r[t-1]?void 0:"'"===e?"\\'":"\""===e?"\\\"":"\t"===e?"\\t":"\n"===e?"\\n":void 0},_updateString:function(e,t,r){return r.slice(0,t)+e+r.slice(t+1)},_updateIndex:function(e,t){return t+e.length-1},template:function(e){var t=e.indexOf("`"),r=e.indexOf("`",t+1);if(-1===t||-1===r)return e;for(var a,n,l=0,o=0,i=e,s=!1,d=0;d<i.length;d++)n=i[d],"`"===n&&"\\"!==i[d-1]?s?(l++,a="'",s=!1,i=this._updateString(a,d,i),d=this._updateIndex(a,d)):(o++,a="'",s=!0,i=this._updateString(a,d,i),d=this._updateIndex(a,d)):s&&(a=this._innerHandler(n,d,i))&&(i=this._updateString(a,d,i),d=this._updateIndex(a,d));if(i=i.replace(/\${(.*?)}/g,"'+$1+'"),o==l)return i;throw new Error("Oxe - Transformer missing backtick")},patterns:{exps:/export\s+(?:default|var|let|const)?\s+/g,imps:/import(?:\s+(?:\*\s+as\s+)?\w+\s+from)?\s+(?:'|").*?(?:'|")/g,imp:/import(?:\s+(?:\*\s+as\s+)?(\w+)\s+from)?\s+(?:'|")(.*?)(?:'|")/},getImports:function(e,t){for(var a,n=[],o=e.match(this.patterns.imps)||[],s=0,i=o.length;s<i;s++)a=o[s].match(this.patterns.imp),n[s]={raw:a[0],name:a[1],url:r.resolve(a[2],t),extension:r.extension(a[2])},n[s].extension||(n[s].url+=".js");return n},getExports:function(e){for(var t,r=[],a=e.match(this.patterns.exps)||[],n=0,o=a.length;n<o;n++)t=a[n],r[n]={raw:t,default:-1!==t.indexOf("default")};return r},replaceImports:function(e,t){if(!t.length)return e;for(var r=0,a=t.length;r<a;r++){var n=t[r],l=(n.name?"var "+n.name+" = ":"")+"$LOADER.data['"+n.url+"'].result";e=e.replace(n.raw,l)}return e},replaceExports:function(e,t){if(!t.length)return e;if(1===t.length)return e.replace(t[0].raw,"return ");var r,a;for(e="var $EXPORT = {};\n"+e,e+="\nreturn $EXPORT;\n",(r=0,a=t.length);r<a;r++)e=e.replace(t[r].raw,"$EXPORT.");return e},ast:function(e){var t={};return t.url=e.url,t.raw=e.text,t.cooked=e.text,t.base=t.url.slice(0,t.url.lastIndexOf("/")+1),t.imports=this.getImports(t.raw,t.base),t.exports=this.getExports(t.raw),t.cooked=this.replaceImports(t.cooked,t.imports),t.cooked=this.replaceExports(t.cooked,t.exports),t}},c=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data={},e.ran=!1,e.methods={},e.transformers={},document.addEventListener("load",e.listener.bind(e),!0),e}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){if(e=e||{},this.methods=e.methods||this.methods,this.transformers=e.transformers||this.transformers,e.loads)for(var t;t=e.loads.shift();)this.load(t)}},{key:"execute",value:function(e){var t="'use strict';\n\n"+(e.ast?e.ast.cooked:e.text),r=new Function("$LOADER","window",t);e.result=r(this,window)}},{key:"ready",value:function(e){if(e&&e.listener&&e.listener.length)for(var t;t=e.listener.shift();)t(e)}},{key:"fetch",value:function(e){var t=this,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)if(200<=r.status&&300>r.status||304==r.status)e.text=r.responseText,"js"===e.extension?e.transformer?t.transform(e,function(){t.execute(e),t.ready(e)}):(t.execute(e),t.ready(e)):t.ready(e);else throw new Error(r.responseText)},r.open("GET",e.url),r.send()}},{key:"transform",value:function(e,t){if(("es"===e.transformer||"est"===e.transformer)&&(e.text=d.template(e.text)),("es"===e.transformer||"esm"===e.transformer)&&(e.ast=d.ast(e)),e.ast&&e.ast.imports.length)for(var r=0,a=e.ast.imports.length,n=function(){r++,r===a&&t()},l=0;l<a;l++)this.load({listener:n,method:e.method,url:e.ast.imports[l].url,transformer:e.transformer});else t()}},{key:"attach",value:function(e){var t=document.createElement(e.tag);for(var r in e.attributes["o-load"]="true",e.attributes)t.setAttribute(r,e.attributes[r]);document.head.appendChild(t)}},{key:"js",value:function(e){"fetch"===e.method||"es"===e.transformer||"est"===e.transformer||"esm"===e.transformer?this.fetch(e):"script"===e.method?this.attach({tag:"script",attributes:{type:"text/javascript",src:e.url,async:"true"}}):this.attach({tag:"script",attributes:{type:"module",src:e.url,async:"true"}})}},{key:"css",value:function(e){"fetch"===e.method?this.fetch(e):this.attach({tag:"link",attributes:{href:e.url,type:"text/css",rel:"stylesheet"}})}},{key:"load",value:function(e,t){if("string"==typeof e?e={url:e}:t=e.listener,e.url=r.resolve(e.url),e.url in this.data){var a=this.data[e.url];return void(a.listener.length?t&&a.listener.push(t):(t&&a.listener.push(t),this.ready(a)))}this.data[e.url]=e,e.extension=e.extension||r.extension(e.url),e.listener=t?[t]:[],e.method=e.method||this.methods[e.extension],e.transformer=e.transformer||this.transformers[e.extension],"js"===e.extension?this.js(e):"css"===e.extension?this.css(e):this.fetch(e)}},{key:"listener",value:function(t){var e=t.target;if(1===e.nodeType&&e.hasAttribute("o-load")){var a=r.resolve(e.src||e.href),n=this.data[a];this.ready(n)}}}]),t}(l),u={alt:function(e){f.batcher.write(function(){e.element.alt=""})},each:function(e){f.batcher.write(function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)})},href:function(e){f.batcher.write(function(){e.element.href=""})},class:function(e){f.batcher.write(function(){var t=e.names.slice(1).join("-");e.element.classList.remove(t)})},html:function(e){f.batcher.write(function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)})},on:function(e){e.element.removeEventListener(e.names[1],e.cache,!1)},css:function(e){f.batcher.write(function(){e.element.style.cssText=""})},required:function(e){f.batcher.write(function(){e.element.required=!1})},src:function(e){f.batcher.write(function(){e.element.src=""})},text:function(e){f.batcher.write(function(){e.element.innerText=""})},value:function(e){f.batcher.write(function(){var t,r,a,n,l;if("SELECT"===e.element.nodeName)for(l=e.element.options,t=0,r=l.length;t<r;t++)n=l[t],n.selected=!1;else if("radio"===e.element.type)for(a="input[type=\"radio\"][o-value=\""+e.path+"\"]",l=e.element.parentNode.querySelectorAll(a),(t=0,r=l.length);t<r;t++)n=l[t],n.checked=0===t;else"checkbox"===e.element.type?(e.element.checked=!1,e.element.value=!1):e.element.value=""})},default:function(){}},m={required:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.required===t||(t=f.utility.binderModifyData(e,t),f.batcher.write(function(){e.element.required=t}))})},disable:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.disabled===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.disabled=t}))})},enable:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.disabled===!t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.disabled=!t}))})},hide:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.hidden===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.hidden=t}))})},show:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.hidden===!t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.hidden=!t}))})},read:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.readOnly===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.readOnly=t}))})},write:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.readOnly===!t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.readOnly=!t}))})},html:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.innerHTML===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.innerHTML=t}))})},class:function(e){f.batcher.write(function(){var t=f.model.get(e.keys),r=e.names.slice(1).join("-");t=f.binder.modifyData(e,t),e.element.classList.toggle(r,t)})},on:function(t){f.batcher.write(function(){var r=f.utility.getByPath(f.methods.data,t.scope+"."+t.path);"function"!=typeof r||(t.cache?t.element.removeEventListener(t.names[1],t.cache):t.cache=function(a){return Promise.resolve().then(function(){for(var e,n=[a],o=0,i=t.modifiers.length;o<i;o++){e=t.modifiers[o].split("."),e.unshift(t.scope);var l=Oxe.model.get(e);n.push(l)}return r.apply(t.container,n)}).catch(console.error)},t.element.addEventListener(t.names[1],t.cache))})},css:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.style.cssText===t||(1<e.names.length&&(t=e.names.slice(1).join("-")+": "+t+";"),t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.style.cssText=t}))})},text:function(e){f.batcher.read(function(){var t;t=f.model.get(e.keys),t=void 0===t||null===t?"":t,t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?t=JSON.stringify(t):t&&"string"!=typeof t&&(t+=""),t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.innerText=t})})},each:function(e){var t=this;f.batcher.read(function(){var r=f.model.get(e.keys),a=!!r&&r.constructor===Array,n=!!r&&r.constructor===Object;r&&"object"===("undefined"==typeof r?"undefined":_typeof(r))&&(a&&e.element.children.length===r.length||n&&e.element.children.length===Object.keys(r).length||(e.cache||(e.cache=e.element.removeChild(e.element.firstElementChild)),r=f.binder.modifyData(e,r),f.batcher.write(function(){for(n&&(r=Object.keys(r));e.element.children.length!==r.length;)if(e.element.children.length>r.length)e.element.removeChild(e.element.children[e.element.children.length-1]);else if(e.element.children.length<r.length){var l=void 0,o=e.cache.cloneNode(!0);a?l=e.element.children.length:n&&(l=r[e.element.children.length]),f.utility.replaceEachVariable(o,e.names[1],e.path,l),f.binder.bind(o,e.container),e.element.appendChild(o)}if("SELECT"===e.element.nodeName&&e.element.attributes["o-value"]||e.element.attributes["data-o-value"]){var i=e.element.attributes["o-value"]||e.element.attributes["data-o-value"],s=e.element.attributes["o-value"].value||e.element.attributes["data-o-value"].value,d=[e.scope].concat(s.split("|")[0].split("."));t.value({setup:!0,keys:d,name:i,value:s,container:e.scope,element:e.element})}})))})},value:function(e){f.batcher.read(function(){var t=e.element.type,r=e.element.nodeName,a=void 0,n=void 0,o=void 0,s=void 0,i=void 0,l=void 0,d=void 0,c=void 0;if(e.setup){if(e.setup=!1,l=f.model.get(e.keys),"SELECT"===r){c=e.element.options,o=e.element.multiple,l=void 0===l?o?[]:"":l;for(var u=0,m=c.length;u<m;u++)if(!c[u].disabled)if(!c[u].selected)u!==m-1||o||(l=c[0].value||c[0].innerText||"");else if(o)l.push(c[u].value||c[u].innerText||"");else{l=c[u].value||c[u].innerText||"";break}}else if("radio"===t)for(l=void 0===l?0:l,n="input[type=\"radio\"][o-value=\""+e.value+"\"]",c=e.container.querySelectorAll(n),(s=0,i=c.length);s<i;s++)d=c[s],d.checked=s===l;else if("file"===t)for(l=void 0===l?[]:l,s=0,i=l.length;s<i;s++)e.element.files[s]=l[s];else"checkbox"===t?(a="checked",l=void 0!==l&&l):(a="value",l=void 0===l?"":l);a&&(e.element[a]=l)}else if("SELECT"===r){l=e.element.multiple?[]:"";var p=!0,h=!1,y=void 0;try{for(var b,g,v=e.element.options[Symbol.iterator]();!(p=(b=v.next()).done);p=!0)if(g=b.value,g.selected)if(e.element.multiple)l.push(g.value||g.innerText);else{l=g.value||g.innerText;break}}catch(e){h=!0,y=e}finally{try{!p&&v.return&&v.return()}finally{if(h)throw y}}}else if("radio"===t)for(n="input[type=\"radio\"][o-value=\""+e.value+"\"]",c=e.container.querySelectorAll(n),(s=0,i=c.length);s<i;s++)d=c[s],e.element===d?(l=s,d.checked=!0):d.checked=!1;else if("file"===t)for(l=l||[],s=0,i=e.element.files.length;s<i;s++)l[s]=e.element.files[s];else l="checkbox"===t?e.element.checked:e.element.value;void 0!==l&&f.model.set(e.keys,l)})},default:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element[e.type]===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element[e.type]=t}))})}},p=function(){function e(){_classCallCheck(this,e),this.data={},this.values=[],this.submits=[]}return _createClass(e,[{key:"set",value:function(e){if(e=e||{},void 0===e.name)throw new Error("Oxe.binder.set - missing name");if(void 0===e.value)throw new Error("Oxe.binder.set - missing value");if(void 0===e.element)throw new Error("Oxe.binder.set - missing element");if(void 0===e.container)throw new Error("Oxe.binder.set - missing container");return e.scope=e.scope||e.container.getAttribute("o-scope"),e.path=e.path||f.utility.binderPath(e.value),e.type=e.type||f.utility.binderType(e.name),e.names=e.names||f.utility.binderNames(e.name),e.values=e.values||f.utility.binderValues(e.value),e.modifiers=e.modifiers||f.utility.binderModifiers(e.value),e.keys=e.keys||[e.scope].concat(e.values),("o-value"===e.name||"data-o-value"===e.name)&&(e.setup=!0),e}},{key:"get",value:function(e){var t;if("o-value"===e.name)t=this.values;else if("o-submit"===e.name)t=this.submits;else{if(!(e.scope in this.data))return null;if(!(e.path in this.data[e.scope]))return null;t=this.data[e.scope][e.path]}var r=!0,a=!1,n=void 0;try{for(var l,o,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0)if(o=l.value,o.element===e.element&&o.name===e.name)return o}catch(e){a=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw n}}return null}},{key:"add",value:function(e){var t;"o-value"===e.name?t=this.values:"o-submit"===e.name?t=this.submits:(!(e.scope in this.data)&&(this.data[e.scope]={}),!(e.path in this.data[e.scope])&&(this.data[e.scope][e.path]=[]),t=this.data[e.scope][e.path]),t.push(e)}},{key:"remove",value:function(e){var t;if("o-value"===e.name)t=this.values;else if("o-submit"===e.name)t=this.submits;else{if(!(e.scope in this.data))return;if(!(e.path in this.data[e.scope]))return;t=this.data[e.scope][e.path]}for(var r=0,a=t.length;r<a;r++)if(t[r].element===e.element)return t.splice(r,1)}},{key:"each",value:function(e,t){var r,a,a=e.split("."),r=a[0],n=this.data[r],o=a.slice(1).join(".");for(var s in n)if(""===o||0===s.indexOf(o)&&(s===o||"."===s.charAt(o.length)))for(var d,c=n[s],u=0,i=c.length;u<i;u++)d=c[u],t(d)}},{key:"unrender",value:function(e){e.type in u&&u[e.type](e)}},{key:"render",value:function(e){e.type in m?m[e.type](e):m.default(e)}},{key:"modifyData",value:function(e,t){if(!e.modifiers.length)return t;if(!f.methods.data[e.scope])return t;var r=!0,a=!1,n=void 0;try{for(var l,o=e.modifiers[Symbol.iterator]();!(r=(l=o.next()).done);r=!0){var i=l.value,s=f.methods.data[e.scope];s&&(t=s[i].call(e.container,t))}}catch(e){a=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}return t}},{key:"skipChildren",value:function(e){if("STYLE"===e.nodeName&&"SCRIPT"===e.nodeName&&"OBJECT"===e.nodeName&&"IFRAME"===e.nodeName)return!0;var t=!0,r=!1,a=void 0;try{for(var n,l,o=e.attributes[Symbol.iterator]();!(t=(n=o.next()).done);t=!0)if(l=n.value,0===l.name.indexOf("o-each")||0===l.name.indexOf("data-o-each"))return!0}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}return!1}},{key:"eachElement",value:function(e,t,r){var a=t.getAttribute("o-scope")||t.getAttribute("data-o-scope"),n=e.getAttribute("o-scope")||e.getAttribute("data-o-scope");if("O-ROUTER"===e.nodeName||e.hasAttribute("o-scope")||e.hasAttribute("o-setup")||e.hasAttribute("o-router")||e.hasAttribute("o-compiled")||e.hasAttribute("o-external")||e.hasAttribute("data-o-scope")||e.hasAttribute("data-o-setup")||e.hasAttribute("data-o-router")||e.hasAttribute("data-o-compiled")||e.hasAttribute("data-o-external")||r.call(this,e),(!n||n===a)&&!1===this.skipChildren(e)){var l=!0,o=!1,i=void 0;try{for(var s,d,c=e.children[Symbol.iterator]();!(l=(s=c.next()).done);l=!0)d=s.value,this.eachElement(d,t,r)}catch(e){o=!0,i=e}finally{try{!l&&c.return&&c.return()}finally{if(o)throw i}}}}},{key:"eachAttribute",value:function(e,t){var r=!0,a=!1,n=void 0;try{for(var l,o,i=e.attributes[Symbol.iterator]();!(r=(l=i.next()).done);r=!0)o=l.value,(0===o.name.indexOf("o-")||0===o.name.indexOf("data-o-"))&&t.call(this,o)}catch(e){a=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw n}}}},{key:"unbind",value:function(e,t){t=t||e,this.eachElement(e,t,function(e){this.eachAttribute(e,function(r){var a=this.get({element:e,container:t,name:r.name,value:r.value,scope:t.getAttribute("o-scope"),path:f.utility.binderPath(r.value)});this.remove(a),this.unrender(a)})})}},{key:"bind",value:function(e,t){t=t||e,this.eachElement(e,t,function(e){this.eachAttribute(e,function(r){var a=this.set({element:e,container:t,name:r.name,value:r.value});this.add(a),this.render(a)})})}}]),e}(),h={splice:function(){var e=arguments[0],t=arguments[1],r=2<arguments.length?arguments.length-2:0;if("number"!=typeof e||"number"!=typeof t)return[];0>e?(e=this.length+e,e=0<e?e:0):e=e<this.length?e:this.length,0>t?t=0:t>this.length-e&&(t=this.length-e);var a=this.$meta.length,n=void 0,l=void 0,o=void 0,i=void 0,s=2,d=arguments.length-s,c=this.slice(e,t);if(i=a-1-e,0<i)for(l=e;i--;)n=l++,o=d&&s<d?arguments[s++]:this.$meta[l],this.$meta[n]=h.create(o,this.$meta.listener,this.$meta.path+n),this.$meta.listener(this.$meta[n],this.$meta.path+n,n);if(0<r)for(;r--;)n=this.length,this.$meta[n]=h.create(arguments[s++],this.$meta.listener,this.$meta.path+n),h.defineProperty(this,n),this.$meta.listener(this.length,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(this.$meta[n],this.$meta.path+n,n);if(0<t)for(;t--;)this.$meta.length--,this.length--,n=this.length,this.$meta.listener(n,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(void 0,this.$meta.path+n,n);return c},arrayProperties:function(){var e=this;return{push:{value:function(){if(!arguments.length)return this.length;for(var t=0,r=arguments.length;t<r;t++)e.splice.call(this,this.length,0,arguments[t]);return this.length}},unshift:{value:function(){if(!arguments.length)return this.length;for(var t=0,r=arguments.length;t<r;t++)e.splice.call(this,0,0,arguments[t]);return this.length}},pop:{value:function(){return this.length?e.splice.call(this,this.length-1,1):void 0}},shift:{value:function(){return this.length?e.splice.call(this,0,1):void 0}},splice:{value:e.splice}}},objectProperties:function(){var e=this;return{$get:{value:function(e){return this[e]}},$set:{value:function(t,r){if(r!==this[t]){var a=e.create(r,this.$meta.listener,this.$meta.path+t);return this.$meta[t]=a,e.defineProperty(this,t),this.$meta.listener(a,this.$meta.path+t,t),a}}},$remove:{value:function(t){if(t in this){if(this.constructor===Array)return e.splice.call(this,t,1);var r=this[t];return delete this.$meta[t],delete this[t],this.$meta.listener(void 0,this.$meta.path+t,t),r}}}}},property:function(e){var t=this;return{enumerable:!0,configurable:!0,get:function(){return this.$meta[e]},set:function(r){r!==this.$meta[e]&&(this.$meta[e]=t.create(r,this.$meta.listener,this.$meta.path+e),this.$meta.listener(this[e],this.$meta.path+e,e,this))}}},defineProperty:function(e,t){return Object.defineProperty(e,t,this.property(t))},create:function(e,t,r){var a=this;if(!e||e.constructor!==Object&&e.constructor!==Array)return e;r=r?r+".":"";var n=void 0,l=void 0,o=e.constructor,i=e.constructor(),s=e.constructor();if(s.$meta={value:e.constructor()},s.$meta.value.path=r,s.$meta.value.listener=t,o===Array){for(n=0,l=e.length;n<l;n++)s.$meta.value[n]=a.create(e[n],t,r+n),s[n]=a.property(n);var d=a.arrayProperties();for(n in d)s[n]=d[n]}if(o===Object)for(n in e)s.$meta.value[n]=a.create(e[n],t,r+n),s[n]=a.property(n);var c=a.objectProperties();for(n in c)s[n]=c[n];return Object.defineProperties(i,s)}},y=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.GET=2,e.SET=3,e.REMOVE=4,e.ran=!1,e.data=h.create({},e.listener),e}return _inherits(t,e),_createClass(t,[{key:"traverse",value:function(e,t,r){"string"==typeof t&&(t=[t]);for(var a,n=this.data,o=t[t.length-1],s=0,i=t.length-1;s<i;s++){if(!(t[s]in n)){if(e===this.GET||e===this.REMOVE)return;e===this.SET&&n.$set(t[s],isNaN(t[s+1])?{}:[])}n=n[t[s]]}return e===this.SET?a=n.$set(o,r):e===this.GET?a=n[o]:e===this.REMOVE&&(a=n[o],n.$remove(o)),a}},{key:"get",value:function(e){return this.traverse(this.GET,e)}},{key:"remove",value:function(e){return this.traverse(this.REMOVE,e)}},{key:"set",value:function(e,t){return this.traverse(this.SET,e,t)}},{key:"listener",value:function(e,t){var r=void 0===e?"unrender":"render";f.binder.each(t,function(e){f.binder[r](e)})}}]),t}(l),f={compiled:!1};Object.defineProperties(f,{window:{enumerable:!0,get:function(){return window}},document:{enumerable:!0,get:function(){return window.document}},body:{enumerable:!0,get:function(){return window.document.body}},head:{enumerable:!0,get:function(){return window.document.head}},location:{enumerable:!0,get:function(){return this.router.location}},currentScript:{enumerable:!0,get:function(){return window.document._currentScript||window.document.currentScript}},ownerDocument:{enumerable:!0,get:function(){return(window.document._currentScript||window.document.currentScript).ownerDocument}},global:{enumerable:!0,value:{}},methods:{enumerable:!0,value:{data:{}}},utility:{enumerable:!0,value:n},setup:{enumerable:!0,value:function(e){this._setup||(this._setup=!0,e=e||{},e.listener&&e.listener.before&&e.listener.before(),e.general&&this.general.setup(e.general),e.fetcher&&this.fetcher.setup(e.fetcher),e.loader&&this.loader.setup(e.loader),e.component&&this.component.setup(e.component),e.router&&this.router.setup(e.router),e.listener&&e.listener.after&&e.listener.after())}}}),Object.defineProperty(f,"general",{enumerable:!0,value:new a}),Object.defineProperty(f,"batcher",{enumerable:!0,value:new o}),Object.defineProperty(f,"loader",{enumerable:!0,value:new c}),Object.defineProperty(f,"binder",{enumerable:!0,value:new p}),Object.defineProperty(f,"fetcher",{enumerable:!0,value:new i}),Object.defineProperty(f,"component",{enumerable:!0,value:new e}),Object.defineProperty(f,"router",{enumerable:!0,value:new s}),Object.defineProperty(f,"model",{enumerable:!0,value:new y});var b=document.createElement("style"),g=document.createTextNode(" \to-router, o-router > :first-child { \t\tdisplay: block; \t} \to-router, [o-scope] { \t\tanimation: o-transition 150ms ease-in-out; \t} \t@keyframes o-transition { \t\t0% { opacity: 0; } \t\t100% { opacity: 1; } \t} ");b.setAttribute("type","text/css"),b.appendChild(g),document.head.appendChild(b);var v=0,k=0,x=!1,T=function(){if(!x&&v==k){x=!0,document.addEventListener("reset",function(t){var e=t.target,r=e.getAttribute("o-submit")||e.getAttribute("data-o-submit"),a=f.binder.get({name:"o-submit",element:e}),n=a.scope;if(r)for(var l=e.querySelectorAll("[o-value]"),o=l.length;o--;){var i=l[o].getAttribute("o-value"),s=[n].concat(i.split("."));f.model.set(s,""),f.binder.unrender({name:"o-value",element:l[o]},"view")}},!0),document.addEventListener("submit",function(r){var e=r.target,a=e.getAttribute("o-submit")||e.getAttribute("data-o-submit");if(a){r.preventDefault();var n=f.binder.get({name:"o-submit",element:e}),l=n.scope,o=n.container,i=f.model.data[l],s=f.utility.formData(e,i),d=f.utility.getByPath(o.methods,a),c=function(t){if(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))){var r=e.getAttribute("o-auth")||e.getAttribute("data-o-auth"),a=e.getAttribute("o-action")||e.getAttribute("data-o-action"),n=e.getAttribute("o-method")||e.getAttribute("data-o-method"),l=e.getAttribute("o-enctype")||e.getAttribute("data-o-enctype");t.url=t.url||a,t.method=t.method||n,t.auth=void 0===t.auth||null===t.auth?r:t.auth,t.contentType=void 0===t.contentType||null===t.contentType?l:t.contentType,f.fetcher.fetch(t)}(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t.reset||e.hasAttribute("o-reset"))&&e.reset()};t(d.bind(o,s,r),c)}},!0),document.addEventListener("input",function(t){if("checkbox"!==t.target.type&&"radio"!==t.target.type&&"option"!==t.target.type&&"SELECT"!==t.target.nodeName&&t.target.hasAttribute("o-value")){var e=f.binder.get({name:"o-value",element:t.target});f.binder.render(e)}},!0),document.addEventListener("change",function(t){if(t.target.hasAttribute("o-value")){var e=f.binder.get({name:"o-value",element:t.target});f.binder.render(e)}},!0);var e=document.querySelector("script[o-setup]");if(e){var r=e.getAttribute("o-setup").split(/\s*,\s*/),a=document.querySelector("meta[name=\"oxe\"]");if(a&&a.hasAttribute("compiled")&&(r[1]="null",r[2]="script",f.compiled=!0,f.router.compiled=!0,f.component.compiled=!0),!r[0])throw new Error("Oxe - o-setup attribute requires a url");if(1<r.length)f.loader.load({url:r[0],method:r[2],transformer:r[1]});else{var n=document.createElement("script");n.setAttribute("src",r[0]),n.setAttribute("async","true"),n.setAttribute("type","module"),e.insertAdjacentElement("afterend",n)}}document.registerElement("o-router",{prototype:Object.create(HTMLElement.prototype)})}},E=function(e,t){if(e){k++;var r=document.createElement("script");r.setAttribute("async","true"),r.setAttribute("src",t),r.addEventListener("load",function(){v++,T()},!0),document.head.appendChild(r)}else T()},O=[],A=!("fetch"in window),S=!("assign"in Object),w=!("Promise"in window);return A&&O.push("fetch"),w&&O.push("Promise"),S&&O.push("Object.assign"),E(w||A||S,"https://cdn.polyfill.io/v2/polyfill.min.js?features="+O.join(",")),E(!("registerElement"in document)||!("content"in document.createElement("template")),"https://cdnjs.cloudflare.com/ajax/libs/document-register-element/1.7.2/document-register-element.js"),f});