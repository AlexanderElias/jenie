/*
	Name: oxe
	Version: 3.14.0
	License: MPL-2.0
	Author: Alexander Elias
	Email: alex.steven.elis@gmail.com
	This Source Code Form is subject to the terms of the Mozilla Public
	License, v. 2.0. If a copy of the MPL was not distributed with this
	file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
var _createClass=function(){function e(e,t){for(var r,n=0;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _invoke(e,t){var r=e();return r&&r.then?r.then(t):t(r)}function _invokeIgnored(e){var t=e();if(t&&t.then)return t.then(_empty)}function _empty(){}function _await(e,t,r){return r?t?t(e):e:(e=Promise.resolve(e),t?e.then(t):e)}var _async=function(){try{if(isNaN.apply(null,{}))return function(e){return function(){try{return Promise.resolve(e.apply(this,arguments))}catch(t){return Promise.reject(t)}}}}catch(t){}return function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(t){return Promise.reject(t)}}}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Oxe",t):e.Oxe=t()})(this,function(){"use strict";function t(e,t){if(e&&"AsyncFunction"===e.constructor.name)return Promise.resolve().then(function(){return e()}).then(function(e){if(t)return t(e)}).catch(console.error);var r=e();return r&&"Promise"===r.constructor.name?Promise.resolve().then(function(){return r}).then(function(e){if(t)return t(e)}).catch(console.error):t?t(r):void 0}var e=function(){function e(t){_classCallCheck(this,e),this.data={},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){if(e=e||{},e.components){var t=!0,r=!1,n=void 0;try{for(var a,l,o=e.components[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)l=a.value,this.define(l)}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}},{key:"renderSlot",value:function(e,t){var r=e.querySelectorAll("slot[name]"),n=!0,a=!1,l=void 0;try{for(var o,i=r[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value,d=s.getAttribute("name"),c=t.querySelector("[slot=\""+d+"\"]");c?s.parentNode.replaceChild(c,s):s.parentNode.removeChild(s)}}catch(e){a=!0,l=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw l}}var u=e.querySelector("slot:not([name])");if(u&&t.children.length)for(;t.firstChild;)u.parentNode.insertBefore(t.firstChild,u);u&&u.parentNode.removeChild(u)}},{key:"renderTemplate",value:function(e){var t=document.createDocumentFragment();if(e)if("string"==typeof e){var r=document.createElement("div");for(r.innerHTML=e;r.firstChild;)t.appendChild(r.firstChild)}else t.appendChild(e);return t}},{key:"renderStyle",value:function(e,t){if(e){if(window.CSS&&window.CSS.supports){if(!window.CSS.supports("(--t: black)")){var r=e.match(/--\w+(?:-+\w+)*:\s*.*?;/g),n=!0,a=!1,l=void 0;try{for(var o,i=r[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value,d=s.match(/(--\w+(?:-+\w+)*):\s*(.*?);/),c=new RegExp("var\\("+d[1]+"\\)","g");e=e.replace(d[0],""),e=e.replace(c,d[2])}}catch(e){a=!0,l=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw l}}}window.CSS.supports(":scope")||(e=e.replace(/\:scope/g,"[o-scope=\""+t+"\"]")),window.CSS.supports(":host")||(e=e.replace(/\:host/g,"[o-scope=\""+t+"\"]"))}var u=document.createElement("style"),m=document.createTextNode(e);return u.appendChild(m),u}}},{key:"created",value:function(e,t){var r=this,n=t.name+"-"+t.count++;if(Object.defineProperties(e,{scope:{enumerable:!0,value:n},status:{enumerable:!0,value:"created"}}),e.setAttribute("o-scope",n),f.model.set(n,t.model||{}),f.methods.data[n]=t.methods,!r.compiled||r.compiled&&"O-ROUTER"!==e.parentNode.nodeName){var a=r.renderTemplate(t.template),l=r.renderStyle(t.style,n);l&&a.insertBefore(l,a.firstChild),t.shadow&&"attachShadow"in document.body?e.attachShadow({mode:"open"}).appendChild(a):t.shadow&&"createShadowRoot"in document.body?e.createShadowRoot().appendChild(a):(r.renderSlot(a,e),e.appendChild(a))}f.binder.bind(e),t.created&&t.created.call(e)}},{key:"attached",value:function(e,t){t.attached&&t.attached.call(e)}},{key:"detached",value:function(e,t){t.detached&&t.detached.call(e)}},{key:"define",value:function(e){var t=this;if(!e.name)throw new Error("Oxe.component.define - requires name");if(e.name in t.data)throw new Error("Oxe.component.define - component defined");return t.data[e.name]=e,e.count=0,e.compiled=!1,e.model=e.model||{},e.shadow=e.shadow||!1,e.template=e.template||"",e.properties=e.properties||{},e.properties.status={enumerable:!0,configurable:!0,value:"define"},e.properties.model={enumerable:!0,configurable:!0,get:function(){return f.model.get(this.scope)},set:function(e){return e=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},f.model.set(this.scope,e)}},e.properties.methods={enumerable:!0,get:function(){return f.methods.data[this.scope]}},e.proto=Object.create(HTMLElement.prototype,e.properties),e.proto.attributeChangedCallback=e.attributed,e.proto.createdCallback=function(){t.created(this,e)},e.proto.attachedCallback=function(){t.attached(this,e)},e.proto.detachedCallback=function(){t.detached(this,e)},document.registerElement(e.name,{prototype:e.proto})}}]),e}(),r={extension:function(e){var t=e.lastIndexOf(".");return 0<t?e.slice(t+1):""},join:function(){return Array.prototype.join.call(arguments,"/").replace(/\/{2,}/g,"/").replace(/^(https?:\/)/,"$1/")},base:function(e){var t=window.document.querySelector("base");return e&&(t?t.href=e:(t=window.document.createElement("base"),t.href=e,window.document.head.insertBefore(t,window.document.head.firstElementChild))),t?t.href:window.location.origin+window.location.pathname},resolve:function(e,t){var r=[];if(e=e.replace(window.location.origin,""),0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//"))return e;"/"!==e.charAt(0)&&(t=t||this.base(),e=t+"/"+e,e=e.replace(window.location.origin,"")),e=e.replace(/\/{2,}/,"/"),e=e.replace(/^\//,""),e=e.replace(/\/$/,"");for(var n=e.split("/"),a=0,o=n.length;a<o;a++)if("."===n[a]||""===n[a])continue;else".."===n[a]?0<a&&r.splice(a-1,1):r.push(n[a]);return"/"+r.join("/")}},n=function(){function e(t){_classCallCheck(this,e),this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},e.base&&r.base(e.base)}}]),e}(),a={PATH:/\s*\|.*/,PREFIX:/(data-)?o-/,ROOT:/^(https?:)?\/?\//,TYPE:/(data-)?o-|-.*$/g,SPLIT_MODIFIERS:/\s|\s?,\s?/,binderNormalize:function(e){return e?e.replace(/\s+$/,"").replace(/^\s+/,"").replace(/\.{2,}/g,".").replace(/\|{2,}/g,"|").replace(/\,{2,}/g,",").replace(/\s{2,}/g," ").replace(/\s?\|\s?/,"|"):""},binderName:function(e){return e.replace(this.PREFIX,"")},binderType:function(e){return e.replace(this.TYPE,"")},binderNames:function(e){return e.replace(this.PREFIX,"").split("-")},binderValues:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?e.split("."):e.slice(0,t).split(".")},binderModifiers:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?[]:e.slice(t+1).split(this.SPLIT_MODIFIERS)},binderPath:function(e){return this.binderNormalize(e).replace(this.PATH,"")},ensureElement:function(e){e.query=e.query||"",e.scope=e.scope||document.body;var t=e.scope.querySelector(""+e.name+e.query);t||(t=document.createElement(e.name),"afterbegin"===e.position?e.scope.insertBefore(t,e.scope.firstChild):"beforeend"===e.position?e.scope.appendChild(t):e.scope.appendChild(t));var r=!0,n=!1,a=void 0;try{for(var l,o,i=e.attributes[Symbol.iterator]();!(r=(l=i.next()).done);r=!0)o=l.value,t.setAttribute(o.name,o.value)}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}return t},formData:function(e,t){for(var r=e.querySelectorAll("[o-value]"),n={},a=0,o=r.length;a<o;a++){var l=r[a],i=l.getAttribute("o-value");if(i){i=i.replace(/\s*\|.*/,"");var s=i.split(".").slice(-1);n[s]=this.getByPath(t,i)}}return n},walker:function(e,t){for(t(e),e=e.firstChild;e;)this.walker(e,t),e=e.nextSibling},replaceEachVariable:function(e,t,r,n){var a=this,o="$index",s="$"+t;a.walker(e,function(e){if(3===e.nodeType)(e.nodeValue===s||e.nodeValue===o)&&(e.nodeValue=n);else if(1===e.nodeType)for(var a,d=0,i=e.attributes.length;d<i;d++)if(a=e.attributes[d],0===a.name.indexOf("o-")||0===a.name.indexOf("data-o-")){for(var l,c=a.value,u=c.length,m=[],p="",h=0;h<u;h++)if(l=c[h],"$"===l&&c.slice(h,o.length)===o?(p+=n,h=h+o.length-1):"$"===l&&c.slice(h,s.length)===s?(p+=n,h=h+s.length-1):p+=l," "===l||"|"===l||","===l||h===u-1){if(0===p.indexOf(t)){var y=p.slice(t.length);m.push(r+"."+n+y)}else m.push(p);p=""}a.value=m.join("")}})},traverse:function(e,t,r){for(var n,a="string"==typeof t?t.split("."):t,l=a.length-1,o=0;o<l;o++){if(n=a[o],!(n in e))if("function"==typeof r)r(e,n,o,a);else return;e=e[n]}return{data:e,key:a[l]}},setByPath:function(e,t,r){for(var n,a="string"==typeof t?t.split("."):t,l=a.length-1,o=0;o<l;o++)n=a[o],n in e||(isNaN(a[o+1])?e[n]={}:e[n]=[]),e=e[n];return e[a[l]]=r},getByPath:function(e,t){for(var r,n="string"==typeof t?t.split("."):t,a=n.length-1,l=0;l<a;l++){if(r=n[l],!(r in e))return;e=e[r]}return e[n[a]]},joinDot:function(){return Array.prototype.join.call(arguments,".").replace(/\.{2,}/g,".")},ready:function(e){e&&("interactive"!==window.document.readyState&&"complete"!==window.document.readyState?window.document.addEventListener("DOMContentLoaded",function t(){e(),window.document.removeEventListener("DOMContentLoaded",t)},!0):e())}},l=function(){function e(){_classCallCheck(this,e),this.events={}}return _createClass(e,[{key:"on",value:function(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){if(e in this.events){var r=this.events[e].indexOf(t);-1!==r&&this.events[e].splice(r,1)}}},{key:"emit",value:function(e){if(e in this.events)for(var t=this.events[e],r=Array.prototype.slice.call(arguments,1),n=0,a=t.length;n<a;n++)t[n].apply(this,r)}}]),e}(),o=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.reads=[],r.writes=[],r.fps=1e3/60,r.pending=!1,r.setup(e),r}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){e=e||{},e.fps=void 0===e.fps||null===e.fps?this.fps:e.fps}},{key:"read",value:function(e,t){var r=t?e.bind(t):e;return this.reads.push(r),this.tick(),r}},{key:"write",value:function(e,t){var r=t?e.bind(t):e;return this.writes.push(r),this.tick(),r}},{key:"tick",value:function(){this.pending||(this.pending=!0,window.requestAnimationFrame(this.flush.bind(this)))}},{key:"flush",value:function(e){var t;try{t=this.runReads(this.reads,e),this.runWrites(this.writes,t)}catch(t){if(this.events.error&&this.events.error.length)this.emit("error",t);else throw t}this.pending=!1,(this.reads.length||this.writes.length)&&this.tick()}},{key:"runWrites",value:function(e,t){for(var r;r=e.shift();)if(r(),t&&e.length===t)return}},{key:"runReads",value:function(e,t){for(var r;r=e.shift();)if(r(),this.fps&&performance.now()-t>this.fps)return e.length}},{key:"remove",value:function(e,t){var r=e.indexOf(t);return!!~r&&!!e.splice(r,1)}},{key:"clear",value:function(e){return this.remove(this.reads,e)||this.remove(this.writes,e)}}]),t}(l),i=function(){function e(t){_classCallCheck(this,e),this.mime={xml:"text/xml; charset=utf-8",html:"text/html; charset=utf-8",text:"text/plain; charset=utf-8",json:"application/json; charset=utf-8",js:"application/javascript; charset=utf-8"},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this.head=e.head||null,this.method=e.method||"get",this.request=e.request,this.response=e.response,this.acceptType=e.acceptType,this.contentType=e.contentType,this.responseType=e.responseType}},{key:"serialize",value:_async(function(e){var t="";for(var r in e)t=0<t.length?t+"&":t,t=t+encodeURIComponent(r)+"="+encodeURIComponent(e[r]);return t})},{key:"fetch",value:_async(function(e){var t=this,r=Object.assign({},e);if(!r.url)throw new Error("Oxe.fetcher - requires url option");if(!r.method)throw new Error("Oxe.fetcher - requires method option");if(!r.head&&t.head&&(r.head=t.head),"string"==typeof r.method&&(r.method=r.method.toUpperCase()||t.method),!r.acceptType&&t.acceptType&&(r.acceptType=t.acceptType),!r.contentType&&t.contentType&&(r.contentType=t.contentType),!r.responseType&&t.responseType&&(r.responseType=t.responseType),!r.credentials&&t.credentials&&(r.credentials=t.credentials),!r.mode&&t.mode&&(r.mode=t.mode),!r.cache&&t.cache&&(r.cahce=t.cache),!r.redirect&&t.redirect&&(r.redirect=t.redirect),!r.referrer&&t.referrer&&(r.referrer=t.referrer),!r.referrerPolicy&&t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),!r.signal&&t.signal&&(r.signal=t.signal),!r.integrity&&t.integrity&&(r.integrity=t.integrity),!r.keepAlive&&t.keepAlive&&(r.keepAlive=t.keepAlive),r.contentType)switch(r.head=r.head||{},r.contentType){case"js":r.head["Content-Type"]=t.mime.js;break;case"xml":r.head["Content-Type"]=t.mime.xml;break;case"html":r.head["Content-Type"]=t.mime.html;break;case"json":r.head["Content-Type"]=t.mime.json;break;default:r.head["Content-Type"]=r.contentType;}if(r.acceptType)switch(r.head=r.head||{},r.acceptType){case"js":r.head.Accept=t.mime.js;break;case"xml":r.head.Accept=t.mime.xml;break;case"html":r.head.Accept=t.mime.html;break;case"json":r.head.Accept=t.mime.json;break;default:r.head.Accept=r.acceptType;}return _invoke(function(){if(r.body)return _invokeIgnored(function(){if("GET"===r.method){var e=r.url+"?";return _await(t.serialize(r.body),function(t){r.url=e+t})}"json"===r.contentType&&(r.body=JSON.stringify(r.body))})},function(){var e=!1;return _invoke(function(){if("function"==typeof t.request){var n=Object.assign({},r);return _await(t.request(n),function(t){return!1===t?(e=!0,r):void("object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.assign(r,t))})}},function(n){if(e)return n;var a=Object.assign({},r);return a.head&&(a.headers=a.head,delete a.head),_await(window.fetch(r.url,a),function(e){return r.code=e.status,r.message=e.statusText,_invoke(function(){return r.responseType?_await(e["buffer"===r.responseType?"arrayBuffer":r.responseType](),function(e){r.body=e}):void(r.body=e.body)},function(){var e=!1;return _invoke(function(){if(t.response){var n=Object.assign({},r);return _await(t.response(n),function(t){return!1===t?(e=!0,r):void("object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.assign(r,t))})}},function(t){return e?t:r})})})})})})},{key:"post",value:_async(function(e){var t=this;return e.method="post",t.fetch(e)})},{key:"get",value:_async(function(e){var t=this;return e.method="get",t.fetch(e)})},{key:"put",value:_async(function(e){var t=this;return e.method="put",t.fetch(e)})},{key:"head",value:_async(function(e){var t=this;return e.method="head",t.fetch(e)})},{key:"patch",value:_async(function(e){var t=this;return e.method="patch",t.fetch(e)})},{key:"delete",value:_async(function(e){var t=this;return e.method="delete",t.fetch(e)})},{key:"options",value:_async(function(e){var t=this;return e.method="options",t.fetch(e)})},{key:"connect",value:_async(function(e){var t=this;return e.method="connect",t.fetch(e)})}]),e}(),s=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data=[],e.location={},e.ran=!1,e.element=null,e.contain=!1,e.compiled=!1,document.addEventListener("click",e.clickListener.bind(e),!0),window.addEventListener("popstate",e.stateListener.bind(e),!0),e}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){e=e||{},this.after=void 0===e.after?this.after:e.after,this.before=void 0===e.before?this.before:e.before,this.element=void 0===e.element?this.element:e.element,this.contain=void 0===e.contain?this.contain:e.contain,this.external=void 0===e.external?this.external:e.external,e.routes&&this.add(e.routes),this.route(window.location.href,{replace:!0})}},{key:"scroll",value:function(e,t){window.scroll(e,t)}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"redirect",value:function(e){window.location.href=e}},{key:"add",value:function(e){if(!e)throw new Error("Oxe.router.add - requires data parameter");else if(e.constructor===Object){if(!e.path)throw new Error("Oxe.router.add - route path required");if(!e.component)throw new Error("Oxe.router.add - route component required");this.data.push(e)}else if(e.constructor===Array)for(var t=0,r=e.length;t<r;t++)this.add(e[t])}},{key:"remove",value:function(e){for(var t=0,r=this.data.length;t<r;t++)e===this.data[t].path&&this.data.splice(t,1)}},{key:"get",value:function(e){for(var t,r=0,n=this.data.length;r<n;r++)if(t=this.data[r],e===t.path)return t}},{key:"find",value:function(e){for(var t,r=0,n=this.data.length;r<n;r++)if(t=this.data[r],this.isPath(t.path,e))return t}},{key:"filter",value:function(e){for(var t,r=[],n=0,a=this.data.length;n<a;n++)t=this.data[n],this.isPath(t.path,e)&&r.push(t);return r}},{key:"isPath",value:function(e,t){return("/"!==e.slice(0,1)&&(e=r.resolve(e)),!!t)&&("String"===t.constructor.name?new RegExp("^"+e.replace(/{\*}/g,"(?:.*)").replace(/{(\w+)}/g,"([^/]+)")+"(/)?$").test(t||"/"):"RegExp"===t.constructor.name?t.test(e):void 0)}},{key:"toParameterObject",value:function(e,t){var r={};if(!e||!t||"/"===e||"/"===t)return r;for(var n=/{|}/g,a=/{(\w+)}/,o=t.split("/"),s=e.split("/"),d=0,i=s.length;d<i;d++)if(a.test(s[d])){var l=s[d].replace(n,"");r[l]=o[d]}return r}},{key:"toQueryString",value:function(e){var t="?";for(var r in e){var n=e[r];t+=r+"="+n+"&"}return"&"===t.slice(-1)&&(t=t.slice(0,-1)),t}},{key:"toQueryObject",value:function(e){var t={};0===e.indexOf("?")&&(e=e.slice(1));for(var r,n=e.split("&"),a=0,o=n.length;a<o;a++)r=n[a].split("="),r[0]&&r[1]&&(t[r[0]]=r[1]);return t}},{key:"toLocationObject",value:function(){return{port:window.location.port||"",host:window.location.host||"",hash:window.location.hash||"",href:window.location.href||"",origin:window.location.origin||"",search:window.location.search||"",pathname:window.location.pathname||"",hostname:window.location.hostname||"",protocol:window.location.protocol||"",username:window.location.username||"",password:window.location.password||""}}},{key:"render",value:function(e){f.utility.ready(function(){if(e.title&&(document.title=e.title),e.description&&f.utility.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"description\"]",attributes:[{name:"name",value:"description"},{name:"content",value:e.description}]}),e.keywords&&f.utility.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"keywords\"]",attributes:[{name:"name",value:"keywords"},{name:"content",value:e.keywords}]}),!this.element&&(this.element=this.element||"o-router","string"==typeof this.element&&(this.element=document.body.querySelector(this.element)),!this.element))throw new Error("Oxe.router.render - missing o-router element");if(!e.element)if(e.load&&f.loader.load(e.load),!e.component)throw new Error("Oxe.router.render - missing route component");else"String"===e.component.constructor.name?e.element=document.createElement(e.component):"Object"===e.component.constructor.name&&(f.component.define(e.component),e.element=this.compiled?this.element.firstChild:document.createElement(e.component.name));if(!this.compiled){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e.element)}this.scroll(0,0),this.emit("routed")}.bind(this))}},{key:"route",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){t=t||{},t.query&&(e+=this.toQueryString(t.query)),this.compiled||window.history[t.replace?"replaceState":"pushState"]({path:e},"",e);var r=this.toLocationObject();if(r.route=this.find(r.pathname),!r.route)throw new Error("Oxe.router.route - route not found");if(r.title=r.route.title||"",r.query=this.toQueryObject(r.search),r.parameters=this.toParameterObject(r.route.path,r.pathname),"function"==typeof this.before){var n=this.before(r);if(!1===n)return}return r.route.handler?route.handler(r.route):r.route.redirect?this.redirect(r.route.redirect):void(this.location=r,this.emit("routing"),this.render(r.route))})},{key:"stateListener",value:function(t){var e=t&&t.state?t.state.path:window.location.href;this.route(e,{replace:!0})}},{key:"clickListener",value:function(t){var e=t.path?t.path[0]:t.target,r=e.parentNode;if(this.contain){for(;r&&"O-ROUTER"!==r.nodeName;)r=r.parentNode;if("O-ROUTER"!==r.nodeName)return}if(!(t.metaKey||t.ctrlKey||t.shiftKey)){for(;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e.hasAttribute("download")||e.hasAttribute("external")||e.hasAttribute("o-external")||0===e.href.indexOf("tel:")||0===e.href.indexOf("ftp:")||0===e.href.indexOf("file:")||0===e.href.indexOf("mailto:")||0!==e.href.indexOf(window.location.origin)||this.external&&("RegExp"===this.external.constructor.name&&this.external.test(e.href)||"Function"===this.external.constructor.name&&this.external(e.href)||"String"===this.external.constructor.name&&this.external===e.href)||(this.location.href!==e.href&&this.route(e.href),!this.compiled&&t.preventDefault())}}}]),t}(l),d={_innerHandler:function(e,t,r){return"\\"===r[t-1]?void 0:"'"===e?"\\'":"\""===e?"\\\"":"\t"===e?"\\t":"\n"===e?"\\n":void 0},_updateString:function(e,t,r){return r.slice(0,t)+e+r.slice(t+1)},_updateIndex:function(e,t){return t+e.length-1},template:function(e){var t=e.indexOf("`"),r=e.indexOf("`",t+1);if(-1===t||-1===r)return e;for(var n,a,l=0,o=0,i=e,s=!1,d=0;d<i.length;d++)a=i[d],"`"===a&&"\\"!==i[d-1]?s?(l++,n="'",s=!1,i=this._updateString(n,d,i),d=this._updateIndex(n,d)):(o++,n="'",s=!0,i=this._updateString(n,d,i),d=this._updateIndex(n,d)):s&&(n=this._innerHandler(a,d,i))&&(i=this._updateString(n,d,i),d=this._updateIndex(n,d));if(i=i.replace(/\${(.*?)}/g,"'+$1+'"),o==l)return i;throw new Error("Oxe - Transformer missing backtick")},patterns:{exps:/export\s+(?:default|var|let|const)?\s+/g,imps:/import(?:\s+(?:\*\s+as\s+)?\w+\s+from)?\s+(?:'|").*?(?:'|")/g,imp:/import(?:\s+(?:\*\s+as\s+)?(\w+)\s+from)?\s+(?:'|")(.*?)(?:'|")/},getImports:function(e,t){for(var n,a=[],o=e.match(this.patterns.imps)||[],s=0,i=o.length;s<i;s++)n=o[s].match(this.patterns.imp),a[s]={raw:n[0],name:n[1],url:r.resolve(n[2],t),extension:r.extension(n[2])},a[s].extension||(a[s].url+=".js");return a},getExports:function(e){for(var t,r=[],n=e.match(this.patterns.exps)||[],a=0,o=n.length;a<o;a++)t=n[a],r[a]={raw:t,default:-1!==t.indexOf("default")};return r},replaceImports:function(e,t){if(!t.length)return e;for(var r=0,n=t.length;r<n;r++){var a=t[r],l=(a.name?"var "+a.name+" = ":"")+"$LOADER.data['"+a.url+"'].result";e=e.replace(a.raw,l)}return e},replaceExports:function(e,t){if(!t.length)return e;if(1===t.length)return e.replace(t[0].raw,"return ");var r,n;for(e="var $EXPORT = {};\n"+e,e+="\nreturn $EXPORT;\n",(r=0,n=t.length);r<n;r++)e=e.replace(t[r].raw,"$EXPORT.");return e},ast:function(e){var t={};return t.url=e.url,t.raw=e.text,t.cooked=e.text,t.base=t.url.slice(0,t.url.lastIndexOf("/")+1),t.imports=this.getImports(t.raw,t.base),t.exports=this.getExports(t.raw),t.cooked=this.replaceImports(t.cooked,t.imports),t.cooked=this.replaceExports(t.cooked,t.exports),t}},c=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data={},e.ran=!1,e.methods={},e.transformers={},document.addEventListener("load",e.listener.bind(e),!0),e}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){if(e=e||{},this.methods=e.methods||this.methods,this.transformers=e.transformers||this.transformers,e.loads)for(var t;t=e.loads.shift();)this.load(t)}},{key:"execute",value:function(e){var t="'use strict';\n\n"+(e.ast?e.ast.cooked:e.text),r=new Function("$LOADER","window",t);e.result=r(this,window)}},{key:"ready",value:function(e){if(e&&e.listener&&e.listener.length)for(var t;t=e.listener.shift();)t(e)}},{key:"fetch",value:function(e){var t=this,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)if(200<=r.status&&300>r.status||304==r.status)e.text=r.responseText,"js"===e.extension?e.transformer?t.transform(e,function(){t.execute(e),t.ready(e)}):(t.execute(e),t.ready(e)):t.ready(e);else throw new Error(r.responseText)},r.open("GET",e.url),r.send()}},{key:"transform",value:function(e,t){if(("es"===e.transformer||"est"===e.transformer)&&(e.text=d.template(e.text)),("es"===e.transformer||"esm"===e.transformer)&&(e.ast=d.ast(e)),e.ast&&e.ast.imports.length)for(var r=0,n=e.ast.imports.length,a=function(){r++,r===n&&t()},l=0;l<n;l++)this.load({listener:a,method:e.method,url:e.ast.imports[l].url,transformer:e.transformer});else t()}},{key:"attach",value:function(e){var t=document.createElement(e.tag);for(var r in e.attributes["o-load"]="true",e.attributes)t.setAttribute(r,e.attributes[r]);document.head.appendChild(t)}},{key:"js",value:function(e){"fetch"===e.method||"es"===e.transformer||"est"===e.transformer||"esm"===e.transformer?this.fetch(e):"script"===e.method?this.attach({tag:"script",attributes:{type:"text/javascript",src:e.url,async:"true"}}):this.attach({tag:"script",attributes:{type:"module",src:e.url,async:"true"}})}},{key:"css",value:function(e){"fetch"===e.method?this.fetch(e):this.attach({tag:"link",attributes:{href:e.url,type:"text/css",rel:"stylesheet"}})}},{key:"load",value:function(e,t){if("string"==typeof e?e={url:e}:t=e.listener,e.url=r.resolve(e.url),e.url in this.data){var n=this.data[e.url];return void(n.listener.length?t&&n.listener.push(t):(t&&n.listener.push(t),this.ready(n)))}this.data[e.url]=e,e.extension=e.extension||r.extension(e.url),e.listener=t?[t]:[],e.method=e.method||this.methods[e.extension],e.transformer=e.transformer||this.transformers[e.extension],"js"===e.extension?this.js(e):"css"===e.extension?this.css(e):this.fetch(e)}},{key:"listener",value:function(t){var e=t.target;if(1===e.nodeType&&e.hasAttribute("o-load")){var n=r.resolve(e.src||e.href),a=this.data[n];this.ready(a)}}}]),t}(l),u={alt:function(e){f.batcher.write(function(){e.element.alt=""})},each:function(e){f.batcher.write(function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)})},href:function(e){f.batcher.write(function(){e.element.href=""})},class:function(e){f.batcher.write(function(){var t=e.names.slice(1).join("-");e.element.classList.remove(t)})},html:function(e){f.batcher.write(function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)})},on:function(e){e.element.removeEventListener(e.names[1],e.cache,!1)},css:function(e){f.batcher.write(function(){e.element.style.cssText=""})},required:function(e){f.batcher.write(function(){e.element.required=!1})},src:function(e){f.batcher.write(function(){e.element.src=""})},text:function(e){f.batcher.write(function(){e.element.innerText=""})},value:function(e){f.batcher.write(function(){var t,r,n,a,l;if("SELECT"===e.element.nodeName)for(l=e.element.options,t=0,r=l.length;t<r;t++)a=l[t],a.selected=!1;else if("radio"===e.element.type)for(n="input[type=\"radio\"][o-value=\""+e.path+"\"]",l=e.element.parentNode.querySelectorAll(n),(t=0,r=l.length);t<r;t++)a=l[t],a.checked=0===t;else"checkbox"===e.element.type?(e.element.checked=!1,e.element.value=!1):e.element.value=""})},default:function(){}},m={required:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.required===t||(t=f.utility.binderModifyData(e,t),f.batcher.write(function(){e.element.required=t}))})},disable:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.disabled===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.disabled=t}))})},enable:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.disabled===!t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.disabled=!t}))})},hide:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.hidden===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.hidden=t}))})},show:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.hidden===!t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.hidden=!t}))})},read:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.readOnly===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.readOnly=t}))})},write:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.readOnly===!t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.readOnly=!t}))})},html:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.innerHTML===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.innerHTML=t}))})},class:function(e){f.batcher.write(function(){var t=f.model.get(e.keys),r=e.names.slice(1).join("-");t=f.binder.modifyData(e,t),e.element.classList.toggle(r,t)})},on:function(t){f.batcher.write(function(){var r=f.utility.getByPath(f.methods.data,t.scope+"."+t.path);"function"!=typeof r||(t.cache?t.element.removeEventListener(t.names[1],t.cache):t.cache=function(n){return Promise.resolve().then(function(){for(var e,a=[n],o=0,i=t.modifiers.length;o<i;o++){e=t.modifiers[o].split("."),e.unshift(t.scope);var l=Oxe.model.get(e);a.push(l)}return r.apply(t.container,a)}).catch(console.error)},t.element.addEventListener(t.names[1],t.cache))})},css:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.style.cssText===t||(1<e.names.length&&(t=e.names.slice(1).join("-")+": "+t+";"),t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.style.cssText=t}))})},text:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);t=void 0===t||null===t?"":t,t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?t=JSON.stringify(t):t&&"string"!=typeof t&&(t+=""),t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.innerText=t})})},each:function(e){f.batcher.read(function(){var t=f.model.get(e.keys),r=!!t&&t.constructor===Array,n=!!t&&t.constructor===Object;t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(r&&e.element.children.length===t.length||n&&e.element.children.length===Object.keys(t).length||(t=f.binder.modifyData(e,t),f.batcher.write(function(){for(n&&(t=Object.keys(t));e.element.children.length!==t.length;)if(e.element.children.length>t.length)e.element.removeChild(e.element.children[e.element.children.length-1]);else if(e.element.children.length<t.length){var a,l=e.cache.cloneNode(!0);r?a=e.element.children.length:n&&(a=t[e.element.children.length]),f.utility.replaceEachVariable(l,e.names[1],e.path,a),f.binder.bind(l,e.container),e.element.appendChild(l)}})))})},value:function(e){f.batcher.read(function(){var t,r,n,a,o,l,i,s,d=e.element.type,c=e.element.nodeName;if(e.setup){if(e.setup=!1,l=f.model.get(e.keys),"SELECT"===c){for(s=e.element.options,n=e.element.multiple,l=void 0===l?n?[]:"":l,(a=0,o=s.length);a<o;a++)if(!s[a].disabled)if(!s[a].selected)a!==o-1||n||(l=s[0].value||s[0].innerText||"");else if(n)l.push(s[a].value||s[a].innerText||"");else{l=s[a].value||s[a].innerText||"";break}}else if("radio"===d)for(l=void 0===l?0:l,r="input[type=\"radio\"][o-value=\""+e.value+"\"]",s=e.container.querySelectorAll(r),(a=0,o=s.length);a<o;a++)i=s[a],i.checked=a===l;else if("file"===d)for(l=void 0===l?[]:l,a=0,o=l.length;a<o;a++)e.element.files[a]=l[a];else"checkbox"===d?(t="checked",l=void 0!==l&&l):(t="value",l=void 0===l?"":l);t&&(e.element[t]=f.binder.modifyData(e,l))}else if("SELECT"===c){for(n=e.element.multiple,s=e.element.options,l=n?[]:"",(a=0,o=s.length);a<o;a++)if(i=s[a],i.selected)if(n)l.push(i.value||i.innerText);else{l=i.value||i.innerText;break}}else if("radio"===d)for(r="input[type=\"radio\"][o-value=\""+e.value+"\"]",s=e.container.querySelectorAll(r),(a=0,o=s.length);a<o;a++)i=s[a],e.element===i?(l=a,i.checked=!0):i.checked=!1;else if("file"===d)for(l=l||[],a=0,o=e.element.files.length;a<o;a++)l[a]=e.element.files[a];else l="checkbox"===d?e.element.checked:e.element.value;void 0!==l&&f.model.set(e.keys,l)})},default:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element[e.type]===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element[e.type]=t}))})}},p=function(){function e(){_classCallCheck(this,e),this.data={},this.values=[],this.submits=[]}return _createClass(e,[{key:"set",value:function(e){if(e=e||{},!e.name)throw new Error("Oxe.binder.set - missing name");if(!e.value)throw new Error("Oxe.binder.set - missing value");if(!e.element)throw new Error("Oxe.binder.set - missing element");if(!e.container)throw new Error("Oxe.binder.set - missing container");return e.scope=e.scope||e.container.getAttribute("o-scope"),e.path=e.path||f.utility.binderPath(e.value),e.type=e.type||f.utility.binderType(e.name),e.names=e.names||f.utility.binderNames(e.name),e.values=e.values||f.utility.binderValues(e.value),e.modifiers=e.modifiers||f.utility.binderModifiers(e.value),e.keys=e.keys||[e.scope].concat(e.values),("o-value"===e.name||"data-o-value"===e.name)&&(e.setup=!0),(0===e.name.indexOf("o-each")||0===e.name.indexOf("data-o-each"))&&(e.cache=e.element.removeChild(e.element.firstElementChild)),e}},{key:"get",value:function(e){var t;if("o-value"===e.name)t=this.values;else if("o-submit"===e.name)t=this.submits;else{if(!(e.scope in this.data))return null;if(!(e.path in this.data[e.scope]))return null;t=this.data[e.scope][e.path]}var r=!0,n=!1,a=void 0;try{for(var l,o,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0)if(o=l.value,o.element===e.element&&o.name===e.name)return o}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}return null}},{key:"add",value:function(e){var t;"o-value"===e.name?t=this.values:"o-submit"===e.name?t=this.submits:(!(e.scope in this.data)&&(this.data[e.scope]={}),!(e.path in this.data[e.scope])&&(this.data[e.scope][e.path]=[]),t=this.data[e.scope][e.path]),t.push(e)}},{key:"remove",value:function(e){var t;if("o-value"===e.name)t=this.values;else if("o-submit"===e.name)t=this.submits;else{if(!(e.scope in this.data))return;if(!(e.path in this.data[e.scope]))return;t=this.data[e.scope][e.path]}for(var r=0,n=t.length;r<n;r++)if(t[r].element===e.element)return t.splice(r,1)}},{key:"each",value:function(e,t){var r,n,n=e.split("."),r=n[0],a=this.data[r],o=n.slice(1).join(".");for(var s in a)if(""===o||0===s.indexOf(o)&&(s===o||"."===s.charAt(o.length)))for(var d,c=a[s],u=0,i=c.length;u<i;u++)d=c[u],t(d)}},{key:"unrender",value:function(e){e.type in u&&u[e.type](e)}},{key:"render",value:function(e){e.type in m?m[e.type](e):m.default(e)}},{key:"modifyData",value:function(e,t){if(!e.modifiers.length)return t;if(!f.methods.data[e.scope])return t;var r=!0,n=!1,a=void 0;try{for(var l,o=e.modifiers[Symbol.iterator]();!(r=(l=o.next()).done);r=!0){var i=l.value,s=f.methods.data[e.scope];s&&(t=s[i].call(e.container,t))}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return t}},{key:"skipChildren",value:function(e){if("STYLE"===e.nodeName&&"SCRIPT"===e.nodeName&&"OBJECT"===e.nodeName&&"IFRAME"===e.nodeName)return!0;var t=!0,r=!1,n=void 0;try{for(var a,l,o=e.attributes[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)if(l=a.value,0===l.name.indexOf("o-each")||0===l.name.indexOf("data-o-each"))return!0}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return!1}},{key:"eachElement",value:function(e,t,r){var n=t.getAttribute("o-scope")||t.getAttribute("data-o-scope"),a=e.getAttribute("o-scope")||e.getAttribute("data-o-scope");if("O-ROUTER"===e.nodeName||e.hasAttribute("o-scope")||e.hasAttribute("o-setup")||e.hasAttribute("o-router")||e.hasAttribute("o-compiled")||e.hasAttribute("o-external")||e.hasAttribute("data-o-scope")||e.hasAttribute("data-o-setup")||e.hasAttribute("data-o-router")||e.hasAttribute("data-o-compiled")||e.hasAttribute("data-o-external")||r.call(this,e),(!a||a===n)&&!1===this.skipChildren(e)){var l=!0,o=!1,i=void 0;try{for(var s,d,c=e.children[Symbol.iterator]();!(l=(s=c.next()).done);l=!0)d=s.value,this.eachElement(d,t,r)}catch(e){o=!0,i=e}finally{try{!l&&c.return&&c.return()}finally{if(o)throw i}}}}},{key:"eachAttribute",value:function(e,t){var r=!0,n=!1,a=void 0;try{for(var l,o,i=e.attributes[Symbol.iterator]();!(r=(l=i.next()).done);r=!0)o=l.value,(o&&o.value&&0===o.name.indexOf("o-")||0===o.name.indexOf("data-o-"))&&t.call(this,o)}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}}},{key:"unbind",value:function(e,t){t=t||e,this.eachElement(e,t,function(e){this.eachAttribute(e,function(r){var n=this.get({element:e,container:t,name:r.name,value:r.value,scope:t.getAttribute("o-scope"),path:f.utility.binderPath(r.value)});this.remove(n),this.unrender(n)})})}},{key:"bind",value:function(e,t){t=t||e,this.eachElement(e,t,function(e){this.eachAttribute(e,function(r){var n=this.set({element:e,container:t,name:r.name,value:r.value});this.add(n),this.render(n)})})}}]),e}(),h={splice:function(){var e=arguments[0],t=arguments[1],r=2<arguments.length?arguments.length-2:0;if("number"!=typeof e||"number"!=typeof t)return[];0>e?(e=this.length+e,e=0<e?e:0):e=e<this.length?e:this.length,0>t?t=0:t>this.length-e&&(t=this.length-e);var n=this.$meta.length,a=void 0,l=void 0,o=void 0,i=void 0,s=2,d=arguments.length-s,c=this.slice(e,t);if(i=n-1-e,0<i)for(l=e;i--;)a=l++,o=d&&s<d?arguments[s++]:this.$meta[l],this.$meta[a]=h.create(o,this.$meta.listener,this.$meta.path+a),this.$meta.listener(this.$meta[a],this.$meta.path+a,a);if(0<r)for(;r--;)a=this.length,this.$meta[a]=h.create(arguments[s++],this.$meta.listener,this.$meta.path+a),h.defineProperty(this,a),this.$meta.listener(this.length,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(this.$meta[a],this.$meta.path+a,a);if(0<t)for(;t--;)this.$meta.length--,this.length--,a=this.length,this.$meta.listener(a,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(void 0,this.$meta.path+a,a);return c},arrayProperties:function(){var e=this;return{push:{value:function(){if(!arguments.length)return this.length;for(var t=0,r=arguments.length;t<r;t++)e.splice.call(this,this.length,0,arguments[t]);return this.length}},unshift:{value:function(){if(!arguments.length)return this.length;for(var t=0,r=arguments.length;t<r;t++)e.splice.call(this,0,0,arguments[t]);return this.length}},pop:{value:function(){return this.length?e.splice.call(this,this.length-1,1):void 0}},shift:{value:function(){return this.length?e.splice.call(this,0,1):void 0}},splice:{value:e.splice}}},objectProperties:function(){var e=this;return{$get:{value:function(e){return this[e]}},$set:{value:function(t,r){if(r!==this[t]){var n=e.create(r,this.$meta.listener,this.$meta.path+t);return this.$meta[t]=n,e.defineProperty(this,t),this.$meta.listener(n,this.$meta.path+t,t),n}}},$remove:{value:function(t){if(t in this){if(this.constructor===Array)return e.splice.call(this,t,1);var r=this[t];return delete this.$meta[t],delete this[t],this.$meta.listener(void 0,this.$meta.path+t,t),r}}}}},property:function(e){var t=this;return{enumerable:!0,configurable:!0,get:function(){return this.$meta[e]},set:function(r){r!==this.$meta[e]&&(this.$meta[e]=t.create(r,this.$meta.listener,this.$meta.path+e),this.$meta.listener(this[e],this.$meta.path+e,e,this))}}},defineProperty:function(e,t){return Object.defineProperty(e,t,this.property(t))},create:function(e,t,r){var n=this;if(!e||e.constructor!==Object&&e.constructor!==Array)return e;r=r?r+".":"";var a=void 0,l=void 0,o=e.constructor,i=e.constructor(),s=e.constructor();if(s.$meta={value:e.constructor()},s.$meta.value.path=r,s.$meta.value.listener=t,o===Array){for(a=0,l=e.length;a<l;a++)s.$meta.value[a]=n.create(e[a],t,r+a),s[a]=n.property(a);var d=n.arrayProperties();for(a in d)s[a]=d[a]}if(o===Object)for(a in e)s.$meta.value[a]=n.create(e[a],t,r+a),s[a]=n.property(a);var c=n.objectProperties();for(a in c)s[a]=c[a];return Object.defineProperties(i,s)}},y=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.GET=2,e.SET=3,e.REMOVE=4,e.ran=!1,e.data=h.create({},e.listener),e}return _inherits(t,e),_createClass(t,[{key:"traverse",value:function(e,t,r){"string"==typeof t&&(t=[t]);for(var n,a=this.data,o=t[t.length-1],s=0,i=t.length-1;s<i;s++){if(!(t[s]in a)){if(e===this.GET||e===this.REMOVE)return;e===this.SET&&a.$set(t[s],isNaN(t[s+1])?{}:[])}a=a[t[s]]}return e===this.SET?n=a.$set(o,r):e===this.GET?n=a[o]:e===this.REMOVE&&(n=a[o],a.$remove(o)),n}},{key:"get",value:function(e){return this.traverse(this.GET,e)}},{key:"remove",value:function(e){return this.traverse(this.REMOVE,e)}},{key:"set",value:function(e,t){return this.traverse(this.SET,e,t)}},{key:"listener",value:function(e,t){var r=void 0===e?"unrender":"render";f.binder.each(t,function(e){f.binder[r](e)})}}]),t}(l),f={compiled:!1};Object.defineProperties(f,{window:{enumerable:!0,get:function(){return window}},document:{enumerable:!0,get:function(){return window.document}},body:{enumerable:!0,get:function(){return window.document.body}},head:{enumerable:!0,get:function(){return window.document.head}},location:{enumerable:!0,get:function(){return this.router.location}},currentScript:{enumerable:!0,get:function(){return window.document._currentScript||window.document.currentScript}},ownerDocument:{enumerable:!0,get:function(){return(window.document._currentScript||window.document.currentScript).ownerDocument}},global:{enumerable:!0,value:{}},methods:{enumerable:!0,value:{data:{}}},utility:{enumerable:!0,value:a},setup:{enumerable:!0,value:function(e){this._setup||(this._setup=!0,e=e||{},e.listener&&e.listener.before&&e.listener.before(),e.general&&this.general.setup(e.general),e.fetcher&&this.fetcher.setup(e.fetcher),e.loader&&this.loader.setup(e.loader),e.component&&this.component.setup(e.component),e.router&&this.router.setup(e.router),e.listener&&e.listener.after&&e.listener.after())}}}),Object.defineProperty(f,"general",{enumerable:!0,value:new n}),Object.defineProperty(f,"batcher",{enumerable:!0,value:new o}),Object.defineProperty(f,"loader",{enumerable:!0,value:new c}),Object.defineProperty(f,"binder",{enumerable:!0,value:new p}),Object.defineProperty(f,"fetcher",{enumerable:!0,value:new i}),Object.defineProperty(f,"component",{enumerable:!0,value:new e}),Object.defineProperty(f,"router",{enumerable:!0,value:new s}),Object.defineProperty(f,"model",{enumerable:!0,value:new y});var b=document.createElement("style"),g=document.createTextNode(" \to-router, o-router > :first-child { \t\tdisplay: block; \t} \to-router, [o-scope] { \t\tanimation: o-transition 150ms ease-in-out; \t} \t@keyframes o-transition { \t\t0% { opacity: 0; } \t\t100% { opacity: 1; } \t} ");b.setAttribute("type","text/css"),b.appendChild(g),document.head.appendChild(b);var v=0,k=0,x=!1,T=function(){if(!x&&v==k){x=!0,document.addEventListener("reset",function(t){var e=t.target,r=e.getAttribute("o-submit")||e.getAttribute("data-o-submit"),n=f.binder.get({name:"o-submit",element:e}),a=n.scope;if(r)for(var l=e.querySelectorAll("[o-value]"),o=l.length;o--;){var i=l[o].getAttribute("o-value"),s=[a].concat(i.split("."));f.model.set(s,""),f.binder.unrender({name:"o-value",element:l[o]},"view")}},!0),document.addEventListener("submit",function(r){var e=r.target,n=e.getAttribute("o-submit")||e.getAttribute("data-o-submit");if(n){r.preventDefault();var a=f.binder.get({name:"o-submit",element:e}),l=a.scope,o=a.container,i=f.model.data[l],s=f.utility.formData(e,i),d=f.utility.getByPath(o.methods,n),c=function(t){if(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))){var r=e.getAttribute("o-auth")||e.getAttribute("data-o-auth"),n=e.getAttribute("o-action")||e.getAttribute("data-o-action"),a=e.getAttribute("o-method")||e.getAttribute("data-o-method"),l=e.getAttribute("o-enctype")||e.getAttribute("data-o-enctype");t.url=t.url||n,t.method=t.method||a,t.auth=void 0===t.auth||null===t.auth?r:t.auth,t.contentType=void 0===t.contentType||null===t.contentType?l:t.contentType,f.fetcher.fetch(t)}(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t.reset||e.hasAttribute("o-reset"))&&e.reset()};t(d.bind(o,s,r),c)}},!0),document.addEventListener("input",function(t){if("checkbox"!==t.target.type&&"radio"!==t.target.type&&"option"!==t.target.type&&"SELECT"!==t.target.nodeName&&t.target.hasAttribute("o-value")){var e=f.binder.get({name:"o-value",element:t.target});f.binder.render(e)}},!0),document.addEventListener("change",function(t){if(t.target.hasAttribute("o-value")){var e=f.binder.get({name:"o-value",element:t.target});f.binder.render(e)}},!0);var e=document.querySelector("script[o-setup]");if(e){var r=e.getAttribute("o-setup").split(/\s*,\s*/),n=document.querySelector("meta[name=\"oxe\"]");if(n&&n.hasAttribute("compiled")&&(r[1]="null",r[2]="script",f.compiled=!0,f.router.compiled=!0,f.component.compiled=!0),!r[0])throw new Error("Oxe - o-setup attribute requires a url");if(1<r.length)f.loader.load({url:r[0],method:r[2],transformer:r[1]});else{var a=document.createElement("script");a.setAttribute("src",r[0]),a.setAttribute("async","true"),a.setAttribute("type","module"),e.insertAdjacentElement("afterend",a)}}document.registerElement("o-router",{prototype:Object.create(HTMLElement.prototype)})}},E=function(e,t){if(e){k++;var r=document.createElement("script");r.setAttribute("async","true"),r.setAttribute("src",t),r.addEventListener("load",function(){v++,T()},!0),document.head.appendChild(r)}else T()},O=[],A=!("fetch"in window),w=!("assign"in Object),S=!("Promise"in window);return A&&O.push("fetch"),S&&O.push("Promise"),w&&O.push("Object.assign"),E(S||A||w,"https://cdn.polyfill.io/v2/polyfill.min.js?features="+O.join(",")),E(!("registerElement"in document)||!("content"in document.createElement("template")),"https://cdnjs.cloudflare.com/ajax/libs/document-register-element/1.7.2/document-register-element.js"),f});