/*!
    Name: oxe
    Version: 5.2.9
    License: MPL-2.0
    Author: Alexander Elias
    Email: alex.steven.elis@gmail.com
    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Oxe=e()}(this,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function t(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))}function e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function n(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const i=["push","pop","splice","shift","unshift","reverse"],r=function(t,e,n,r,o){return r instanceof Array&&-1!==i.indexOf(o)&&t.push(e.bind(null,r,n.slice(0,-1))),r[o]},o=function(t,e,n,i,r,o){return i[r]===o||(i[r]=s(o,e,n+r,t),t.length&&Promise.resolve().then((()=>{let e;for(;e=t.shift();)e()})).catch(console.error)),!0},s=function(t,e,n,i){if(n=n||"",(i=i||[]).push(e.bind(null,t,n)),t instanceof Object==!1&&t instanceof Array==!1)return!n&&i.length&&Promise.resolve().then((()=>{let t;for(;t=i.shift();)t()})).catch(console.error),t;if(n=n?n+".":"",t instanceof Array)for(let r=0;r<t.length;r++)i.push(e.bind(null,t[r],n+r)),t[r]=s(t[r],e,n+r,i);else if(t instanceof Object)for(let r in t)i.push(e.bind(null,t[r],n+r)),t[r]=s(t[r],e,n+r,i);return!n&&i.length&&Promise.resolve().then((()=>{let t;for(;t=i.shift();)t()})).catch(console.error),new Proxy(t,{get:r.bind(r,i,e,n),set:o.bind(o,i,e,n)})};var a=function(t,e,n,i){if(n=n||"",(i=i||[]).push(e.bind(null,t,n)),t instanceof Object==!1&&t instanceof Array==!1)return!n&&i.length&&Promise.resolve().then((()=>{let t;for(;t=i.shift();)t()})).catch(console.error),t;let a;if(n=n?n+".":"",t instanceof Array){a=[];for(let r=0;r<t.length;r++)i.push(e.bind(null,t[r],`${n}${r}`)),a[r]=s(t[r],e,`${n}${r}`,i)}else if(t instanceof Object){a={};for(let r in t)i.push(e.bind(null,t[r],`${n}${r}`)),a[r]=s(t[r],e,`${n}${r}`,i)}return!n&&i.length&&Promise.resolve().then((()=>{let t;for(;t=i.shift();)t()})).catch(console.error),new Proxy(a,{get:r.bind(r,i,e,n),set:o.bind(o,i,e,n)})};function c(t,e,n){const i="string"==typeof e?e.split("."):e,r=i.length-(n||0);let o=t;for(let t=0;t<r;t++)o=o[i[t]];return o}var l=Object.freeze({reads:[],writes:[],options:{time:1e3/60,pending:!1},setup:function(t={}){this.options.time=t.time||this.options.time},tick:function(t){return new Promise(((e,n)=>{requestAnimationFrame((i=>{Promise.resolve().then(t.bind(this,i)).then(e).catch(n)}))}))},schedule:function(){return t(this,void 0,void 0,(function*(){if(!this.options.pending)return this.options.pending=!0,this.tick(this.flush)}))},flush:function(e){return t(this,void 0,void 0,(function*(){let t,n;for(console.log("reads before:",this.reads.length),console.log("write before:",this.writes.length);t=this.reads.shift();)if(t&&(yield t()),performance.now()-e>this.options.time)return console.log("read max"),this.tick(this.flush);for(;n=this.writes.shift();)if(n&&(yield n()),performance.now()-e>this.options.time)return console.log("write max"),this.tick(this.flush);if(console.log("reads after:",this.reads.length),console.log("write after:",this.writes.length),0!==this.reads.length||0!==this.writes.length)return performance.now()-e>this.options.time?this.tick(this.flush):this.flush(e);this.options.pending=!1}))},remove:function(t,e){const n=t.indexOf(e);return!!~n&&!!t.splice(n,1)},clear:function(t){return this.remove(this.reads,t)||this.remove(this.writes,t)},batch:function(e){const n=this;e&&(e.read||e.write)&&(n.reads.push((()=>t(this,void 0,void 0,(function*(){return e.read?e.read.call(e,e):void 0})))),n.writes.push((()=>t(this,void 0,void 0,(function*(){return e.write?e.write.call(e,e):void 0})))),n.schedule().catch(console.error))}});function d(t,e){if(t===e)return!0;const n=typeof t,i=typeof e;if(n!==i)return!1;if("object"!==n||"object"!==i)return t===e;if(t.constructor!==e.constructor)return!1;const r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(let n=0;n<r.length;n++){const i=r[n];if(!d(t[i],e[i]))return!1}return!0}const h=t=>(null==t?void 0:t.constructor)===Boolean,u=t=>"string"==typeof t?t:JSON.stringify(t),f=t=>""===t||"string"!=typeof t&&"number"!=typeof t?NaN:Number(t),p=function(t,e){try{if((null==(n=t)?void 0:n.constructor)===Map)return(t=>new Map(JSON.parse(t)))(e);if((t=>(null==t?void 0:t.constructor)===Date)(t))return(t=>new Date(Number(t)))(e);if((t=>(null==t?void 0:t.constructor)===Array)(t))return(t=>JSON.parse(t))(e);if((t=>(null==t?void 0:t.constructor)===String)(t))return u(e);if((t=>(null==t?void 0:t.constructor)===Object)(t))return(t=>JSON.parse(t))(e);if((t=>(null==t?void 0:t.constructor)===Number)(t))return f(e);if(h(t))return(t=>"true"===t)(e)}catch(t){return e}var n};function m(t){let e;return{read(){e=t.data,e!==t.target.disabled||(this.write=!1)},write(){t.target.disabled=e,t.target.setAttribute("disabled",e)}}}function g(t){let e;return{read(){e=!t.data,e!==t.target.disabled||(this.write=!1)},write(){t.target.disabled=e,t.target.setAttribute("disabled",e)}}}function w(t){let e;return{read(){e=t.data,e!==t.target.hidden||(this.write=!1)},write(){t.target.hidden=e,t.target.setAttribute("hidden",e)}}}function b(t){let e;return{read(){e=t.data,e!==t.target.required||(this.write=!1)},write(){t.target.required=e,t.target.setAttribute("required",e)}}}const v=function(e,n){var i;return t(this,void 0,void 0,(function*(){n.preventDefault();const t=n.target.querySelectorAll("*");for(let e=0,n=t.length;e<n;e++){const n=t[e],r=n.nodeName,o=n.type;if(!o&&"TEXTAREA"!==r||"submit"===o||"button"===o||!o)continue;const s=null===(i=J.get(n))||void 0===i?void 0:i.get("value");s?s.data="select-one"===o?null:"select-multiple"===o?[]:"radio"!==o&&"checkbox"!==o&&"":"select-one"===o||"select-multiple"===o?n.selectedIndex=null:"radio"===o||"checkbox"===o?n.checked=!1:n.value=null}const r=e.data;"function"==typeof r&&(yield r.call(e.container,n))}))};function y(t){let e;return{read(){e=!t.data,e!==t.target.hidden||(this.write=!1)},write(){t.target.hidden=e,t.target.setAttribute("hidden",e)}}}function x(t){let e,n,i;return{read(){if(e=t.data,t.names.length>1){n="",i=t.names.slice(1);for(let t=0,e=i.length;t<e;t++)0===t?n=i[t].toLowerCase():n+=i[t].charAt(0).toUpperCase()+i[t].slice(1).toLowerCase()}},write(){t.names.length>1?t.target.style[n]=e||"":t.target.style.cssText=e||""}}}const E=function(e,n){return t(this,void 0,void 0,(function*(){n.preventDefault();const t={},i=n.target.querySelectorAll("*");for(let e=0,n=i.length;e<n;e++){const n=i[e];if(!n.type&&"TEXTAREA"!==n.nodeName||"submit"===n.type||"button"===n.type||!n.type)continue;const r=n.attributes["o-value"],o=J.get(r);console.warn("todo: need to get a value for selects");const s=o?o.data:n.files?n.attributes.multiple?Array.prototype.slice.call(n.files):n.files[0]:n.value,a=n.name||(o?o.values[o.values.length-1]:null);a&&(t[a]=s)}const r=e.data;"function"==typeof r&&(yield r.call(e.container,t,n)),e.getAttribute("reset")&&n.target.reset()}))};function O(t,e){for(let n=0;n<t.length;n++)if(d(t[n],e))return n;return-1}const C=/\s?\|\s?/,A=/\s?,\s?|\s+/,k=/[._$a-zA-Z0-9[\]]+/g,L={},T={data:new Map,prefix:"o-",syntaxEnd:"}}",syntaxStart:"{{",prefixReplace:new RegExp("^o-"),syntaxReplace:new RegExp("{{|}}","g"),binders:{checked:function(t,e){if(!t.meta.busy)return t.meta.busy=!0,t.meta.setup||(t.meta.setup=!0,t.target.addEventListener("input",(e=>J.render(t,e)))),{read(n){if(n.data=t.data,h(n.data)?n.checked=e?t.target.checked:n.data:(n.value=t.getAttribute("value"),n.checked=d(n.data,n.value)),e)return h(n.data)?t.data=n.checked:t.data=n.value,t.meta.busy=!1,void(n.write=!1)},write(e){t.target.checked=e.checked,t.target.setAttribute("checked",e.checked),t.meta.busy=!1}}}.bind(L),class:function(t){let e,n;return{read(){e=t.data,t.names.length>1&&(n=t.names.slice(1).join("-"))},write(){null==e?n?t.target.classList.remove(n):t.target.setAttribute("class",""):n?t.target.classList.toggle(n,e):t.target.setAttribute("class",e)}}}.bind(L),css:x.bind(L),default:function(t){let e;return{read(){e=u(t.data),e!==t.target[t.type]||(this.write=!1)},write(){t.target[t.type]=e,t.target.setAttribute(t.type,e)}}}.bind(L),disable:m.bind(L),disabled:m.bind(L),each:function(t){return t.meta.busy?void console.log("busy each"):(t.meta.busy=!0,{read:function(){if(!t.meta.setup){for(t.meta.keys=[],t.meta.counts=[],t.meta.busy=!1,t.meta.setup=!1,t.meta.targetLength=0,t.meta.currentLength=0,t.meta.templateString=t.target.innerHTML,t.meta.templateLength=t.target.childNodes.length;t.target.firstChild;)t.target.removeChild(t.target.firstChild);t.meta.setup=!0}t.meta.keys=Object.keys(t.data||[]),t.meta.targetLength=t.meta.keys.length,t.meta.currentLength===t.meta.targetLength&&(t.meta.busy=!1,this.write=!1)},write:function(){var e;if(t.meta.currentLength>t.meta.targetLength)for(;t.meta.currentLength>t.meta.targetLength;){let e=t.meta.templateLength;for(;e--;){const e=t.target.lastChild;Promise.resolve().then((()=>J.remove(e))),t.target.removeChild(e)}t.meta.currentLength--}else if(t.meta.currentLength<t.meta.targetLength)for(;t.meta.currentLength<t.meta.targetLength;){const n=t.meta.currentLength,i=t.meta.keys[n],r=`${t.path}.${i}`;let o=t.meta.templateString;const s=t.names.length>4?4:t.names.length;for(let a=1;a<s;a++){const s=new RegExp(`\\b(${t.names[a]})\\b`,"g"),c=new RegExp(`{{.*?\\b(${t.names[a]})\\b.*?}}`,"g");let l;switch(a){case 1:l=r;break;case 2:l=n;break;case 3:l=i}null===(e=o.match(c))||void 0===e||e.forEach((t=>o=o.replace(t,t.replace(s,l))))}const a=(new DOMParser).parseFromString(o,"text/html").body;let c;for(;c=a.firstChild;)t.target.appendChild(c),Promise.resolve().then((()=>J.add(c,t.container)));t.meta.currentLength++}t.meta.busy=!1}})}.bind(L),enable:g.bind(L),enabled:g.bind(L),hide:w.bind(L),hidden:w.bind(L),href:function(t){let e;return{read(){e=t.data||"",e!==t.target.href||(this.write=!1)},write(){t.target.href=e,t.target.setAttribute("href",e)}}}.bind(L),html:function(t){let e;return{read(){e=t.data,null==e?e="":"object"==typeof e?e=JSON.stringify(e):"string"!=typeof e&&(e=String(e))},write(){for(;t.target.firstChild;){const e=t.target.removeChild(t.target.firstChild);J.remove(e)}const n=document.createDocumentFragment(),i=document.createElement("div");for(i.innerHTML=e;i.firstElementChild;)J.add(i.firstElementChild,{container:t.container}),n.appendChild(i.firstElementChild);t.target.appendChild(n)}}}.bind(L),on:function(t){const e=t.names[1];t.target[`on${e}`]=null,t.meta.method&&t.target.removeEventListener(e,t.meta.method),t.meta.method=e=>{t.data.call(t.container,e)},t.target.addEventListener(e,t.meta.method)}.bind(L),read:function(t){let e;return{read(){e=t.data,e!==t.target.readOnly||(this.write=!1)},write(){t.target.readOnly=e,t.target.setAttribute("readonly",e)}}}.bind(L),require:b.bind(L),required:b.bind(L),reset:function(t){"function"==typeof t.data?(t.meta.method&&t.target.removeEventListener("reset",t.meta.method,!1),t.meta.method=v.bind(this,t),t.target.addEventListener("reset",t.meta.method,!1)):console.warn(`Oxe - binder ${t.name}="${t.value}" invalid type function required`)}.bind(L),show:y.bind(L),showed:y.bind(L),style:x.bind(L),submit:function(t){t.target.submit=null,"function"==typeof t.data?(t.meta.method&&t.target.removeEventListener("submit",t.meta.method),t.meta.method=E.bind(this,t),t.target.addEventListener("submit",t.meta.method)):console.warn(`Oxe - binder ${t.name}="${t.value}" invalid type function required`)}.bind(L),text:function(t){let e;return{read(){e=u(t.data),e!==t.target.textContent||(this.write=!1)},write(){t.target.textContent=e}}}.bind(L),value:function(t,e){const n=t.target.type;if(!t.meta.busy)return t.meta.busy=!0,t.meta.setup||(t.meta.setup=!0,t.target.addEventListener("input",(()=>function(t){const e=t.target.type;if("select-one"===e||"select-multiple"===e);else if("checkbox"===e||"radio"===e)t.data=p(t.data,t.target.value);else if("number"===e)t.data=f(t.target.value);else if("file"===e){const e=t.target.multiple;t.data=e?[...t.target.files]:t.target.files[0]}else t.data=t.target.value}(t)))),"select-one"===n||"select-multiple"===n?{read(n){console.log(e),console.log(t.target),console.log(t.data),n.selectBinder=t,n.select=t.target,n.options=t.target.options,n.multiple=t.target.multiple,n.multiple&&t.data instanceof Array==!1?n.data=t.data=[]:n.data=t.data,n.selects=[],n.unselects=[];for(let i=0;i<n.options.length;i++){const r=n.options[i],o=r.selected,s=r.attributes["o-value"]||r.attributes.value,a=J.get(s)||{get data(){return r.value},set data(t){r.value=t}};if(n.multiple){const i=O(t.data,a.data);e?o&&-1===i?t.data.push(a.data):o||-1===i||t.data.splice(i,1):-1===i?n.unselects.push(r):n.selects.push(r)}else{const i=d(t.data,a.data);if(e){if(o&&!i)t.data=a.data;else if(!o&&i)continue}else i?n.selects.push(r):n.unselects.push(r)}}},write(e){const{selects:n,unselects:i}=e;n.forEach((t=>{t.selected=!0,console.log(t,t.selected,"select")})),i.forEach((t=>{t.selected=!1,console.log(t,t.selected,"unselects")})),t.meta.busy=!1}}:"checkbox"===n||"radio"===n?{read(e){e.data=t.data},write(e){e.value=u(e.data),t.target.value=e.value,t.target.setAttribute("value",e.value),t.meta.busy=!1}}:"number"===n?{read(e){e.data=t.data,e.value=f(t.target.value)},write(e){e.value=u(e.data),t.target.value=e.value,t.target.setAttribute("value",e.value),t.meta.busy=!1}}:"file"===n?{read(e){e.data=t.data,e.multiple=t.target.multiple,e.value=e.multiple?[...t.target.files]:t.target.files[0]}}:{read(e){e.data=t.data,e.value=t.target.value},write(e){var n;t.target.value=null!==(n=e.data)&&void 0!==n?n:"",t.meta.busy=!1}};console.log("busy value")}.bind(L),write:function(t){let e;return{read(){e=!t.data,e!==t.target.readOnly||(this.write=!1)},write(){t.target.readOnly=e,t.target.setAttribute("readonly",e)}}}.bind(L)},setup(e={}){return t(this,void 0,void 0,(function*(){const{binders:t}=e;if(t)for(const e in t)e in this.binders==!1&&(this.binders[e]=t[e].bind(this))}))},get(t){return this.data.get(t)},render(t,...e){const n=t.type in this.binders?t.type:"default",i=this.binders[n](...e);l.batch(i)},unbind(t){return this.data.remove(t)},bind(t,e,n,i,r){var o;const s=this;if(n=n.replace(this.syntaxReplace,"").trim(),(e=e.replace(this.syntaxReplace,"").replace(this.prefixReplace,"").trim()).startsWith("on")&&(e="on-"+e.slice(2)),n.startsWith("'")||n.startsWith('"'))return void(t.textContent=n.slice(1,-1));if(/^NaN$|^[0-9]/.test(n))return void(t.textContent=n);/[._$a-z0-9[\]]+/.test(n)||console.error("Oxe.binder - value is not valid");const a=n.split(C),l=n.match(k)||[],d=e.split("-"),h=a[0]?a[0].split("."):[],u=a[1]?a[1].split(A):[],f=d[0],p=l[0],m=(null===(o=l[0])||void 0===o?void 0:o.split("."))||[],g=m.slice(-1)[0],w=Object.freeze({type:f,keys:m,name:e,value:n,names:d,pipes:u,values:h,meta:{},target:t,container:i,render:s.render,get path(){return p},getAttribute(e){var n,i;const r=t.getAttributeNode(e);if(!r)return;const o=null===(i=null===(n=s.data)||void 0===n?void 0:n.get(r))||void 0===i?void 0:i.data;return void 0===o?r.value:o},get data(){return c(i.model,m,1)[g]},set data(t){c(i.model,m,1)[g]=t}});this.data.set(r||w.target,w),t.nodeName.includes("-")?window.customElements.whenDefined(t.nodeName.toLowerCase()).then((()=>this.render(w))):this.render(w)},remove(t){const e=t.attributes;for(let t=0;t<e.length;t++){const n=e[t];this.unbind(n)}for(this.unbind(t),t=t.firstChild;t;)this.remove(t),t=t.nextSibling},add(t,e){const n=t.nodeType;if(n===Node.TEXT_NODE){const n=t.textContent.indexOf(this.syntaxStart);if(-1===n)return;0!==n&&(t=t.splitText(n));const i=t.textContent.indexOf(this.syntaxEnd);if(-1===i)return;if(i+this.syntaxStart.length!==t.textContent.length){const n=t.splitText(i+this.syntaxEnd.length);this.bind(t,"text",t.textContent,e),this.add(n)}else this.bind(t,"text",t.textContent,e)}else if(n===Node.ELEMENT_NODE){let n=!1;const i=t.attributes;for(let r=0;r<i.length;r++){const o=i[r],{name:s,value:a}=o;(0===s.indexOf(this.prefix)||-1!==s.indexOf(this.syntaxStart)&&-1!==s.indexOf(this.syntaxEnd)||-1!==a.indexOf(this.syntaxStart)&&-1!==a.indexOf(this.syntaxEnd))&&(0!==s.indexOf("each")&&0!==s.indexOf(`${this.prefix}each`)||(n=!0),this.bind(t,s,a,e,o))}if(n)return;for(t=t.firstChild;t;)this.add(t,e),t=t.nextSibling}}};var j,$,S,M,P,R,N,q,D,U,W,_,I,z,F,B,J=Object.freeze(Object.assign(Object.assign({},L),T)),G=new(M=class{constructor(){j.set(this,new Map),$.set(this,document.createElement("style")),S.set(this,!window.CSS||!window.CSS.supports||!window.CSS.supports("(--t: black)")),e(this,$).appendChild(document.createTextNode(":not(:defined){visibility:hidden;}")),e(this,$).setAttribute("title","oxe"),document.head.appendChild(e(this,$))}scope(t,e){return e.replace(/\t|\n\s*/g,"").replace(/(^\s*|}\s*|,\s*)(\.?[a-zA-Z_-]+)/g,`$1${t} $2`).replace(/:host/g,t)}transform(t){if(!e(this,S)){const e=t.match(/--\w+(?:-+\w+)*:\s*.*?;/g)||[];for(let n=0;n<e.length;n++){const i=e[n].match(/(--\w+(?:-+\w+)*):\s*(.*?);/),r=new RegExp("var\\("+i[1]+"\\)","g");t=(t=t.replace(i[0],"")).replace(r,i[2])}}return t}detach(t){const n=e(this,j).get(t);n&&0!==n.count&&(n.count--,0===n.count&&e(this,$).removeChild(n.node))}attach(t,n){if(e(this,j).has(t))e(this,j).get(t).count++;else{const i=this.node(t,n);e(this,j).set(t,{count:1,node:i}),e(this,$).appendChild(i)}}node(t,e){return document.createTextNode(this.scope(t,this.transform(e||"")))}},j=new WeakMap,$=new WeakMap,S=new WeakMap,M);class H extends HTMLElement{constructor(){super(),P.set(this,G),R.set(this,J),N.set(this,void 0),q.set(this,void 0),D.set(this,void 0),U.set(this,void 0),W.set(this,void 0),_.set(this,void 0),I.set(this,void 0),z.set(this,void 0),F.set(this,void 0),B.set(this,void 0),n(this,D,"boolean"==typeof this.constructor.adopt&&this.constructor.adopt),n(this,U,"boolean"==typeof this.constructor.shadow&&this.constructor.shadow),n(this,_,"function"==typeof this.constructor.adopted?this.constructor.adopted:function(){}),n(this,I,"function"==typeof this.constructor.created?this.constructor.created:function(){}),n(this,z,"function"==typeof this.constructor.attached?this.constructor.attached:function(){}),n(this,F,"function"==typeof this.constructor.detached?this.constructor.detached:function(){}),n(this,B,"function"==typeof this.constructor.attributed?this.constructor.attributed:function(){}),n(this,q,this.nodeName.toLowerCase()),n(this,W,a(this.constructor.model,((t,e)=>{J.data.forEach((t=>{t.container===this&&t.path.includes(e)&&J.render(t)}))})))}static get observedAttributes(){return this.attributes}static set observedAttributes(t){this.attributes=t}get css(){return e(this,P)}get model(){return e(this,W)}get binder(){return e(this,R)}render(){const t=document.createElement("template");t.innerHTML=this.constructor.template;const i=t.content.cloneNode(!0);if(!0===e(this,D)){let t=this.firstElementChild;for(;t;)J.add(t,this),t=t.nextElementSibling}e(this,U)&&"attachShadow"in document.body?n(this,N,this.attachShadow({mode:"open"})):e(this,U)&&"createShadowRoot"in document.body?n(this,N,this.createShadowRoot()):(!function(t,e){const n=e.querySelectorAll("slot[name]"),i=e.querySelector("slot:not([name])");for(let e=0;e<n.length;e++){const i=n[e],r=i.getAttribute("name"),o=t.querySelector('[slot="'+r+'"]');o?i.parentNode.replaceChild(o,i):i.parentNode.removeChild(i)}if(t.children.length)for(;t.firstChild;)i?i.parentNode.insertBefore(t.firstChild,i):t.removeChild(t.firstChild);i&&i.parentNode.removeChild(i)}(this,i),n(this,N,this));let r=i.firstElementChild;for(;r;)J.add(r,this),e(this,N).appendChild(r),r=i.firstElementChild}attributeChangedCallback(t,n,i){Promise.resolve().then((()=>e(this,B).call(this,t,n,i)))}adoptedCallback(){Promise.resolve().then((()=>e(this,_).call(this)))}disconnectedCallback(){e(this,P).detach(e(this,q)),Promise.resolve().then((()=>e(this,F).call(this)))}connectedCallback(){e(this,P).attach(e(this,q),this.constructor.css),this.CREATED?Promise.resolve().then((()=>e(this,z).call(this))):(this.CREATED=!0,this.render(),Promise.resolve().then((()=>e(this,I).call(this))).then((()=>e(this,z).call(this))))}}function Y(t){t=t||window.location.href;const e=document.createElement("a");e.href=t;const n={path:"",href:e.href,host:e.host,port:e.port,hash:e.hash,search:e.search,protocol:e.protocol,hostname:e.hostname,pathname:"/"===e.pathname[0]?e.pathname:"/"+e.pathname};return n.path=n.pathname+n.search+n.hash,n}P=new WeakMap,R=new WeakMap,N=new WeakMap,q=new WeakMap,D=new WeakMap,U=new WeakMap,W=new WeakMap,_=new WeakMap,I=new WeakMap,z=new WeakMap,F=new WeakMap,B=new WeakMap,H.model={},H.template="",H.attributes=[];var K=new class{constructor(){this.option={},this.types=["json","text","blob","formData","arrayBuffer"],this.mime={xml:"text/xml; charset=utf-8",html:"text/html; charset=utf-8",text:"text/plain; charset=utf-8",json:"application/json; charset=utf-8",js:"application/javascript; charset=utf-8"}}setup(e={}){return t(this,void 0,void 0,(function*(){this.option.path=e.path,this.option.method=e.method,this.option.origin=e.origin,this.option.request=e.request,this.option.headers=e.headers,this.option.response=e.response,this.option.acceptType=e.acceptType,this.option.credentials=e.credentials,this.option.contentType=e.contentType,this.option.responseType=e.responseType}))}method(e,n){return t(this,void 0,void 0,(function*(){return n="string"==typeof n?{url:n}:n,this.fetch(Object.assign(Object.assign({},n),{method:e}))}))}get(){return t(this,arguments,void 0,(function*(){return this.method("get",...arguments)}))}put(){return t(this,arguments,void 0,(function*(){return this.method("put",...arguments)}))}post(){return t(this,arguments,void 0,(function*(){return this.method("post",...arguments)}))}head(){return t(this,arguments,void 0,(function*(){return this.method("head",...arguments)}))}patch(){return t(this,arguments,void 0,(function*(){return this.method("patch",...arguments)}))}delete(){return t(this,arguments,void 0,(function*(){return this.method("delete",...arguments)}))}options(){return t(this,arguments,void 0,(function*(){return this.method("options",...arguments)}))}connect(){return t(this,arguments,void 0,(function*(){return this.method("connect",...arguments)}))}serialize(e){return t(this,void 0,void 0,(function*(){let t="";for(const n in e)t=t.length>0?t+"&":t,t=t+encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t}))}fetch(e={}){return t(this,void 0,void 0,(function*(){const{option:t}=this,n=Object.assign(Object.assign({},t),e);if(n.path&&"string"==typeof n.path&&"/"===n.path.charAt(0)&&(n.path=n.path.slice(1)),n.origin&&"string"==typeof n.origin&&"/"===n.origin.charAt(n.origin.length-1)&&(n.origin=n.origin.slice(0,-1)),n.path&&n.origin&&!n.url&&(n.url=n.origin+"/"+n.path),!n.method)throw new Error("Oxe.fetcher - requires method option");if(!n.url)throw new Error("Oxe.fetcher - requires url or origin and path option");if(n.aborted=!1,n.headers=n.headers||{},n.method=n.method.toUpperCase(),Object.defineProperty(n,"abort",{enumerable:!0,value:()=>(n.aborted=!0,n)}),n.contentType)switch(n.contentType){case"js":n.headers["Content-Type"]=this.mime.js;break;case"xml":n.headers["Content-Type"]=this.mime.xml;break;case"html":n.headers["Content-Type"]=this.mime.html;break;case"json":n.headers["Content-Type"]=this.mime.json;break;default:n.headers["Content-Type"]=n.contentType}if(n.acceptType)switch(n.acceptType){case"js":n.headers.Accept=this.mime.js;break;case"xml":n.headers.Accept=this.mime.xml;break;case"html":n.headers.Accept=this.mime.html;break;case"json":n.headers.Accept=this.mime.json;break;default:n.headers.Accept=n.acceptType}if("function"==typeof t.request&&(yield t.request(n)),n.aborted)return;n.body&&("GET"===n.method?n.url=n.url+"?"+(yield this.serialize(n.body)):"json"===n.contentType&&(n.body=JSON.stringify(n.body)));const i=yield window.fetch(n.url,n);if(Object.defineProperties(n,{result:{enumerable:!0,value:i},code:{enumerable:!0,value:i.status}}),n.responseType){const t="buffer"===n.responseType?"arrayBuffer":n.responseType||"",e=i.headers.get("content-type")||i.headers.get("Content-Type")||"";let r;if(r="json"===t&&-1!==e.indexOf("json")?"json":t||"text",-1===this.types.indexOf(r))throw new Error("Oxe.fetch - invalid responseType value");n.body=yield i[r]()}else n.body=i.body;return"function"==typeof t.response&&(yield t.response(n)),n.aborted?void 0:n}))}};const X=function(t,e){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i)}return t};function Z(t,e){t=t===(e=e||t)?void 0:t;const n="function"==typeof e?e.prototype:e,i="function"==typeof e?e:e.constructor,r=function(){const t=this;if(i.apply(t,arguments),"super"in t){if("_super"in t)return X(t._super,t);throw new Error("Class this.super call required")}return t};if(t){X(r,t),r.prototype=Object.create(t.prototype),X(r.prototype,n);const e=function(){return this._super||(this._super=window.Reflect.construct(t,arguments,this.constructor),X(this.super,t.prototype)),this._super};Object.defineProperty(r.prototype,"super",{enumerable:!1,writable:!0,value:e})}else r.prototype=Object.create({}),X(r.prototype,n);return Object.defineProperty(r.prototype,"constructor",{enumerable:!1,writable:!0,value:r}),r}const Q="ftp://",V="file://",tt="http://",et="https://";function nt(...t){let e=(t[0]||"").trim();for(let n=1;n<t.length;n++){const i=t[n].trim();"/"!==e[e.length-1]&&"/"!==i[0]&&(e+="/"),e+=i}const n=window.document.createElement("a");return n.href=e,n.href}function it(t){return new globalThis.Promise((function(e,n){const i=new Blob([t],{type:"text/javascript"}),r=document.createElement("script");"noModule"in r&&(r.type="module"),r.onerror=function(t){n(t),r.remove(),URL.revokeObjectURL(r.src)},r.onload=function(t){e(t),r.remove(),URL.revokeObjectURL(r.src)},r.src=URL.createObjectURL(i),document.head.appendChild(r)}))}var rt="\n\n    ^export\\b\n    (?:\n        \\s*(default)\\s*\n    )?\n    (?:\n        \\s*(var|let|const|function|class)\\s*\n    )?\n    (\\s*?:{\\s*)?\n    (\n        (?:\\w+\\s*,?\\s*)*\n    )?\n    (\\s*?:}\\s*)?\n\n".replace(/\s+/g,""),ot="\n\n    import\n    (?:\n        (?:\n            \\s+(\\w+)(?:\\s+|\\s*,\\s*)\n        )\n        ?\n        (?:\n            (?:\\s+(\\*\\s+as\\s+\\w+)\\s+)\n            |\n            (?:\n                \\s*{\\s*\n                (\n                    (?:\n                        (?:\n                            (?:\\w+)\n                            |\n                            (?:\\w+\\s+as\\s+\\w+)\n                        )\n                        \\s*,?\\s*\n                    )\n                    *\n                )\n                \\s*}\\s*\n            )\n        )\n        ?\n        from\n    )\n    ?\n    \\s*\n    (?:\"|')\n    (.*?)\n    (?:'|\")\n    (?:\\s*;)?\n   \n".replace(/\s+/g,"");const st=new RegExp(ot),at=new RegExp(rt),ct=new RegExp(ot,"g"),lt=new RegExp(rt,"gm"),dt=/[^\\]`(.|[\r\n])*?[^\\]`/g,ht=function(e){return t(this,void 0,void 0,(function*(){if(!e)throw new Error("Oxe.load - url required");if(e=nt(e),"boolean"!=typeof window.DYNAMIC_SUPPORT&&(yield it('try { window.DYNAMIC_SUPPORT = true; import("data:text/javascript;base64,"); } catch (e) { /*e*/ }'),window.DYNAMIC_SUPPORT=window.DYNAMIC_SUPPORT||!1),!0===window.DYNAMIC_SUPPORT)return console.log("native import"),yield it(`window.MODULES["${e}"] = import("${e}");`),window.MODULES[e];if(console.log("not native import"),window.MODULES[e])return window.MODULES[e];if("boolean"!=typeof window.REGULAR_SUPPORT){const t=document.createElement("script");window.REGULAR_SUPPORT="noModule"in t}let t;window.REGULAR_SUPPORT?(console.log("noModule: yes"),t=`import * as m from "${e}"; window.MODULES["${e}"] = m;`):(console.log("noModule: no"),t=yield function(t){return new globalThis.Promise(((e,n)=>{const i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status||0===i.status?e(i.responseText):n(new Error(`failed to import: ${t}`)))};try{i.open("GET",t,!0),i.send()}catch(e){n(new Error(`failed to import: ${t}`))}}))}(e),t=function(t,e){let n=`window.MODULES["${e}"] = Promise.all([\n`,i="]).then(function ($MODULES) {\n";const r=t.match(dt)||[];for(let e=0;e<r.length;e++){const n=r[e];t=t.replace(n,n.replace(/'/g,"\\'").replace(/^([^\\])?`/,"$1'").replace(/([^\\])?`$/,"$1'").replace(/\${(.*)?}/g,"'+$1+'").replace(/\n/g,"\\n"))}const o=e.slice(0,e.lastIndexOf("/")+1),s=t.match(ct)||[];for(let e=0,r=s.length;e<r;e++){const r=s[e].match(st);if(!r)continue;const c=r[0],l=r[1];let d=r[4]||r[5];d="/"===(a=d).slice(0,"/".length)||"//"===a.slice(0,"//".length)||"://"===a.slice(0,"://".length)||a.slice(0,Q.length)===Q||a.slice(0,V.length)===V||a.slice(0,tt.length)===tt||a.slice(0,et.length)===et?nt(d):nt(o,d),n=`${n} \twindow.LOAD("${d}"),\n`,i=`${i}var ${l} = $MODULES[${e}].default;\n`,t=t.replace(c,"")||[]}var a;let c=!1;const l=t.match(lt)||[];for(let e=0,n=l.length;e<n;e++){const n=l[e].match(at)||[],i=n[0],r=n[1]||"",o=n[2]||"",s=n[3]||"";r&&(c?t=t.replace(i,`$DEFAULT = ${o} ${s}`):(c=!0,t=t.replace(i,`var $DEFAULT = ${o} ${s}`)))}return c&&(t+="\n\nreturn { default: $DEFAULT };\n"),'"use strict";\n'+n+i+t+"});"}(t,e));try{yield it(t)}catch(t){throw new Error(`Oxe.load - failed to import: ${e}`)}return this.modules[e]}))};function ut(t,e){if(!t)throw new Error("Oxe.define - name required");if(!t)throw new Error("Oxe.define - constructor required");if("string"==typeof e)return Promise.resolve().then((()=>ht(e))).then((e=>ut(t,e.default)));"function"==typeof e?window.customElements.define(t,e):e instanceof Array?e.forEach(ut.bind(this,t)):ut(t,Z(H,e))}function ft(t,e,n,i){(i=i||{}).detail=void 0===n?null:n,t.dispatchEvent(new window.CustomEvent(e,i))}function pt(t){if("string"==typeof(t=t||window.location.search)){const e={};0===t.indexOf("?")&&(t=t.slice(1));const n=t.split("&");for(let t=0;t<n.length;t++){const[i,r]=n[t].split("=");void 0!==i&&void 0!==r&&(i in e?"string"==typeof e[i]?e[i]=[r]:e[i].push(r):e[i]=r)}return e}{const e=[];for(const n in t){const i=t[n];e.push(`${n}=${i}`)}return`?${e.join("&")}`}}var mt,gt,wt,bt,vt,yt,xt,Et;window.LOAD=window.LOAD||ht,window.MODULES=window.MODULES||{};const Ot=function(t){const e=document.createElement("a");return e.href=t,e.pathname};var Ct=new(Et=class{constructor(){this.data=[],mt.set(this,void 0),gt.set(this,void 0),wt.set(this,void 0),bt.set(this,void 0),vt.set(this,void 0),yt.set(this,void 0),xt.set(this,"push")}setup(i={}){var r,o,s;return t(this,void 0,void 0,(function*(){n(this,bt,i.after),n(this,vt,i.before),n(this,yt,i.external),n(this,xt,null!==(r=i.mode)&&void 0!==r?r:"push"),n(this,gt,null!==(o=i.contain)&&void 0!==o&&o),n(this,mt,null!==(s=i.folder)&&void 0!==s?s:"./routes"),n(this,wt,i.target instanceof Element?i.target:document.body.querySelector(i.target||"main")),"href"!==e(this,xt)&&(window.addEventListener("popstate",this.state.bind(this),!0),window.document.addEventListener("click",this.click.bind(this),!0)),yield this.add(i.routes),yield this.route(window.location.href,{mode:"replace"})}))}compareParts(t,e,n){const i=[],r=t.split(n),o=e.split(n);o.length>1&&""===o[o.length-1]&&o.pop(),r.length>1&&""===r[r.length-1]&&r.pop();for(let t=0,e=r.length;t<e;t++)if("("===r[t].slice(0,1)&&")"===r[t].slice(-1)){if("(~)"===r[t])return!0;-1!==r[t].indexOf("~")?o[t]&&i.push(o[t]):i.push(o[t])}else{if(r[t]!==o[t])return!1;i.push(r[t])}return i.join(n)===o.join(n)}compare(t,e){return e=Ot(e),t=Ot(t),!!this.compareParts(t,e,"/")||!!this.compareParts(t,e,"-")}scroll(t,e){window.scroll(t,e)}back(){return t(this,void 0,void 0,(function*(){window.history.back()}))}forward(){return t(this,void 0,void 0,(function*(){window.history.forward()}))}redirect(e){return t(this,void 0,void 0,(function*(){window.location.href=e}))}add(i){return t(this,void 0,void 0,(function*(){if(!i)throw new Error("Oxe.router.add - options required");if("string"==typeof i){let t=i,r=i;const o=`r-${i.replace("/","-")}`;""===r.slice(-3)&&(r=r.slice(0,-3)),"index"===r.slice(-5)&&(r=r.slice(0,-5)),"index/"===r.slice(-6)&&(r=r.slice(0,-6)),"./"===r.slice(0,2)&&(r=r.slice(2)),"/"!==r.slice(0,1)&&(r="/"+r),""!==t.slice(-3)&&(t+=""),"./"===t.slice(0,2)&&(t=t.slice(2)),"/"!==t.slice(0,1)&&(t="/"+t),"/"===t.slice(0,1)&&(t=t.slice(1)),"/"===e(this,mt).slice(-1)&&n(this,mt,e(this,mt).slice(0,-1)),t=e(this,mt)+"/"+t,t=Ot(t),this.add({path:r,name:o,load:t})}else if(i instanceof Array)for(let t=0;t<i.length;t++)yield this.add(i[t]);else{if(!i.name)throw new Error("Oxe.router.add - name required");if(!i.path)throw new Error("Oxe.router.add - path required");if(!i.load)throw new Error("Oxe.router.add - load required");this.data.push(i)}}))}load(e){return t(this,void 0,void 0,(function*(){if(e.load&&!e.component){const t=yield ht(e.load);e.component=t.default}return e}))}remove(e){return t(this,void 0,void 0,(function*(){for(let t=0;t<this.data.length;t++)this.data[t].path===e&&this.data.splice(t,1)}))}get(e){return t(this,void 0,void 0,(function*(){for(let t=0;t<this.data.length;t++)if(this.data[t].path===e)return this.data[t]=yield this.load(this.data[t]),this.data[t]}))}filter(e){return t(this,void 0,void 0,(function*(){const t=[];for(let n=0;n<this.data.length;n++)this.compare(this.data[n].path,e)&&(this.data[n]=yield this.load(this.data[n]),t.push(this.data[n]));return t}))}find(n){return t(this,void 0,void 0,(function*(){let t;"/"===n?t="r-index":n.endsWith("/")&&(t=`r-${function(t,e){"."===(t=function(t){return t.replace(/\/+/g,"/").replace(/\/$/g,"")||"."}(t)).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(0,1)&&(t=t.slice(1));const n=t.lastIndexOf("/");return-1!==n&&(t=t.slice(n+1)),e&&t.slice(-e.length)===e&&(t=t.slice(0,-e.length)),t}(n)}-index`);const i=this.data.find((t=>t.path===n));if(i)return this.load(i);let r=n;r="/"===r.charAt(0)?r.slice(1):r,r="/"===r.charAt(r.length-1)?r.slice(0,r.length-1):r,r=r.split("/"),r.splice(-1,1,"default"),r.unshift(e(this,mt)),r=r.join("/");const o=yield this.load({path:n,name:t,load:r});return this.data.push(o),o}))}render(n){return t(this,void 0,void 0,(function*(){if(!n)throw new Error("Oxe.router.render - route required");if(!n.target){if(!n.name)throw new Error("Oxe.router.render - name required");if(!n.component)throw new Error("Oxe.router.render - component required");ut(n.name,n.component),n.target=window.document.createElement(n.name)}if(window.document.title=n.component.title||n.target.title||n.target.model.title,e(this,wt)){for(;e(this,wt).firstChild;)e(this,wt).removeChild(e(this,wt).firstChild);e(this,wt).appendChild(n.target)}window.scroll(0,0)}))}route(n,i={}){return t(this,void 0,void 0,(function*(){i.query&&(n+=pt(i.query));const t=Y(n),r=i.mode||e(this,xt),o=yield this.find(t.pathname);if(!o)throw new Error(`Oxe.router.route - missing route ${t.pathname}`);return"function"==typeof e(this,vt)&&(yield e(this,vt).call(this,t)),o.handler?o.handler(t):o.redirect?this.redirect(o.redirect):(ft(e(this,wt),"before",t),"href"===r?window.location.assign(t.path):(window.history[r+"State"]({path:t.path},"",t.path),o.title&&(window.document.title=o.title),yield this.render(o),"function"==typeof e(this,bt)&&(yield e(this,bt).call(this,t)),void ft(e(this,wt),"after",t)))}))}state(e){return t(this,void 0,void 0,(function*(){const t=e&&e.state?e.state.path:window.location.href;this.route(t,{mode:"replace"})}))}click(n){return t(this,void 0,void 0,(function*(){if(n.target.type||0!==n.button||n.defaultPrevented||n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)return;let t=n.path?n.path[0]:n.target,i=t.parentElement;if(e(this,gt)){for(;i&&i.nodeName!==e(this,wt).nodeName;)i=i.parentElement;if(i.nodeName!==e(this,wt).nodeName)return}for(;t&&"A"!==t.nodeName;)t=t.parentElement;if(!t||"A"!==t.nodeName)return;const r="tel:",o="ftp:",s="file:",a="mailto:";t.hasAttribute("download")||t.hasAttribute("external")||t.hasAttribute("o-external")||t.href.slice(0,r.length)===r||t.href.slice(0,o.length)===o||t.href.slice(0,s.length)===s||t.href.slice(0,a.length)===a||0!==t.href.slice(window.location.origin)||""!==t.hash&&t.origin===window.location.origin&&t.pathname===window.location.pathname||e(this,yt)&&(e(this,yt)instanceof RegExp&&e(this,yt).test(t.href)||"function"==typeof e(this,yt)&&e(this,yt).call(this,t.href)||"string"==typeof e(this,yt)&&e(this,yt)===t.href)||(n.preventDefault(),this.route(t.href))}))}},mt=new WeakMap,gt=new WeakMap,wt=new WeakMap,bt=new WeakMap,vt=new WeakMap,yt=new WeakMap,xt=new WeakMap,Et);"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}),"object"!=typeof window.Reflect&&"function"!=typeof window.Reflect.construct&&(window.Reflect=window.Reflect||{},window.Reflect.construct=function(t,e,n){var i=void 0===n?t:n,r=Object.create(i.prototype||Object.prototype);return Function.prototype.apply.call(t,r,e)||r});const At=document.querySelector("script[o-setup]"),kt=At?At.getAttribute("o-setup"):"";At&&ht(kt);let Lt=!1;class Tt{constructor(){}setup(t){if(!Lt)return Lt=!0,Promise.all([Tt.binder.setup(t.binder),Tt.fetcher.setup(t.fetcher),t.router?Tt.router.setup(t.router):null])}}return Tt.component=H,Tt.location=Y,Tt.batcher=l,Tt.fetcher=K,Tt.router=Ct,Tt.binder=J,Tt.define=ut,Tt.class=Z,Tt.query=pt,Tt.load=ht,Tt.css=G,Tt}));
